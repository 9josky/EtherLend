"use strict";var Web5Crypto=(()=>{var au=Object.create;var xn=Object.defineProperty;var uu=Object.getOwnPropertyDescriptor;var fu=Object.getOwnPropertyNames;var hu=Object.getPrototypeOf,lu=Object.prototype.hasOwnProperty;var Z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),En=(n,e)=>{for(var t in e)xn(n,t,{get:e[t],enumerable:!0})},xs=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fu(e))!lu.call(n,i)&&i!==t&&xn(n,i,{get:()=>e[i],enumerable:!(r=uu(e,i))||r.enumerable});return n};var du=(n,e,t)=>(t=n!=null?au(hu(n)):{},xs(e||!n||!n.__esModule?xn(t,"default",{value:n,enumerable:!0}):t,n)),yu=n=>xs(xn({},"__esModule",{value:!0}),n);var Ls=Z(_s=>{"use strict";_s.supports=function(...e){let t=e.reduce((r,i)=>Object.assign(r,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var We=Z((ly,Ns)=>{"use strict";Ns.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Ms=Z(vn=>{"use strict";vn.byteLength=$u;vn.toByteArray=Ju;vn.fromByteArray=Yu;var Ze=[],Oe=[],Fu=typeof Uint8Array<"u"?Uint8Array:Array,Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(jt=0,Rs=Ki.length;jt<Rs;++jt)Ze[jt]=Ki[jt],Oe[Ki.charCodeAt(jt)]=jt;var jt,Rs;Oe["-".charCodeAt(0)]=62;Oe["_".charCodeAt(0)]=63;function Ds(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function $u(n){var e=Ds(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Gu(n,e,t){return(e+t)*3/4-t}function Ju(n){var e,t=Ds(n),r=t[0],i=t[1],o=new Fu(Gu(n,r,i)),s=0,c=i>0?r-4:r,a;for(a=0;a<c;a+=4)e=Oe[n.charCodeAt(a)]<<18|Oe[n.charCodeAt(a+1)]<<12|Oe[n.charCodeAt(a+2)]<<6|Oe[n.charCodeAt(a+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Oe[n.charCodeAt(a)]<<2|Oe[n.charCodeAt(a+1)]>>4,o[s++]=e&255),i===1&&(e=Oe[n.charCodeAt(a)]<<10|Oe[n.charCodeAt(a+1)]<<4|Oe[n.charCodeAt(a+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function zu(n){return Ze[n>>18&63]+Ze[n>>12&63]+Ze[n>>6&63]+Ze[n&63]}function Zu(n,e,t){for(var r,i=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),i.push(zu(r));return i.join("")}function Yu(n){for(var e,t=n.length,r=t%3,i=[],o=16383,s=0,c=t-r;s<c;s+=o)i.push(Zu(n,s,s+o>c?c:s+o));return r===1?(e=n[t-1],i.push(Ze[e>>2]+Ze[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Ze[e>>10]+Ze[e>>4&63]+Ze[e<<2&63]+"=")),i.join("")}});var qs=Z(Oi=>{Oi.read=function(n,e,t,r,i){var o,s,c=i*8-r-1,a=(1<<c)-1,u=a>>1,f=-7,h=t?i-1:0,y=t?-1:1,w=n[e+h];for(h+=y,o=w&(1<<-f)-1,w>>=-f,f+=c;f>0;o=o*256+n[e+h],h+=y,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=s*256+n[e+h],h+=y,f-=8);if(o===0)o=1-u;else{if(o===a)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(w?-1:1)*s*Math.pow(2,o-r)};Oi.write=function(n,e,t,r,i,o){var s,c,a,u=o*8-i-1,f=(1<<u)-1,h=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:o-1,p=r?1:-1,l=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+h>=1?e+=y/a:e+=y*Math.pow(2,1-h),e*a>=2&&(s++,a/=2),s+h>=f?(c=0,s=f):s+h>=1?(c=(e*a-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;n[t+w]=c&255,w+=p,c/=256,i-=8);for(s=s<<i|c,u+=i;u>0;n[t+w]=s&255,w+=p,s/=256,u-=8);n[t+w-p]|=l*128}});var kn=Z(mr=>{"use strict";var Ii=Ms(),yr=qs(),Ws=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;mr.Buffer=b;mr.SlowBuffer=nf;mr.INSPECT_MAX_BYTES=50;var Bn=2147483647;mr.kMaxLength=Bn;b.TYPED_ARRAY_SUPPORT=Xu();!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Xu(){try{let n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function ot(n){if(n>Bn)throw new RangeError('The value "'+n+'" is invalid for option "size"');let e=new Uint8Array(n);return Object.setPrototypeOf(e,b.prototype),e}function b(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ni(n)}return Fs(n,e,t)}b.poolSize=8192;function Fs(n,e,t){if(typeof n=="string")return ef(n,e);if(ArrayBuffer.isView(n))return tf(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(Ye(n,ArrayBuffer)||n&&Ye(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ye(n,SharedArrayBuffer)||n&&Ye(n.buffer,SharedArrayBuffer)))return _i(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return b.from(r,e,t);let i=rf(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return b.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}b.from=function(n,e,t){return Fs(n,e,t)};Object.setPrototypeOf(b.prototype,Uint8Array.prototype);Object.setPrototypeOf(b,Uint8Array);function $s(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function Qu(n,e,t){return $s(n),n<=0?ot(n):e!==void 0?typeof t=="string"?ot(n).fill(e,t):ot(n).fill(e):ot(n)}b.alloc=function(n,e,t){return Qu(n,e,t)};function Ni(n){return $s(n),ot(n<0?0:Ri(n)|0)}b.allocUnsafe=function(n){return Ni(n)};b.allocUnsafeSlow=function(n){return Ni(n)};function ef(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Gs(n,e)|0,r=ot(t),i=r.write(n,e);return i!==t&&(r=r.slice(0,i)),r}function Pi(n){let e=n.length<0?0:Ri(n.length)|0,t=ot(e);for(let r=0;r<e;r+=1)t[r]=n[r]&255;return t}function tf(n){if(Ye(n,Uint8Array)){let e=new Uint8Array(n);return _i(e.buffer,e.byteOffset,e.byteLength)}return Pi(n)}function _i(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&t===void 0?r=new Uint8Array(n):t===void 0?r=new Uint8Array(n,e):r=new Uint8Array(n,e,t),Object.setPrototypeOf(r,b.prototype),r}function rf(n){if(b.isBuffer(n)){let e=Ri(n.length)|0,t=ot(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||Mi(n.length)?ot(0):Pi(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Pi(n.data)}function Ri(n){if(n>=Bn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Bn.toString(16)+" bytes");return n|0}function nf(n){return+n!=n&&(n=0),b.alloc(+n)}b.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==b.prototype};b.compare=function(e,t){if(Ye(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),Ye(t,Uint8Array)&&(t=b.from(t,t.offset,t.byteLength)),!b.isBuffer(e)||!b.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let o=0,s=Math.min(r,i);o<s;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:i<r?1:0};b.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return b.alloc(0);let r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=b.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let s=e[r];if(Ye(s,Uint8Array))o+s.length>i.length?(b.isBuffer(s)||(s=b.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(b.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Gs(n,e){if(b.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||Ye(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let t=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Li(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return rc(n).length;default:if(i)return r?-1:Li(n).length;e=(""+e).toLowerCase(),i=!0}}b.byteLength=Gs;function of(n,e,t){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return pf(this,e,t);case"utf8":case"utf-8":return zs(this,e,t);case"ascii":return df(this,e,t);case"latin1":case"binary":return yf(this,e,t);case"base64":return hf(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mf(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}b.prototype._isBuffer=!0;function Vt(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}b.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Vt(this,t,t+1);return this};b.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Vt(this,t,t+3),Vt(this,t+1,t+2);return this};b.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Vt(this,t,t+7),Vt(this,t+1,t+6),Vt(this,t+2,t+5),Vt(this,t+3,t+4);return this};b.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?zs(this,0,e):of.apply(this,arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(e){if(!b.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:b.compare(this,e)===0};b.prototype.inspect=function(){let e="",t=mr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Ws&&(b.prototype[Ws]=b.prototype.inspect);b.prototype.compare=function(e,t,r,i,o){if(Ye(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),!b.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=r-t,a=Math.min(s,c),u=this.slice(i,o),f=e.slice(t,r);for(let h=0;h<a;++h)if(u[h]!==f[h]){s=u[h],c=f[h];break}return s<c?-1:c<s?1:0};function Js(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Mi(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=b.from(e,r)),b.isBuffer(e))return e.length===0?-1:js(n,e,t,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):js(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function js(n,e,t,r,i){let o=1,s=n.length,c=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;o=2,s/=2,c/=2,t/=2}function a(f,h){return o===1?f[h]:f.readUInt16BE(h*o)}let u;if(i){let f=-1;for(u=t;u<s;u++)if(a(n,u)===a(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===c)return f*o}else f!==-1&&(u-=u-f),f=-1}else for(t+c>s&&(t=s-c),u=t;u>=0;u--){let f=!0;for(let h=0;h<c;h++)if(a(n,u+h)!==a(e,h)){f=!1;break}if(f)return u}return-1}b.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};b.prototype.indexOf=function(e,t,r){return Js(this,e,t,r,!0)};b.prototype.lastIndexOf=function(e,t,r){return Js(this,e,t,r,!1)};function sf(n,e,t,r){t=Number(t)||0;let i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;let o=e.length;r>o/2&&(r=o/2);let s;for(s=0;s<r;++s){let c=parseInt(e.substr(s*2,2),16);if(Mi(c))return s;n[t+s]=c}return s}function cf(n,e,t,r){return Cn(Li(e,n.length-t),n,t,r)}function af(n,e,t,r){return Cn(xf(e),n,t,r)}function uf(n,e,t,r){return Cn(rc(e),n,t,r)}function ff(n,e,t,r){return Cn(Ef(e,n.length-t),n,t,r)}b.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((r===void 0||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return sf(this,e,t,r);case"utf8":case"utf-8":return cf(this,e,t,r);case"ascii":case"latin1":case"binary":return af(this,e,t,r);case"base64":return uf(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ff(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function hf(n,e,t){return e===0&&t===n.length?Ii.fromByteArray(n):Ii.fromByteArray(n.slice(e,t))}function zs(n,e,t){t=Math.min(n.length,t);let r=[],i=e;for(;i<t;){let o=n[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let a,u,f,h;switch(c){case 1:o<128&&(s=o);break;case 2:a=n[i+1],(a&192)===128&&(h=(o&31)<<6|a&63,h>127&&(s=h));break;case 3:a=n[i+1],u=n[i+2],(a&192)===128&&(u&192)===128&&(h=(o&15)<<12|(a&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:a=n[i+1],u=n[i+2],f=n[i+3],(a&192)===128&&(u&192)===128&&(f&192)===128&&(h=(o&15)<<18|(a&63)<<12|(u&63)<<6|f&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),i+=c}return lf(r)}var Vs=4096;function lf(n){let e=n.length;if(e<=Vs)return String.fromCharCode.apply(String,n);let t="",r=0;for(;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=Vs));return t}function df(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function yf(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function pf(n,e,t){let r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);let i="";for(let o=e;o<t;++o)i+=Af[n[o]];return i}function mf(n,e,t){let r=n.slice(e,t),i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+r[o+1]*256);return i}b.prototype.slice=function(e,t){let r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,b.prototype),i};function ue(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||ue(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};b.prototype.readUintBE=b.prototype.readUIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||ue(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};b.prototype.readUint8=b.prototype.readUInt8=function(e,t){return e=e>>>0,t||ue(e,1,this.length),this[e]};b.prototype.readUint16LE=b.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||ue(e,2,this.length),this[e]|this[e+1]<<8};b.prototype.readUint16BE=b.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||ue(e,2,this.length),this[e]<<8|this[e+1]};b.prototype.readUint32LE=b.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};b.prototype.readUint32BE=b.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};b.prototype.readBigUInt64LE=bt(function(e){e=e>>>0,pr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Rr(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});b.prototype.readBigUInt64BE=bt(function(e){e=e>>>0,pr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Rr(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(i)<<BigInt(32))+BigInt(o)});b.prototype.readIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||ue(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};b.prototype.readIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||ue(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};b.prototype.readInt8=function(e,t){return e=e>>>0,t||ue(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};b.prototype.readInt16LE=function(e,t){e=e>>>0,t||ue(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};b.prototype.readInt16BE=function(e,t){e=e>>>0,t||ue(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};b.prototype.readInt32LE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};b.prototype.readInt32BE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};b.prototype.readBigInt64LE=bt(function(e){e=e>>>0,pr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Rr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});b.prototype.readBigInt64BE=bt(function(e){e=e>>>0,pr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Rr(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)});b.prototype.readFloatLE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),yr.read(this,e,!0,23,4)};b.prototype.readFloatBE=function(e,t){return e=e>>>0,t||ue(e,4,this.length),yr.read(this,e,!1,23,4)};b.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||ue(e,8,this.length),yr.read(this,e,!0,52,8)};b.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||ue(e,8,this.length),yr.read(this,e,!1,52,8)};function xe(n,e,t,r,i,o){if(!b.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;xe(this,e,t,r,c,0)}let o=1,s=0;for(this[t]=e&255;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r};b.prototype.writeUintBE=b.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;xe(this,e,t,r,c,0)}let o=r-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r};b.prototype.writeUint8=b.prototype.writeUInt8=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,1,255,0),this[t]=e&255,t+1};b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Zs(n,e,t,r,i){tc(e,r,i,n,t,7);let o=Number(e&BigInt(4294967295));n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,t}function Ys(n,e,t,r,i){tc(e,r,i,n,t,7);let o=Number(e&BigInt(4294967295));n[t+7]=o,o=o>>8,n[t+6]=o,o=o>>8,n[t+5]=o,o=o>>8,n[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=s,s=s>>8,n[t+2]=s,s=s>>8,n[t+1]=s,s=s>>8,n[t]=s,t+8}b.prototype.writeBigUInt64LE=bt(function(e,t=0){return Zs(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeBigUInt64BE=bt(function(e,t=0){return Ys(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*r-1);xe(this,e,t,r,a-1,-a)}let o=0,s=1,c=0;for(this[t]=e&255;++o<r&&(s*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+r};b.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*r-1);xe(this,e,t,r,a-1,-a)}let o=r-1,s=1,c=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+r};b.prototype.writeInt8=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};b.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};b.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};b.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};b.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||xe(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};b.prototype.writeBigInt64LE=bt(function(e,t=0){return Zs(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});b.prototype.writeBigInt64BE=bt(function(e,t=0){return Ys(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xs(n,e,t,r,i,o){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Qs(n,e,t,r,i){return e=+e,t=t>>>0,i||Xs(n,e,t,4,34028234663852886e22,-34028234663852886e22),yr.write(n,e,t,r,23,4),t+4}b.prototype.writeFloatLE=function(e,t,r){return Qs(this,e,t,!0,r)};b.prototype.writeFloatBE=function(e,t,r){return Qs(this,e,t,!1,r)};function ec(n,e,t,r,i){return e=+e,t=t>>>0,i||Xs(n,e,t,8,17976931348623157e292,-17976931348623157e292),yr.write(n,e,t,r,52,8),t+8}b.prototype.writeDoubleLE=function(e,t,r){return ec(this,e,t,!0,r)};b.prototype.writeDoubleBE=function(e,t,r){return ec(this,e,t,!1,r)};b.prototype.copy=function(e,t,r,i){if(!b.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let o=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),o};b.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<r;++o)this[o]=e;else{let s=b.isBuffer(e)?e:b.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%c]}return this};var dr={};function Di(n,e,t){dr[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Di("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Di("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError);Di("ERR_OUT_OF_RANGE",function(n,e,t){let r=`The value of "${n}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Hs(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Hs(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);function Hs(n){let e="",t=n.length,r=n[0]==="-"?1:0;for(;t>=r+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function gf(n,e,t){pr(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&Rr(e,n.length-(t+1))}function tc(n,e,t,r,i,o){if(n>t||n<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${t}${s}`,new dr.ERR_OUT_OF_RANGE("value",c,n)}gf(r,i,o)}function pr(n,e){if(typeof n!="number")throw new dr.ERR_INVALID_ARG_TYPE(e,"number",n)}function Rr(n,e,t){throw Math.floor(n)!==n?(pr(n,t),new dr.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new dr.ERR_BUFFER_OUT_OF_BOUNDS:new dr.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}var bf=/[^+/0-9A-Za-z-_]/g;function wf(n){if(n=n.split("=")[0],n=n.trim().replace(bf,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Li(n,e){e=e||1/0;let t,r=n.length,i=null,o=[];for(let s=0;s<r;++s){if(t=n.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function xf(n){let e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function Ef(n,e){let t,r,i,o=[];for(let s=0;s<n.length&&!((e-=2)<0);++s)t=n.charCodeAt(s),r=t>>8,i=t%256,o.push(i),o.push(r);return o}function rc(n){return Ii.toByteArray(wf(n))}function Cn(n,e,t,r){let i;for(i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function Ye(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function Mi(n){return n!==n}var Af=function(){let n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let r=t*16;for(let i=0;i<16;++i)e[r+i]=n[t]+n[i]}return e}();function bt(n){return typeof BigInt>"u"?vf:n}function vf(){throw new Error("BigInt not supported")}});var Wi=Z((gy,nc)=>{"use strict";var qi=null;nc.exports=function(){return qi===null&&(qi={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),qi}});var Hi=Z(ic=>{"use strict";var ji=We(),Bf=new Set(["buffer","view","utf8"]),Vi=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Bf.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ji(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ji(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ji(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};ic.Encoding=Vi});var Ji=Z(Un=>{"use strict";var{Buffer:$i}=kn()||{},{Encoding:Gi}=Hi(),Cf=Wi(),Dr=class extends Gi{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Mr({encode:this.encode,decode:e=>this.decode($i.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Mr=class extends Gi{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Dr({encode:e=>{let t=this.encode(e);return $i.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Fi=class extends Gi{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Dr({encode:e=>$i.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=Cf();return new Mr({encode:r=>e.encode(this.encode(r)),decode:r=>this.decode(t.decode(r)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Un.BufferFormat=Dr;Un.ViewFormat=Mr;Un.UTF8Format=Fi});var ac=Z(Ht=>{"use strict";var{Buffer:pe}=kn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:sc,textDecoder:oc}=Wi()(),{BufferFormat:qr,ViewFormat:zi,UTF8Format:cc}=Ji(),Tn=n=>n;Ht.utf8=new cc({encode:function(n){return pe.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?oc.decode(n):String(n)},decode:Tn,name:"utf8",createViewTranscoder(){return new zi({encode:function(n){return ArrayBuffer.isView(n)?n:sc.encode(n)},decode:function(n){return oc.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new qr({encode:function(n){return pe.isBuffer(n)?n:ArrayBuffer.isView(n)?pe.from(n.buffer,n.byteOffset,n.byteLength):pe.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});Ht.json=new cc({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ht.buffer=new qr({encode:function(n){return pe.isBuffer(n)?n:ArrayBuffer.isView(n)?pe.from(n.buffer,n.byteOffset,n.byteLength):pe.from(String(n),"utf8")},decode:Tn,name:"buffer",createViewTranscoder(){return new zi({encode:function(n){return ArrayBuffer.isView(n)?n:pe.from(String(n),"utf8")},decode:function(n){return pe.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});Ht.view=new zi({encode:function(n){return ArrayBuffer.isView(n)?n:sc.encode(n)},decode:Tn,name:"view",createBufferTranscoder(){return new qr({encode:function(n){return pe.isBuffer(n)?n:ArrayBuffer.isView(n)?pe.from(n.buffer,n.byteOffset,n.byteLength):pe.from(String(n),"utf8")},decode:Tn,name:`${this.name}+buffer`})}});Ht.hex=new qr({encode:function(n){return pe.isBuffer(n)?n:pe.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});Ht.base64=new qr({encode:function(n){return pe.isBuffer(n)?n:pe.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"})});var hc=Z(fc=>{"use strict";var uc=We(),Kn=ac(),{Encoding:kf}=Hi(),{BufferFormat:Uf,ViewFormat:Tf,UTF8Format:Sf}=Ji(),Wr=Symbol("formats"),Sn=Symbol("encodings"),Kf=new Set(["buffer","view","utf8"]),Zi=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>Kf.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Sn]=new Map,this[Wr]=new Set(e);for(let t in Kn)try{this.encoding(t)}catch(r){if(r.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw r}}encodings(){return Array.from(new Set(this[Sn].values()))}encoding(e){let t=this[Sn].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=_f[e],!t)throw new uc(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=Of(e)}let{name:r,format:i}=t;if(!this[Wr].has(i))if(this[Wr].has("view"))t=t.createViewTranscoder();else if(this[Wr].has("buffer"))t=t.createBufferTranscoder();else if(this[Wr].has("utf8"))t=t.createUTF8Transcoder();else throw new uc(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,r,t.name,t.commonName])this[Sn].set(o,t)}return t}};fc.Transcoder=Zi;function Of(n){if(n instanceof kf)return n;let e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${Lf++}`;switch(If(n)){case"view":return new Tf({...n,name:t});case"utf8":return new Sf({...n,name:t});case"buffer":return new Uf({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function If(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}var Pf={binary:Kn.buffer,"utf-8":Kn.utf8},_f={...Kn,...Pf},Lf=0});var Ac=Z((Ay,Yi)=>{"use strict";var gr=typeof Reflect=="object"?Reflect:null,lc=gr&&typeof gr.apply=="function"?gr.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},On;gr&&typeof gr.ownKeys=="function"?On=gr.ownKeys:Object.getOwnPropertySymbols?On=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:On=function(e){return Object.getOwnPropertyNames(e)};function Nf(n){console&&console.warn&&console.warn(n)}var yc=Number.isNaN||function(e){return e!==e};function Q(){Q.init.call(this)}Yi.exports=Q;Yi.exports.once=qf;Q.EventEmitter=Q;Q.prototype._events=void 0;Q.prototype._eventsCount=0;Q.prototype._maxListeners=void 0;var dc=10;function In(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return dc},set:function(n){if(typeof n!="number"||n<0||yc(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");dc=n}});Q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Q.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function pc(n){return n._maxListeners===void 0?Q.defaultMaxListeners:n._maxListeners}Q.prototype.getMaxListeners=function(){return pc(this)};Q.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")lc(a,this,t);else for(var u=a.length,f=xc(a,u),r=0;r<u;++r)lc(f[r],this,t);return!0};function mc(n,e,t,r){var i,o,s;if(In(t),o=n._events,o===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),o=n._events),s=o[e]),s===void 0)s=o[e]=t,++n._eventsCount;else if(typeof s=="function"?s=o[e]=r?[t,s]:[s,t]:r?s.unshift(t):s.push(t),i=pc(n),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=s.length,Nf(c)}return n}Q.prototype.addListener=function(e,t){return mc(this,e,t,!1)};Q.prototype.on=Q.prototype.addListener;Q.prototype.prependListener=function(e,t){return mc(this,e,t,!0)};function Rf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gc(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=Rf.bind(r);return i.listener=t,r.wrapFn=i,i}Q.prototype.once=function(e,t){return In(t),this.on(e,gc(this,e,t)),this};Q.prototype.prependOnceListener=function(e,t){return In(t),this.prependListener(e,gc(this,e,t)),this};Q.prototype.removeListener=function(e,t){var r,i,o,s,c;if(In(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){c=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():Df(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Q.prototype.off=Q.prototype.removeListener;Q.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function bc(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Mf(i):xc(i,i.length)}Q.prototype.listeners=function(e){return bc(this,e,!0)};Q.prototype.rawListeners=function(e){return bc(this,e,!1)};Q.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):wc.call(n,e)};Q.prototype.listenerCount=wc;function wc(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Q.prototype.eventNames=function(){return this._eventsCount>0?On(this._events):[]};function xc(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function Df(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Mf(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function qf(n,e){return new Promise(function(t,r){function i(s){n.removeListener(e,o),r(s)}function o(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}Ec(n,e,o,{once:!0}),e!=="error"&&Wf(n,i,{once:!0})})}function Wf(n,e,t){typeof n.on=="function"&&Ec(n,"error",e,t)}function Ec(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(o){r.once&&n.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}});var Bc=Z((vy,vc)=>{vc.exports=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n)});var jr=Z(Xi=>{"use strict";var Cc=Bc();Xi.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(r,i){n=function(o,s){o?i(o):r(s)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};Xi.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){Cc(()=>e(null,t))}).catch(function(t){Cc(()=>e(t))})}});var Pn=Z(Qi=>{"use strict";Qi.getCallback=function(n,e){return typeof n=="function"?n:e};Qi.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}}});var Bt=Z(Rn=>{"use strict";var{fromCallback:eo}=jr(),ke=We(),{getOptions:to,getCallback:kc}=Pn(),Ft=Symbol("promise"),br=Symbol("callback"),Xe=Symbol("working"),$t=Symbol("handleOne"),st=Symbol("handleMany"),ro=Symbol("autoClose"),At=Symbol("finishWork"),Qe=Symbol("returnMany"),wt=Symbol("closing"),Vr=Symbol("handleClose"),_n=Symbol("closed"),Hr=Symbol("closeCallbacks"),Et=Symbol("keyEncoding"),Gt=Symbol("valueEncoding"),no=Symbol("abortOnClose"),Ln=Symbol("legacy"),io=Symbol("keys"),oo=Symbol("values"),xt=Symbol("limit"),Ie=Symbol("count"),Nn=Object.freeze({}),jf=()=>{},Uc=!1,Fr=class{constructor(e,t,r){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[_n]=!1,this[Hr]=[],this[Xe]=!1,this[wt]=!1,this[ro]=!1,this[br]=null,this[$t]=this[$t].bind(this),this[st]=this[st].bind(this),this[Vr]=this[Vr].bind(this),this[Et]=t[Et],this[Gt]=t[Gt],this[Ln]=r,this[xt]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[Ie]=0,this[no]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Ie]}get limit(){return this[xt]}next(e){let t;if(e===void 0)t=new Promise((r,i)=>{e=(o,s,c)=>{o?i(o):this[Ln]?s===void 0&&c===void 0?r():r([s,c]):r(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[wt]?this.nextTick(e,new ke("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xe]?this.nextTick(e,new ke("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Xe]=!0,this[br]=e,this[Ie]>=this[xt]?this.nextTick(this[$t],null):this._next(this[$t])),t}_next(e){this.nextTick(e)}nextv(e,t,r){return r=kc(t,r),r=eo(r,Ft),t=to(t,Nn),Number.isInteger(e)?(this[wt]?this.nextTick(r,new ke("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xe]?this.nextTick(r,new ke("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[xt]<1/0&&(e=Math.min(e,this[xt]-this[Ie])),this[Xe]=!0,this[br]=r,e<=0?this.nextTick(this[st],null,[]):this._nextv(e,t,this[st])),r[Ft]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[Ft])}_nextv(e,t,r){let i=[],o=(s,c,a)=>{if(s)return r(s);if(this[Ln]?c===void 0&&a===void 0:c===void 0)return r(null,i);i.push(this[Ln]?[c,a]:c),i.length===e?r(null,i):this._next(o)};this._next(o)}all(e,t){return t=kc(e,t),t=eo(t,Ft),e=to(e,Nn),this[wt]?this.nextTick(t,new ke("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xe]?this.nextTick(t,new ke("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Xe]=!0,this[br]=t,this[ro]=!0,this[Ie]>=this[xt]?this.nextTick(this[st],null,[]):this._all(e,this[st])),t[Ft]}_all(e,t){let r=this[Ie],i=[],o=()=>{let c=this[xt]<1/0?Math.min(1e3,this[xt]-r):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Nn,s)},s=(c,a)=>{c?t(c):a.length===0?t(null,i):(i.push.apply(i,a),r+=a.length,o())};o()}[At](){let e=this[br];return this[no]&&e===null?jf:(this[Xe]=!1,this[br]=null,this[wt]&&this._close(this[Vr]),e)}[Qe](e,t,r){this[ro]?this.close(e.bind(null,t,r)):e(t,r)}seek(e,t){if(t=to(t,Nn),!this[wt]){if(this[Xe])throw new ke("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let r=this.db.keyEncoding(t.keyEncoding||this[Et]),i=r.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(r.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new ke("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=eo(e,Ft),this[_n]?this.nextTick(e):this[wt]?this[Hr].push(e):(this[wt]=!0,this[Hr].push(e),this[Xe]?this[no]&&this[At]()(new ke("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Vr])),e[Ft]}_close(e){this.nextTick(e)}[Vr](){this[_n]=!0,this.db.detachResource(this);let e=this[Hr];this[Hr]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[_n]||await this.close()}}},wr=class extends Fr{constructor(e,t){super(e,t,!0),this[io]=t.keys!==!1,this[oo]=t.values!==!1}[$t](e,t,r){let i=this[At]();if(e)return i(e);try{t=this[io]&&t!==void 0?this[Et].decode(t):void 0,r=this[oo]&&r!==void 0?this[Gt].decode(r):void 0}catch(o){return i(new vt("entry",o))}t===void 0&&r===void 0||this[Ie]++,i(null,t,r)}[st](e,t){let r=this[At]();if(e)return this[Qe](r,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[io]&&o!==void 0?this[Et].decode(o):void 0,i[1]=this[oo]&&s!==void 0?this[Gt].decode(s):void 0}}catch(i){return this[Qe](r,new vt("entries",i))}this[Ie]+=t.length,this[Qe](r,null,t)}end(e){return!Uc&&typeof console<"u"&&(Uc=!0,console.warn(new ke("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},so=class extends Fr{constructor(e,t){super(e,t,!1)}[$t](e,t){let r=this[At]();if(e)return r(e);try{t=t!==void 0?this[Et].decode(t):void 0}catch(i){return r(new vt("key",i))}t!==void 0&&this[Ie]++,r(null,t)}[st](e,t){let r=this[At]();if(e)return this[Qe](r,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Et].decode(o):void 0}}catch(i){return this[Qe](r,new vt("keys",i))}this[Ie]+=t.length,this[Qe](r,null,t)}},co=class extends Fr{constructor(e,t){super(e,t,!1)}[$t](e,t){let r=this[At]();if(e)return r(e);try{t=t!==void 0?this[Gt].decode(t):void 0}catch(i){return r(new vt("value",i))}t!==void 0&&this[Ie]++,r(null,t)}[st](e,t){let r=this[At]();if(e)return this[Qe](r,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Gt].decode(o):void 0}}catch(i){return this[Qe](r,new vt("values",i))}this[Ie]+=t.length,this[Qe](r,null,t)}},vt=class extends ke{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let n of["_ended property","_nexting property","_end method"])Object.defineProperty(wr.prototype,n.split(" ")[0],{get(){throw new ke(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ke(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});wr.keyEncoding=Et;wr.valueEncoding=Gt;Rn.AbstractIterator=wr;Rn.AbstractKeyIterator=so;Rn.AbstractValueIterator=co});var Tc=Z(ao=>{"use strict";var{AbstractKeyIterator:Vf,AbstractValueIterator:Hf}=Bt(),Jt=Symbol("iterator"),$r=Symbol("callback"),xr=Symbol("handleOne"),zt=Symbol("handleMany"),Gr=class extends Vf{constructor(e,t){super(e,t),this[Jt]=e.iterator({...t,keys:!0,values:!1}),this[xr]=this[xr].bind(this),this[zt]=this[zt].bind(this)}},Dn=class extends Hf{constructor(e,t){super(e,t),this[Jt]=e.iterator({...t,keys:!1,values:!0}),this[xr]=this[xr].bind(this),this[zt]=this[zt].bind(this)}};for(let n of[Gr,Dn]){let e=n===Gr,t=e?r=>r[0]:r=>r[1];n.prototype._next=function(r){this[$r]=r,this[Jt].next(this[xr])},n.prototype[xr]=function(r,i,o){let s=this[$r];r?s(r):s(null,e?i:o)},n.prototype._nextv=function(r,i,o){this[$r]=o,this[Jt].nextv(r,i,this[zt])},n.prototype._all=function(r,i){this[$r]=i,this[Jt].all(r,this[zt])},n.prototype[zt]=function(r,i){let o=this[$r];r?o(r):o(null,i.map(t))},n.prototype._seek=function(r,i){this[Jt].seek(r,i)},n.prototype._close=function(r){this[Jt].close(r)}}ao.DefaultKeyIterator=Gr;ao.DefaultValueIterator=Dn});var Sc=Z(Hn=>{"use strict";var{AbstractIterator:Ff,AbstractKeyIterator:$f,AbstractValueIterator:Gf}=Bt(),uo=We(),Ee=Symbol("nut"),jn=Symbol("undefer"),Vn=Symbol("factory"),Mn=class extends Ff{constructor(e,t){super(e,t),this[Ee]=null,this[Vn]=()=>e.iterator(t),this.db.defer(()=>this[jn]())}},qn=class extends $f{constructor(e,t){super(e,t),this[Ee]=null,this[Vn]=()=>e.keys(t),this.db.defer(()=>this[jn]())}},Wn=class extends Gf{constructor(e,t){super(e,t),this[Ee]=null,this[Vn]=()=>e.values(t),this.db.defer(()=>this[jn]())}};for(let n of[Mn,qn,Wn])n.prototype[jn]=function(){this.db.status==="open"&&(this[Ee]=this[Vn]())},n.prototype._next=function(e){this[Ee]!==null?this[Ee].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new uo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,r){this[Ee]!==null?this[Ee].nextv(e,t,r):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,r)):this.nextTick(r,new uo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[Ee]!==null?this[Ee].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new uo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[Ee]!==null?this[Ee]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[Ee]!==null?this[Ee].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Hn.DeferredIterator=Mn;Hn.DeferredKeyIterator=qn;Hn.DeferredValueIterator=Wn});var ho=Z(Oc=>{"use strict";var{fromCallback:Kc}=jr(),Fn=We(),{getCallback:Jf,getOptions:zf}=Pn(),$n=Symbol("promise"),Pe=Symbol("status"),Er=Symbol("operations"),Jr=Symbol("finishClose"),Ar=Symbol("closeCallbacks"),fo=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Er]=[],this[Ar]=[],this[Pe]="open",this[Jr]=this[Jr].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Er].length}put(e,t,r){if(this[Pe]!=="open")throw new Fn("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=r&&r.sublevel!=null?r.sublevel:this.db,s=r,c=o.keyEncoding(r&&r.keyEncoding),a=o.valueEncoding(r&&r.valueEncoding),u=c.format;r={...r,keyEncoding:u,valueEncoding:a.format},o!==this.db&&(r.sublevel=null);let f=o.prefixKey(c.encode(e),u),h=a.encode(t);return this._put(f,h,r),this[Er].push({...s,type:"put",key:e,value:t}),this}_put(e,t,r){}del(e,t){if(this[Pe]!=="open")throw new Fn("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let r=this.db._checkKey(e);if(r)throw r;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),c=s.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),c),t),this[Er].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[Pe]!=="open")throw new Fn("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Er]=[],this}_clear(){}write(e,t){return t=Jf(e,t),t=Kc(t,$n),e=zf(e),this[Pe]!=="open"?this.nextTick(t,new Fn("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[Pe]="writing",this._write(e,r=>{this[Pe]="closing",this[Ar].push(()=>t(r)),r||this.db.emit("batch",this[Er]),this._close(this[Jr])})),t[$n]}_write(e,t){}close(e){return e=Kc(e,$n),this[Pe]==="closing"?this[Ar].push(e):this[Pe]==="closed"?this.nextTick(e):(this[Ar].push(e),this[Pe]!=="writing"&&(this[Pe]="closing",this._close(this[Jr]))),e[$n]}_close(e){this.nextTick(e)}[Jr](){this[Pe]="closed",this.db.detachResource(this);let e=this[Ar];this[Ar]=[];for(let t of e)t()}};Oc.AbstractChainedBatch=fo});var Pc=Z(Ic=>{"use strict";var{AbstractChainedBatch:Zf}=ho(),Yf=We(),vr=Symbol("encoded"),lo=class extends Zf{constructor(e){super(e),this[vr]=[]}_put(e,t,r){this[vr].push({...r,type:"put",key:e,value:t})}_del(e,t){this[vr].push({...t,type:"del",key:e})}_clear(){this[vr]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[vr].length===0?this.nextTick(t):this.db._batch(this[vr],e,t):this.nextTick(t,new Yf("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Ic.DefaultChainedBatch=lo});var Nc=Z((Oy,Lc)=>{"use strict";var _c=We(),Xf=Object.prototype.hasOwnProperty,Qf=new Set(["lt","lte","gt","gte"]);Lc.exports=function(n,e){let t={};for(let r in n)if(Xf.call(n,r)&&!(r==="keyEncoding"||r==="valueEncoding")){if(r==="start"||r==="end")throw new _c(`The legacy range option '${r}' has been removed`,{code:"LEVEL_LEGACY"});if(r==="encoding")throw new _c("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Qf.has(r)?t[r]=e.encode(n[r]):t[r]=n[r]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var yo=Z((Iy,Dc)=>{var Rc;Dc.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):n=>(Rc||(Rc=Promise.resolve())).then(n).catch(e=>setTimeout(()=>{throw e},0))});var Wc=Z((Py,qc)=>{"use strict";var Mc=yo();qc.exports=function(n,...e){e.length===0?Mc(n):Mc(()=>n(...e))}});var jc=Z(Gn=>{"use strict";var{AbstractIterator:eh,AbstractKeyIterator:th,AbstractValueIterator:rh}=Bt(),Br=Symbol("unfix"),je=Symbol("iterator"),Zt=Symbol("handleOne"),Ct=Symbol("handleMany"),ct=Symbol("callback"),zr=class extends eh{constructor(e,t,r,i){super(e,t),this[je]=r,this[Br]=i,this[Zt]=this[Zt].bind(this),this[Ct]=this[Ct].bind(this),this[ct]=null}[Zt](e,t,r){let i=this[ct];if(e)return i(e);t!==void 0&&(t=this[Br](t)),i(e,t,r)}[Ct](e,t){let r=this[ct];if(e)return r(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[Br](o))}r(e,t)}},Zr=class extends th{constructor(e,t,r,i){super(e,t),this[je]=r,this[Br]=i,this[Zt]=this[Zt].bind(this),this[Ct]=this[Ct].bind(this),this[ct]=null}[Zt](e,t){let r=this[ct];if(e)return r(e);t!==void 0&&(t=this[Br](t)),r(e,t)}[Ct](e,t){let r=this[ct];if(e)return r(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[Br](o))}r(e,t)}},Yr=class extends rh{constructor(e,t,r){super(e,t),this[je]=r}};for(let n of[zr,Zr])n.prototype._next=function(e){this[ct]=e,this[je].next(this[Zt])},n.prototype._nextv=function(e,t,r){this[ct]=r,this[je].nextv(e,t,this[Ct])},n.prototype._all=function(e,t){this[ct]=t,this[je].all(e,this[Ct])};for(let n of[Yr])n.prototype._next=function(e){this[je].next(e)},n.prototype._nextv=function(e,t,r){this[je].nextv(e,t,r)},n.prototype._all=function(e,t){this[je].all(e,t)};for(let n of[zr,Zr,Yr])n.prototype._seek=function(e,t){this[je].seek(e,t)},n.prototype._close=function(e){this[je].close(e)};Gn.AbstractSublevelIterator=zr;Gn.AbstractSublevelKeyIterator=Zr;Gn.AbstractSublevelValueIterator=Yr});var $c=Z((Ly,Fc)=>{"use strict";var po=We(),{Buffer:bo}=kn()||{},{AbstractSublevelIterator:nh,AbstractSublevelKeyIterator:ih,AbstractSublevelValueIterator:oh}=jc(),at=Symbol("prefix"),Vc=Symbol("upperBound"),Xr=Symbol("prefixRange"),Ue=Symbol("parent"),mo=Symbol("unfix"),Hc=new TextEncoder,sh={separator:"!"};Fc.exports=function({AbstractLevel:n}){class e extends n{static defaults(r){if(typeof r=="string")throw new po("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(r&&r.open)throw new po("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return r==null?sh:r.separator?r:{...r,separator:"!"}}constructor(r,i,o){let{separator:s,manifest:c,...a}=e.defaults(o);i=ah(i,s);let u=s.charCodeAt(0)+1,f=r[Ue]||r;if(!Hc.encode(i).every(w=>w>u&&w<127))throw new po(`Prefix must use bytes > ${u} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(ch(f,c),a);let h=(r.prefix||"")+s+i+s,y=h.slice(0,-1)+String.fromCharCode(u);this[Ue]=f,this[at]=new Jn(h),this[Vc]=new Jn(y),this[mo]=new wo,this.nextTick=f.nextTick}prefixKey(r,i){if(i==="utf8")return this[at].utf8+r;if(r.byteLength===0)return this[at][i];if(i==="view"){let o=this[at].view,s=new Uint8Array(o.byteLength+r.byteLength);return s.set(o,0),s.set(r,o.byteLength),s}else{let o=this[at].buffer;return bo.concat([o,r],o.byteLength+r.byteLength)}}[Xr](r,i){r.gte!==void 0?r.gte=this.prefixKey(r.gte,i):r.gt!==void 0?r.gt=this.prefixKey(r.gt,i):r.gte=this[at][i],r.lte!==void 0?r.lte=this.prefixKey(r.lte,i):r.lt!==void 0?r.lt=this.prefixKey(r.lt,i):r.lte=this[Vc][i]}get prefix(){return this[at].utf8}get db(){return this[Ue]}_open(r,i){this[Ue].open({passive:!0},i)}_put(r,i,o,s){this[Ue].put(r,i,o,s)}_get(r,i,o){this[Ue].get(r,i,o)}_getMany(r,i,o){this[Ue].getMany(r,i,o)}_del(r,i,o){this[Ue].del(r,i,o)}_batch(r,i,o){this[Ue].batch(r,i,o)}_clear(r,i){this[Xr](r,r.keyEncoding),this[Ue].clear(r,i)}_iterator(r){this[Xr](r,r.keyEncoding);let i=this[Ue].iterator(r),o=this[mo].get(this[at].utf8.length,r.keyEncoding);return new nh(this,r,i,o)}_keys(r){this[Xr](r,r.keyEncoding);let i=this[Ue].keys(r),o=this[mo].get(this[at].utf8.length,r.keyEncoding);return new ih(this,r,i,o)}_values(r){this[Xr](r,r.keyEncoding);let i=this[Ue].values(r);return new oh(this,r,i)}}return{AbstractSublevel:e}};var ch=function(n,e){return{...n.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:go(n,"utf8"),buffer:go(n,"buffer"),view:go(n,"view")}}},go=function(n,e){return n.supports.encodings[e]?n.keyEncoding(e).name===e:!1},Jn=class{constructor(e){this.utf8=e,this.view=Hc.encode(e),this.buffer=bo?bo.from(this.view.buffer,0,this.view.byteLength):{}}},wo=class{constructor(){this.cache=new Map}get(e,t){let r=this.cache.get(t);return r===void 0&&(t==="view"?r=function(i,o){return o.subarray(i)}.bind(null,e):r=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,r)),r}},ah=function(n,e){let t=0,r=n.length;for(;t<r&&n[t]===e;)t++;for(;r>t&&n[r-1]===e;)r--;return n.slice(t,r)}});var Bo=Z(vo=>{"use strict";var{supports:uh}=Ls(),{Transcoder:fh}=hc(),{EventEmitter:hh}=Ac(),{fromCallback:kt}=jr(),Ve=We(),{AbstractIterator:Yt}=Bt(),{DefaultKeyIterator:lh,DefaultValueIterator:dh}=Tc(),{DeferredIterator:yh,DeferredKeyIterator:ph,DeferredValueIterator:mh}=Sc(),{DefaultChainedBatch:Gc}=Pc(),{getCallback:Xt,getOptions:Ut}=Pn(),zn=Nc(),F=Symbol("promise"),ut=Symbol("landed"),Qt=Symbol("resources"),xo=Symbol("closeResources"),Qr=Symbol("operations"),en=Symbol("undefer"),Zn=Symbol("deferOpen"),Jc=Symbol("options"),J=Symbol("status"),er=Symbol("defaultOptions"),Cr=Symbol("transcoder"),Yn=Symbol("keyEncoding"),Eo=Symbol("valueEncoding"),gh=()=>{},tn=class extends hh{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Ut(t);let{keyEncoding:r,valueEncoding:i,passive:o,...s}=t;this[Qt]=new Set,this[Qr]=[],this[Zn]=!0,this[Jc]=s,this[J]="opening",this.supports=uh(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Cr]=new fh(bh(this)),this[Yn]=this[Cr].encoding(r||"utf8"),this[Eo]=this[Cr].encoding(i||"utf8");for(let c of this[Cr].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[er]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Yn].commonName,valueEncoding:this[Eo].commonName}),key:Object.freeze({keyEncoding:this[Yn].commonName})},this.nextTick(()=>{this[Zn]&&this.open({passive:!1},gh)})}get status(){return this[J]}keyEncoding(e){return this[Cr].encoding(e??this[Yn])}valueEncoding(e){return this[Cr].encoding(e??this[Eo])}open(e,t){t=Xt(e,t),t=kt(t,F),e={...this[Jc],...Ut(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let r=i=>{this[J]==="closing"||this[J]==="opening"?this.once(ut,i?()=>r(i):r):this[J]!=="open"?t(new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[J]==="opening"?this.once(ut,r):this.nextTick(r):this[J]==="closed"||this[Zn]?(this[Zn]=!1,this[J]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[J]="closed",this[xo](()=>{this.emit(ut),r(i)}),this[en]();return}this[J]="open",this[en](),this.emit(ut),this[J]==="open"&&this.emit("open"),this[J]==="open"&&this.emit("ready"),r()})):this[J]==="open"?this.nextTick(r):this.once(ut,()=>this.open(e,t)),t[F]}_open(e,t){this.nextTick(t)}close(e){e=kt(e,F);let t=r=>{this[J]==="opening"||this[J]==="closing"?this.once(ut,r?t(r):t):this[J]!=="closed"?e(new Ve("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):e()};if(this[J]==="open"){this[J]="closing",this.emit("closing");let r=i=>{this[J]="open",this[en](),this.emit(ut),t(i)};this[xo](()=>{this._close(i=>{if(i)return r(i);this[J]="closed",this[en](),this.emit(ut),this[J]==="closed"&&this.emit("closed"),t()})})}else this[J]==="closed"?this.nextTick(t):this.once(ut,()=>this.close(e));return e[F]}[xo](e){if(this[Qt].size===0)return this.nextTick(e);let t=this[Qt].size,r=!0,i=()=>{--t===0&&(r?this.nextTick(e):e())};for(let o of this[Qt])o.close(i);r=!1,this[Qt].clear()}_close(e){this.nextTick(e)}get(e,t,r){if(r=Xt(t,r),r=kt(r,F),t=Ut(t,this[er].entry),this[J]==="opening")return this.defer(()=>this.get(e,t,r)),r[F];if(kr(this,r))return r[F];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[F];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=o.format,a=s.format;return(t.keyEncoding!==c||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:a})),this._get(this.prefixKey(o.encode(e),c),t,(u,f)=>{if(u)return(u.code==="LEVEL_NOT_FOUND"||u.notFound||/NotFound/i.test(u))&&(u.code||(u.code="LEVEL_NOT_FOUND"),u.notFound||(u.notFound=!0),u.status||(u.status=404)),r(u);try{f=s.decode(f)}catch(h){return r(new Ve("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}r(null,f)}),r[F]}_get(e,t,r){this.nextTick(r,new Error("NotFound"))}getMany(e,t,r){if(r=Xt(t,r),r=kt(r,F),t=Ut(t,this[er].entry),this[J]==="opening")return this.defer(()=>this.getMany(e,t,r)),r[F];if(kr(this,r))return r[F];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[F];if(e.length===0)return this.nextTick(r,null,[]),r[F];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,c=o.format;(t.keyEncoding!==s||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));let a=new Array(e.length);for(let u=0;u<e.length;u++){let f=e[u],h=this._checkKey(f);if(h)return this.nextTick(r,h),r[F];a[u]=this.prefixKey(i.encode(f),s)}return this._getMany(a,t,(u,f)=>{if(u)return r(u);try{for(let h=0;h<f.length;h++)f[h]!==void 0&&(f[h]=o.decode(f[h]))}catch(h){return r(new Ve(`Could not decode one or more of ${f.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}r(null,f)}),r[F]}_getMany(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}put(e,t,r,i){if(i=Xt(r,i),i=kt(i,F),r=Ut(r,this[er].entry),this[J]==="opening")return this.defer(()=>this.put(e,t,r,i)),i[F];if(kr(this,i))return i[F];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[F];let s=this.keyEncoding(r.keyEncoding),c=this.valueEncoding(r.valueEncoding),a=s.format,u=c.format;(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u}));let f=this.prefixKey(s.encode(e),a),h=c.encode(t);return this._put(f,h,r,y=>{if(y)return i(y);this.emit("put",e,t),i()}),i[F]}_put(e,t,r,i){this.nextTick(i)}del(e,t,r){if(r=Xt(t,r),r=kt(r,F),t=Ut(t,this[er].key),this[J]==="opening")return this.defer(()=>this.del(e,t,r)),r[F];if(kr(this,r))return r[F];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[F];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,c=>{if(c)return r(c);this.emit("del",e),r()}),r[F]}_del(e,t,r){this.nextTick(r)}batch(e,t,r){if(!arguments.length){if(this[J]==="opening")return new Gc(this);if(this[J]!=="open")throw new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?r=e:r=Xt(t,r),r=kt(r,F),t=Ut(t,this[er].empty),this[J]==="opening")return this.defer(()=>this.batch(e,t,r)),r[F];if(kr(this,r))return r[F];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[F];if(e.length===0)return this.nextTick(r),r[F];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...c}=t;for(let a=0;a<e.length;a++){if(typeof e[a]!="object"||e[a]===null)return this.nextTick(r,new TypeError("A batch operation must be an object")),r[F];let u=Object.assign({},e[a]);if(u.type!=="put"&&u.type!=="del")return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[F];let f=this._checkKey(u.key);if(f)return this.nextTick(r,f),r[F];let h=u.sublevel!=null?u.sublevel:this,y=h.keyEncoding(u.keyEncoding||o),w=y.format;if(u.key=h.prefixKey(y.encode(u.key),w),u.keyEncoding=w,u.type==="put"){let p=this._checkValue(u.value);if(p)return this.nextTick(r,p),r[F];let l=h.valueEncoding(u.valueEncoding||s);u.value=l.encode(u.value),u.valueEncoding=l.format}h!==this&&(u.sublevel=null),i[a]=u}return this._batch(i,c,a=>{if(a)return r(a);this.emit("batch",e),r()}),r[F]}_batch(e,t,r){this.nextTick(r)}sublevel(e,t){return this._sublevel(e,Ao.defaults(t))}_sublevel(e,t){return new Ao(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Xt(e,t),t=kt(t,F),e=Ut(e,this[er].empty),this[J]==="opening")return this.defer(()=>this.clear(e,t)),t[F];if(kr(this,t))return t[F];let r=e,i=this.keyEncoding(e.keyEncoding);return e=zn(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",r),t()}),t[F]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=zn(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Yt.keyEncoding]=t,e[Yt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new yh(this,e);if(this[J]!=="open")throw new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Yt(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=zn(e,t),e[Yt.keyEncoding]=t,e[Yt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new ph(this,e);if(this[J]!=="open")throw new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new lh(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=zn(e,t),e[Yt.keyEncoding]=t,e[Yt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new mh(this,e);if(this[J]!=="open")throw new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new dh(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Qr].push(e)}[en](){if(this[Qr].length===0)return;let e=this[Qr];this[Qr]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Qt].add(e)}detachResource(e){this[Qt].delete(e)}_chainedBatch(){return new Gc(this)}_checkKey(e){if(e==null)return new Ve("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Ve("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};tn.prototype.nextTick=Wc();var{AbstractSublevel:Ao}=$c()({AbstractLevel:tn});vo.AbstractLevel=tn;vo.AbstractSublevel=Ao;var kr=function(n,e){return n[J]!=="open"?(n.nextTick(e,new Ve("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},bh=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])}});var Co=Z(tr=>{"use strict";tr.AbstractLevel=Bo().AbstractLevel;tr.AbstractSublevel=Bo().AbstractSublevel;tr.AbstractIterator=Bt().AbstractIterator;tr.AbstractKeyIterator=Bt().AbstractKeyIterator;tr.AbstractValueIterator=Bt().AbstractValueIterator;tr.AbstractChainedBatch=ho().AbstractChainedBatch});var Zc=Z((Dy,zc)=>{zc.exports=xh;var wh=yo();function xh(n,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let r,i,o,s,c,a=!0,u;Array.isArray(n)?(r=[],o=i=n.length):(s=Object.keys(n),r={},o=i=s.length);function f(y){function w(){t&&t(y,r),t=null}a?wh(w):w()}function h(y,w,p){if(r[y]=p,w&&(c=!0),--o===0||w)f(w);else if(!c&&u<i){let l;s?(l=s[u],u+=1,n[l](function(g,x){h(l,g,x)})):(l=u,u+=1,n[l](function(g,x){h(l,g,x)}))}}u=e,o?s?s.some(function(y,w){return n[y](function(p,l){h(y,p,l)}),w===e-1}):n.some(function(y,w){return y(function(p,l){h(w,p,l)}),w===e-1}):f(null),a=!1}});var ko=Z((My,Yc)=>{"use strict";Yc.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,r=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&r!==void 0?IDBKeyRange.bound(t,r,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):r!==void 0?IDBKeyRange.upperBound(r,o):null}});var Uo=Z((qy,Xc)=>{"use strict";var Eh=new TextEncoder;Xc.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):Eh.encode(n)}});var na=Z(ra=>{"use strict";var{AbstractIterator:Ah}=Co(),Qc=ko(),Xn=Uo(),et=Symbol("cache"),ft=Symbol("finished"),Te=Symbol("options"),ht=Symbol("currentOptions"),rr=Symbol("position"),To=Symbol("location"),Ur=Symbol("first"),ea={},So=class extends Ah{constructor(e,t,r){super(e,r),this[et]=[],this[ft]=this.limit===0,this[Te]=r,this[ht]={...r},this[rr]=void 0,this[To]=t,this[Ur]=!0}_nextv(e,t,r){if(this[Ur]=!1,this[ft])return this.nextTick(r,null,[]);if(this[et].length>0)return e=Math.min(e,this[et].length),this.nextTick(r,null,this[et].splice(0,e));this[rr]!==void 0&&(this[Te].reverse?(this[ht].lt=this[rr],this[ht].lte=void 0):(this[ht].gt=this[rr],this[ht].gte=void 0));let i;try{i=Qc(this[ht])}catch{return this[ft]=!0,this.nextTick(r,null,[])}let o=this.db.db.transaction([this[To]],"readonly"),s=o.objectStore(this[To]),c=[];if(this[Te].reverse){let a=!this[Te].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[a](i,"prev").onsuccess=u=>{let f=u.target.result;if(f){let{key:h,value:y}=f;this[rr]=h,c.push([this[Te].keys&&h!==void 0?Xn(h):void 0,this[Te].values&&y!==void 0?Xn(y):void 0]),c.length<e?f.continue():ta(o)}else this[ft]=!0}}else{let a,u,f=()=>{if(a===void 0||u===void 0)return;let h=Math.max(a.length,u.length);h===0||e===1/0?this[ft]=!0:this[rr]=a[h-1],c.length=h;for(let y=0;y<h;y++){let w=a[y],p=u[y];c[y]=[this[Te].keys&&w!==void 0?Xn(w):void 0,this[Te].values&&p!==void 0?Xn(p):void 0]}ta(o)};this[Te].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{a=h.target.result,f()}:(a=[],this.nextTick(f)),this[Te].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{u=h.target.result,f()}:(u=[],this.nextTick(f))}o.onabort=()=>{r(o.error||new Error("aborted by user")),r=null},o.oncomplete=()=>{r(null,c),r=null}}_next(e){if(this[et].length>0){let[t,r]=this[et].shift();this.nextTick(e,null,t,r)}else if(this[ft])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Ur]&&(this[Ur]=!1,t=1),this._nextv(t,ea,(r,i)=>{if(r)return e(r);this[et]=i,this._next(e)})}}_all(e,t){this[Ur]=!1;let r=this[et].splice(0,this[et].length),i=this.limit-this.count-r.length;if(i<=0)return this.nextTick(t,null,r);this._nextv(i,ea,(o,s)=>{if(o)return t(o);r.length>0&&(s=r.concat(s)),t(null,s)})}_seek(e,t){this[Ur]=!0,this[et]=[],this[ft]=!1,this[rr]=void 0,this[ht]={...this[Te]};let r;try{r=Qc(this[Te])}catch{this[ft]=!0;return}r!==null&&!r.includes(e)?this[ft]=!0:this[Te].reverse?this[ht].lte=e:this[ht].gte=e}};ra.Iterator=So;function ta(n){typeof n.commit=="function"&&n.commit()}});var oa=Z((jy,ia)=>{"use strict";ia.exports=function(e,t,r,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),c=s.objectStore(t),a=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let u=c.openKeyCursor?"openKeyCursor":"openCursor",f=i.reverse?"prev":"next";c[u](r,f).onsuccess=function(h){let y=h.target.result;y&&(c.delete(y.key).onsuccess=function(){(i.limit<=0||++a<i.limit)&&y.continue()})}}});var ha=Z(fa=>{"use strict";var{AbstractLevel:vh}=Co(),sa=We(),Bh=Zc(),{fromCallback:Ch}=jr(),{Iterator:kh}=na(),ca=Uo(),Uh=oa(),Th=ko(),ua="level-js-",rn=Symbol("idb"),Ko=Symbol("namePrefix"),lt=Symbol("location"),Oo=Symbol("version"),nr=Symbol("store"),nn=Symbol("onComplete"),aa=Symbol("promise"),Qn=class extends vh{constructor(e,t,r){if(typeof t=="function"||typeof r=="function")throw new sa("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[lt]=e,this[Ko]=i??ua,this[Oo]=parseInt(o||1,10),this[rn]=null}get location(){return this[lt]}get namePrefix(){return this[Ko]}get version(){return this[Oo]}get db(){return this[rn]}get type(){return"browser-level"}_open(e,t){let r=indexedDB.open(this[Ko]+this[lt],this[Oo]);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[rn]=r.result,t()},r.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[lt])||o.createObjectStore(this[lt])}}[nr](e){return this[rn].transaction([this[lt]],e).objectStore(this[lt])}[nn](e,t){let r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}_get(e,t,r){let i=this[nr]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(r,s)}this[nn](o,function(s,c){if(s)return r(s);if(c===void 0)return r(new sa("Entry not found",{code:"LEVEL_NOT_FOUND"}));r(null,ca(c))})}_getMany(e,t,r){let i=this[nr]("readonly"),o=e.map(s=>c=>{let a;try{a=i.get(s)}catch(u){return c(u)}a.onsuccess=()=>{let u=a.result;c(null,u===void 0?u:ca(u))},a.onerror=u=>{u.stopPropagation(),c(a.error)}});Bh(o,16,r)}_del(e,t,r){let i=this[nr]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(r,s)}this[nn](o,r)}_put(e,t,r,i){let o=this[nr]("readwrite"),s;try{s=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[nn](s,i)}_iterator(e){return new kh(this,this[lt],e)}_batch(e,t,r){let i=this[nr]("readwrite"),o=i.transaction,s=0,c;o.onabort=function(){r(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){r()};function a(){let u=e[s++],f=u.key,h;try{h=u.type==="del"?i.delete(f):i.put(u.value,f)}catch(y){c=y,o.abort();return}s<e.length?h.onsuccess=a:typeof o.commit=="function"&&o.commit()}a()}_clear(e,t){let r,i;try{r=Th(e)}catch{return this.nextTick(t)}if(e.limit>=0)return Uh(this,this[lt],r,e,t);try{let o=this[nr]("readwrite");i=r?o.delete(r):o.clear()}catch(o){return this.nextTick(t,o)}this[nn](i,t)}_close(e){this[rn].close(),this.nextTick(e)}};Qn.destroy=function(n,e,t){typeof e=="function"&&(t=e,e=ua),t=Ch(t,aa);let r=indexedDB.deleteDatabase(e+n);return r.onsuccess=function(){t()},r.onerror=function(i){t(i)},t[aa]};fa.BrowserLevel=Qn});var da=Z(la=>{la.Level=ha().BrowserLevel});var gd={};En(gd,{AesCtr:()=>ar,AesCtrAlgorithm:()=>hs,AesGcm:()=>Zo,BaseAesAlgorithm:()=>fn,BaseAesCtrAlgorithm:()=>hn,BaseEcdhAlgorithm:()=>cn,BaseEcdsaAlgorithm:()=>an,BaseEdDsaAlgorithm:()=>un,BaseEllipticCurveAlgorithm:()=>dt,ConcatKdf:()=>rt,CryptoAlgorithm:()=>Mt,CryptoError:()=>gt,CryptoKey:()=>le,CryptoKeyToJwkMixin:()=>Qa,CryptoKeyWithJwk:()=>md,DataError:()=>bi,EcdhAlgorithm:()=>as,EcdsaAlgorithm:()=>us,Ed25519:()=>Je,EdDsaAlgorithm:()=>fs,InvalidAccessError:()=>oe,Jose:()=>Ce,NotSupportedError:()=>Dt,OperationError:()=>qe,Secp256k1:()=>Be,SyntaxError:()=>wi,X25519:()=>Pt,XChaCha20:()=>ss,XChaCha20Poly1305:()=>cs,utils:()=>ti});var gt=class extends Error{},bi=class extends gt{},oe=class extends gt{},Dt=class extends gt{},qe=class extends gt{},wi=class extends gt{};var Mt=class{checkAlgorithmName(e){let{algorithmName:t}=e;if(t===void 0)throw new TypeError("Required parameter missing: 'algorithmName'");if(t!==this.name)throw new Dt(`Algorithm not supported: '${t}'`)}checkCryptoKey(e){let{key:t}=e;if(!("algorithm"in t&&"extractable"in t&&"type"in t&&"usages"in t))throw new TypeError("Object is not a CryptoKey")}checkKeyAlgorithm(e){let{keyAlgorithmName:t}=e;if(t===void 0)throw new TypeError("Required parameter missing: 'keyAlgorithmName'");if(t&&t!==this.name)throw new oe(`Algorithm '${this.name}' does not match the provided '${t}' key.`)}checkKeyType(e){let{keyType:t,allowedKeyType:r}=e;if(t===void 0||r===void 0)throw new TypeError("One or more required parameters missing: 'keyType, allowedKeyType'");if(t&&t!==r)throw new oe(`Requested operation is not valid for the provided '${t}' key.`)}checkKeyUsages(e){let{keyUsages:t,allowedKeyUsages:r}=e;if(!(t&&t.length>0))throw new TypeError("Required parameter missing or empty: 'keyUsages'");let i=Array.isArray(r)?r:[...r.privateKey,...r.publicKey];if(!t.every(o=>i.includes(o)))throw new oe(`Requested operation(s) '${t.join(", ")}' is not valid for the provided key.`)}static create(){return new this}};var ti={};En(ti,{checkRequiredProperty:()=>ve,checkValidProperty:()=>sn,isBytesKeyPair:()=>or,isCryptoKeyPair:()=>Ih,keyToMultibaseId:()=>_o,multibaseIdToKey:()=>Ph,randomBytes:()=>pa,randomUuid:()=>_h});function pu(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var c=n.length,a=n.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var l=0,g=0,x=0,S=p.length;x!==S&&p[x]===0;)x++,l++;for(var m=(S-x)*f+1>>>0,C=new Uint8Array(m);x!==S;){for(var E=p[x],A=0,K=m-1;(E!==0||A<g)&&K!==-1;K--,A++)E+=256*C[K]>>>0,C[K]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");g=A,x++}for(var T=m-g;T!==m&&C[T]===0;)T++;for(var O=a.repeat(l);T<m;++T)O+=n.charAt(C[T]);return O}function y(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var l=0;if(p[l]!==" "){for(var g=0,x=0;p[l]===a;)g++,l++;for(var S=(p.length-l)*u+1>>>0,m=new Uint8Array(S);p[l];){var C=t[p.charCodeAt(l)];if(C===255)return;for(var E=0,A=S-1;(C!==0||E<x)&&A!==-1;A--,E++)C+=c*m[A]>>>0,m[A]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");x=E,l++}if(p[l]!==" "){for(var K=S-x;K!==S&&m[K]===0;)K++;for(var T=new Uint8Array(g+(S-K)),O=g;K!==S;)T[O++]=m[K++];return T}}}function w(p){var l=y(p);if(l)return l;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:w}}var mu=pu,gu=mu,Es=gu;var vd=new Uint8Array(0);var As=(n,e)=>{if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0},fr=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};var xi=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ei=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vs(this,e)}},Ai=class{constructor(e){this.decoders=e}or(e){return vs(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},vs=(n,e)=>new Ai({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}}),vi=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new xi(e,t,r),this.decoder=new Ei(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Bs=({name:n,prefix:e,encode:t,decode:r})=>new vi(n,e,t,r),Bi=({prefix:n,name:e,alphabet:t})=>{let{encode:r,decode:i}=Es(t,e);return Bs({prefix:n,name:e,encode:r,decode:o=>fr(i(o))})},wu=(n,e,t,r)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=n.length;for(;n[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),c=0,a=0,u=0;for(let f=0;f<o;++f){let h=i[n[f]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<t|h,c+=t,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=t||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},xu=(n,e,t)=>{let r=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let a=0;a<n.length;++a)for(c=c<<8|n[a],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),r)for(;o.length*t&7;)o+="=";return o},me=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Bs({prefix:e,name:n,encode(i){return xu(i,r,t)},decode(i){return wu(i,r,t,n)}});var we=Bi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Td=Bi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Od=me({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Id=me({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ze=me({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pd=me({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Cs(n){return n.byteOffset!==0||n.byteLength!==n.buffer.byteLength}function ge(n){let t=Object.prototype.toString.call(n).match(/\s([a-zA-Z0-9]+)/),[r,i]=t;return i}var An=new TextEncoder,Pr=new TextDecoder,z=class{constructor(e,t){this.data=e,this.format=t}static arrayBuffer(e){return new z(e,"ArrayBuffer")}static base58Btc(e){return new z(e,"Base58Btc")}static base64Url(e){return new z(e,"Base64Url")}static bufferSource(e){return new z(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new z(e,"Hex")}static multibase(e){return new z(e,"Multibase")}static object(e){return new z(e,"Object")}static string(e){return new z(e,"String")}static uint8Array(e){return new z(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return we.baseDecode(this.data).buffer;case"Base64Url":return ze.baseDecode(this.data).buffer;case"BufferSource":{if(ge(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Cs(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return we.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return we.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return ze.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return ze.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),t=An.encode(e);return ze.baseEncode(t)}case"String":{let e=An.encode(this.data);return ze.baseEncode(e)}case"Uint8Array":return ze.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toHex(){let e=Array.from({length:256},(t,r)=>r.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let t=this.toUint8Array();return z.uint8Array(t).toHex()}case"Base64Url":{let t=this.toUint8Array();return z.uint8Array(t).toHex()}case"Uint8Array":{let t="";for(let r=0;r<this.data.length;r++)t+=e[this.data[r]];return t}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=ze.baseDecode(this.data),t=Pr.decode(e);return JSON.parse(t)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Pr.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toString(){switch(this.format){case"ArrayBuffer":return Pr.decode(this.data);case"Base64Url":{let e=ze.baseDecode(this.data);return Pr.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Pr.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base58Btc":return we.baseDecode(this.data);case"Base64Url":return ze.baseDecode(this.data);case"BufferSource":{let e=ge(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let t=0;t<this.data.length;t+=2){let r=parseInt(this.data.substring(t,t+2),16);if(isNaN(r))throw new TypeError("Input is not a valid hexadecimal string.");e[t/2]=r}return e}case"Object":{let e=JSON.stringify(this.data);return An.encode(e)}case"String":return An.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}};var it={};En(it,{decode:()=>hr,encodeTo:()=>qt,encodingLength:()=>Wt});var Eu=Ts,ks=128,Au=127,vu=~Au,Bu=Math.pow(2,31);function Ts(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Bu;)e[t++]=n&255|ks,n/=128;for(;n&vu;)e[t++]=n&255|ks,n>>>=7;return e[t]=n|0,Ts.bytes=t-r+1,e}var Cu=Ci,ku=128,Us=127;function Ci(n,r){var t=0,r=r||0,i=0,o=r,s,c=n.length;do{if(o>=c)throw Ci.bytes=0,new RangeError("Could not decode varint");s=n[o++],t+=i<28?(s&Us)<<i:(s&Us)*Math.pow(2,i),i+=7}while(s>=ku);return Ci.bytes=o-r,t}var Uu=Math.pow(2,7),Tu=Math.pow(2,14),Su=Math.pow(2,21),Ku=Math.pow(2,28),Ou=Math.pow(2,35),Iu=Math.pow(2,42),Pu=Math.pow(2,49),_u=Math.pow(2,56),Lu=Math.pow(2,63),Nu=function(n){return n<Uu?1:n<Tu?2:n<Su?3:n<Ku?4:n<Ou?5:n<Iu?6:n<Pu?7:n<_u?8:n<Lu?9:10},Ru={encode:Eu,decode:Cu,encodingLength:Nu},Du=Ru,_r=Du;var hr=(n,e=0)=>[_r.decode(n,e),_r.decode.bytes],qt=(n,e,t=0)=>(_r.encode(n,e,t),e),Wt=n=>_r.encodingLength(n);var ki=(n,e)=>{let t=e.byteLength,r=Wt(n),i=r+Wt(t),o=new Uint8Array(i+t);return qt(n,o,0),qt(t,o,r),o.set(e,i),new lr(n,t,e,o)},Ss=n=>{let e=fr(n),[t,r]=hr(e),[i,o]=hr(e.subarray(r)),s=e.subarray(r+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new lr(t,i,s,e)},Ks=(n,e)=>{if(n===e)return!0;{let t=e;return n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&As(n.bytes,t.bytes)}},lr=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};var Lr=me({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hd=me({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fd=me({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$d=me({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Gd=me({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jd=me({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zd=me({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zd=me({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yd=me({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Os=(n,e)=>{let{bytes:t,version:r}=n;switch(r){case 0:return qu(t,Ti(n),e||we.encoder);default:return Wu(t,Ti(n),e||Lr.encoder)}};var Is=new WeakMap,Ti=n=>{let e=Is.get(n);if(e==null){let t=new Map;return Is.set(n,t),t}return e},ce=class{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Nr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ju)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ce.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=ki(e,t);return ce.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return ce.equals(this,e)}static equals(e,t){let r=t;return r&&e.code===r.code&&e.version===r.version&&Ks(e.multihash,r.multihash)}toString(e){return Os(this,e)}toJSON(){return{"/":Os(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof ce)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:r,code:i,multihash:o,bytes:s}=t;return new ce(r,i,o,s||Ps(r,i,o.bytes))}else if(t[Vu]===!0){let{version:r,multihash:i,code:o}=t,s=Ss(i);return ce.create(r,o,s)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Nr)throw new Error(`Version 0 CID must use dag-pb (code: ${Nr}) block encoding`);return new ce(e,t,r,r.bytes)}case 1:{let i=Ps(e,t,r.bytes);return new ce(e,t,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return ce.create(0,Nr,e)}static createV1(e,t){return ce.create(1,e,t)}static decode(e){let[t,r]=ce.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=ce.inspectBytes(e),r=t.size-t.multihashSize,i=fr(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new lr(t.multihashCode,t.digestSize,o,i);return[t.version===0?ce.createV0(s):ce.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[h,y]=hr(e.subarray(t));return t+=y,h},i=r(),o=Nr;if(i===18?(i=0,t=0):o=r(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,c=r(),a=r(),u=t+a,f=u-s;return{version:i,codec:o,multihashCode:c,digestSize:a,multihashSize:f,size:u}}static parse(e,t){let[r,i]=Mu(e,t),o=ce.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ti(o).set(r,e),o}},Mu=(n,e)=>{switch(n[0]){case"Q":{let t=e||we;return[we.prefix,t.decode(`${we.prefix}${n}`)]}case we.prefix:{let t=e||we;return[we.prefix,t.decode(n)]}case Lr.prefix:{let t=e||Lr;return[Lr.prefix,t.decode(n)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],e.decode(n)]}}},qu=(n,e,t)=>{let{prefix:r}=t;if(r!==we.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(r);if(i==null){let o=t.encode(n).slice(1);return e.set(r,o),o}else return i},Wu=(n,e,t)=>{let{prefix:r}=t,i=e.get(r);if(i==null){let o=t.encode(n);return e.set(r,o),o}else return i},Nr=112,ju=18,Ps=(n,e,t)=>{let r=Wt(n),i=r+Wt(e),o=new Uint8Array(i+t.byteLength);return qt(n,o,0),qt(e,o,r),o.set(t,i),o},Vu=Symbol.for("@ipld/js-cid/CID");var ne=class{static addPrefix(e){var t;let{code:r,data:i,name:o}=e;if(!(o?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(r=ne.codeToName.has(r)?r:ne.nameToCode.get(o),r===void 0)throw new Error(`Unsupported multicodec: ${(t=e.name)!==null&&t!==void 0?t:e.code}`);let s=it.encodingLength(r),c=new Uint8Array(s+i.byteLength);return c.set(i,s),it.encodeTo(r,c),c}static getCodeFromData(e){let{prefixedData:t}=e,[r,i]=it.decode(t);return r}static getCodeFromName(e){let{name:t}=e,r=ne.nameToCode.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static getNameFromCode(e){let{code:t}=e,r=ne.codeToName.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static registerCodec(e){ne.codeToName.set(e.code,e.name),ne.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:t}=e,[r,i]=it.decode(t),o=ne.codeToName.get(r);if(o===void 0)throw new Error(`Unsupported multicodec: ${r}`);return{code:r,data:t.slice(i),name:o}}};ne.codeToName=new Map;ne.nameToCode=new Map;ne.registerCodec({code:237,name:"ed25519-pub"});ne.registerCodec({code:4864,name:"ed25519-priv"});ne.registerCodec({code:236,name:"x25519-pub"});ne.registerCodec({code:4866,name:"x25519-priv"});ne.registerCodec({code:231,name:"secp256k1-pub"});ne.registerCodec({code:4865,name:"secp256k1-priv"});function Si(n){Object.keys(n).forEach(e=>{n[e]===void 0?delete n[e]:typeof n[e]=="object"&&Si(n[e])})}var Sh=du(da(),1);var Ae=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Io=n=>n instanceof Uint8Array;var ei=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),He=(n,e)=>n<<32-e|n>>>e,Kh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Kh)throw new Error("Non little-endian hardware is not supported");var Oh=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ya(n){if(!Io(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Oh[n[t]];return e}function Po(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function on(n){if(typeof n=="string"&&(n=Po(n)),!Io(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function ir(...n){let e=new Uint8Array(n.reduce((r,i)=>r+i.length,0)),t=0;return n.forEach(r=>{if(!Io(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}var Tr=class{clone(){return this._cloneInto()}};function Tt(n){let e=r=>n().update(on(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function St(n=32){if(Ae&&typeof Ae.getRandomValues=="function")return Ae.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function ve(n){if(!n||n.property===void 0||n.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:t}=n;if(!(e in t))throw new TypeError(`Required parameter missing: '${e}'`)}function sn(n){if(!n||n.property===void 0||n.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:t}=n;if(Array.isArray(t)&&!t.includes(e)||t instanceof Set&&!t.has(e)||t instanceof Map&&!t.has(e)){let r=Array.from(t instanceof Map?t.keys():t).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${r}'`)}}function or(n){return!!(n&&"privateKey"in n&&"publicKey"in n&&ge(n.privateKey)==="Uint8Array"&&ge(n.publicKey)==="Uint8Array")}function Ih(n){return n&&"privateKey"in n&&"publicKey"in n}function _o(n){let{key:e,multicodecCode:t,multicodecName:r}=n,i=ne.addPrefix({code:t,data:e,name:r}),o=z.uint8Array(i).toBase58Btc();return z.base58Btc(o).toMultibase()}function Ph(n){let{multibaseKeyId:e}=n,t=z.multibase(e).toBase58Btc(),r=z.base58Btc(t).toUint8Array(),{code:i,data:o,name:s}=ne.removePrefix({prefixedData:r});return{key:o,multicodecCode:i,multicodecName:s}}function pa(n){return St(n)}function _h(){let n=pa(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;let e=ya(n);n.fill(0);let t=[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)],r=t.join("-");return t.fill("0"),r}var dt=class extends Mt{checkGenerateKey(e){let{algorithm:t,keyUsages:r}=e;this.checkAlgorithmName({algorithmName:t.name}),ve({property:"namedCurve",inObject:t}),sn({property:t.namedCurve,allowedProperties:this.namedCurves}),this.checkKeyUsages({keyUsages:r,allowedKeyUsages:this.keyUsages})}async decrypt(){throw new oe(`Requested operation 'decrypt' is not valid for ${this.name} keys.`)}async encrypt(){throw new oe(`Requested operation 'encrypt' is not valid for ${this.name} keys.`)}};var cn=class extends dt{constructor(){super(...arguments);this.name="ECDH";this.keyUsages={privateKey:["deriveBits","deriveKey"],publicKey:["deriveBits","deriveKey"]}}checkAlgorithmOptions(t){let{algorithm:r,baseKey:i}=t;if(this.checkAlgorithmName({algorithmName:r.name}),ve({property:"publicKey",inObject:r}),this.checkCryptoKey({key:r.publicKey}),this.checkKeyType({keyType:r.publicKey.type,allowedKeyType:"public"}),this.checkKeyAlgorithm({keyAlgorithmName:r.publicKey.algorithm.name}),ve({property:"baseKey",inObject:t}),this.checkCryptoKey({key:i}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),"namedCurve"in r.publicKey.algorithm&&"namedCurve"in i.algorithm&&r.publicKey.algorithm.namedCurve!==i.algorithm.namedCurve)throw new oe("The named curve of the publicKey and baseKey must match.")}async sign(){throw new oe(`Requested operation 'sign' is not valid for ${this.name} keys.`)}async verify(){throw new oe(`Requested operation 'verify' is not valid for ${this.name} keys.`)}};var an=class extends dt{constructor(){super(...arguments);this.name="ECDSA";this.keyUsages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmOptions(t){let{algorithm:r}=t;this.checkAlgorithmName({algorithmName:r.name}),ve({property:"hash",inObject:r}),sn({property:r.hash,allowedProperties:this.hashAlgorithms})}async deriveBits(){throw new oe(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}};var un=class extends dt{constructor(){super(...arguments);this.name="EdDSA";this.keyUsages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmOptions(t){let{algorithm:r}=t;this.checkAlgorithmName({algorithmName:r.name})}async deriveBits(){throw new oe(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}};var fn=class extends Mt{checkGenerateKey(e){let{algorithm:t,keyUsages:r}=e;if(this.checkAlgorithmName({algorithmName:t.name}),ve({property:"length",inObject:t}),ge(t.length)!=="Number")throw new TypeError("Algorithm 'length' is not of type: Number.");if(![128,192,256].includes(t.length))throw new qe("Algorithm 'length' must be 128, 192, or 256.");this.checkKeyUsages({keyUsages:r,allowedKeyUsages:this.keyUsages})}async deriveBits(){throw new oe(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}async sign(){throw new oe(`Requested operation 'sign' is not valid for ${this.name} keys.`)}async verify(){throw new oe(`Requested operation 'verify' is not valid for ${this.name} keys.`)}};var hn=class extends fn{constructor(){super(...arguments);this.name="AES-CTR";this.keyUsages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmOptions(t){let{algorithm:r,key:i}=t;if(this.checkAlgorithmName({algorithmName:r.name}),ve({property:"counter",inObject:r}),ge(r.counter)!=="Uint8Array")throw new TypeError("Algorithm 'counter' is not of type: Uint8Array.");if(r.counter.byteLength!==16)throw new qe("Algorithm 'counter' must have length: 16 bytes.");if(ve({property:"length",inObject:r}),ge(r.length)!=="Number")throw new TypeError("Algorithm 'length' is not of type: Number.");if(r.length<1||r.length>128)throw new qe("Algorithm 'length' should be in the range: 1 to 128.");ve({property:"key",inObject:t}),this.checkCryptoKey({key:i}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"secret"})}};var le=class{constructor(e,t,r,i,o){this.algorithm=e,this.extractable=t,this.material=r,this.type=i,this.usages=o,Object.defineProperties(this,{type:{enumerable:!0,writable:!1,value:i},extractable:{enumerable:!0,writable:!0,value:t},algorithm:{enumerable:!0,writable:!1,value:e},usages:{enumerable:!0,writable:!0,value:o},material:{enumerable:!1,writable:!1,value:r}})}};function Lo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Lh(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function ma(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Nh(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Lo(n.outputLen),Lo(n.blockLen)}function Rh(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Dh(n,e){ma(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Mh={number:Lo,bool:Lh,bytes:ma,hash:Nh,exists:Rh,output:Dh},yt=Mh;function qh(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),c=Number(t&o),a=r?4:0,u=r?0:4;n.setUint32(e+a,s,r),n.setUint32(e+u,c,r)}var Sr=class extends Tr{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ei(this.buffer)}update(e){yt.exists(this);let{view:t,buffer:r,blockLen:i}=this;e=on(e);let o=e.length;for(let s=0;s<o;){let c=Math.min(i-this.pos,o-s);if(c===i){let a=ei(e);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(e.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yt.exists(this),yt.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:o}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let h=s;h<i;h++)t[h]=0;qh(r,i-8,BigInt(this.length*8),o),this.process(r,0);let c=ei(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)c.setUint32(4*h,f[h],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return e.length=i,e.pos=c,e.finished=o,e.destroyed=s,i%t&&e.buffer.set(r),e}};var ri=BigInt(4294967295),No=BigInt(32);function ga(n,e=!1){return e?{h:Number(n&ri),l:Number(n>>No&ri)}:{h:Number(n>>No&ri)|0,l:Number(n&ri)|0}}function Wh(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){let{h:o,l:s}=ga(n[i],e);[t[i],r[i]]=[o,s]}return[t,r]}var jh=(n,e)=>BigInt(n>>>0)<<No|BigInt(e>>>0),Vh=(n,e,t)=>n>>>t,Hh=(n,e,t)=>n<<32-t|e>>>t,Fh=(n,e,t)=>n>>>t|e<<32-t,$h=(n,e,t)=>n<<32-t|e>>>t,Gh=(n,e,t)=>n<<64-t|e>>>t-32,Jh=(n,e,t)=>n>>>t-32|e<<64-t,zh=(n,e)=>e,Zh=(n,e)=>n,Yh=(n,e,t)=>n<<t|e>>>32-t,Xh=(n,e,t)=>e<<t|n>>>32-t,Qh=(n,e,t)=>e<<t-32|n>>>64-t,el=(n,e,t)=>n<<t-32|e>>>64-t;function tl(n,e,t,r){let i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}var rl=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),nl=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,il=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),ol=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,sl=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),cl=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,al={fromBig:ga,split:Wh,toBig:jh,shrSH:Vh,shrSL:Hh,rotrSH:Fh,rotrSL:$h,rotrBH:Gh,rotrBL:Jh,rotr32H:zh,rotr32L:Zh,rotlSH:Yh,rotlSL:Xh,rotlBH:Qh,rotlBL:el,add:tl,add3L:rl,add3H:nl,add4L:il,add4H:ol,add5H:cl,add5L:sl},H=al;var[ul,fl]=H.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Kt=new Uint32Array(80),Ot=new Uint32Array(80),Kr=class extends Sr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:h,Fl:y,Gh:w,Gl:p,Hh:l,Hl:g}=this;return[e,t,r,i,o,s,c,a,u,f,h,y,w,p,l,g]}set(e,t,r,i,o,s,c,a,u,f,h,y,w,p,l,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=y|0,this.Gh=w|0,this.Gl=p|0,this.Hh=l|0,this.Hl=g|0}process(e,t){for(let m=0;m<16;m++,t+=4)Kt[m]=e.getUint32(t),Ot[m]=e.getUint32(t+=4);for(let m=16;m<80;m++){let C=Kt[m-15]|0,E=Ot[m-15]|0,A=H.rotrSH(C,E,1)^H.rotrSH(C,E,8)^H.shrSH(C,E,7),K=H.rotrSL(C,E,1)^H.rotrSL(C,E,8)^H.shrSL(C,E,7),T=Kt[m-2]|0,O=Ot[m-2]|0,L=H.rotrSH(T,O,19)^H.rotrBH(T,O,61)^H.shrSH(T,O,6),P=H.rotrSL(T,O,19)^H.rotrBL(T,O,61)^H.shrSL(T,O,6),M=H.add4L(K,P,Ot[m-7],Ot[m-16]),R=H.add4H(M,A,L,Kt[m-7],Kt[m-16]);Kt[m]=R|0,Ot[m]=M|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:h,El:y,Fh:w,Fl:p,Gh:l,Gl:g,Hh:x,Hl:S}=this;for(let m=0;m<80;m++){let C=H.rotrSH(h,y,14)^H.rotrSH(h,y,18)^H.rotrBH(h,y,41),E=H.rotrSL(h,y,14)^H.rotrSL(h,y,18)^H.rotrBL(h,y,41),A=h&w^~h&l,K=y&p^~y&g,T=H.add5L(S,E,K,fl[m],Ot[m]),O=H.add5H(T,x,C,A,ul[m],Kt[m]),L=T|0,P=H.rotrSH(r,i,28)^H.rotrBH(r,i,34)^H.rotrBH(r,i,39),M=H.rotrSL(r,i,28)^H.rotrBL(r,i,34)^H.rotrBL(r,i,39),R=r&o^r&c^o&c,$=i&s^i&a^s&a;x=l|0,S=g|0,l=w|0,g=p|0,w=h|0,p=y|0,{h,l:y}=H.add(u|0,f|0,O|0,L|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;let v=H.add3L(L,M,$);r=H.add3H(v,O,P,R),i=v|0}({h:r,l:i}=H.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=H.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=H.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=H.add(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:y}=H.add(this.Eh|0,this.El|0,h|0,y|0),{h:w,l:p}=H.add(this.Fh|0,this.Fl|0,w|0,p|0),{h:l,l:g}=H.add(this.Gh|0,this.Gl|0,l|0,g|0),{h:x,l:S}=H.add(this.Hh|0,this.Hl|0,x|0,S|0),this.set(r,i,o,s,c,a,u,f,h,y,w,p,l,g,x,S)}roundClean(){Kt.fill(0),Ot.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Ro=class extends Kr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Do=class extends Kr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Mo=class extends Kr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},qo=Tt(()=>new Kr),Yp=Tt(()=>new Ro),Xp=Tt(()=>new Do),Qp=Tt(()=>new Mo);var oi={};En(oi,{bitGet:()=>pl,bitLen:()=>yl,bitMask:()=>ln,bitSet:()=>ml,bytesToHex:()=>tt,bytesToNumberBE:()=>Fe,bytesToNumberLE:()=>_e,concatBytes:()=>$e,createHmacDrbg:()=>Vo,ensureBytes:()=>ee,equalBytes:()=>Ea,hexToBytes:()=>sr,hexToNumber:()=>jo,numberToBytesBE:()=>Le,numberToBytesLE:()=>pt,numberToHexUnpadded:()=>xa,numberToVarBytesBE:()=>dl,utf8ToBytes:()=>Aa,validateObject:()=>Se});var wa=BigInt(0),ni=BigInt(1),hl=BigInt(2),ii=n=>n instanceof Uint8Array,ll=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function tt(n){if(!ii(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=ll[n[t]];return e}function xa(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function jo(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function sr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){let i=r*2,o=n.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Fe(n){return jo(tt(n))}function _e(n){if(!ii(n))throw new Error("Uint8Array expected");return jo(tt(Uint8Array.from(n).reverse()))}function Le(n,e){return sr(n.toString(16).padStart(e*2,"0"))}function pt(n,e){return Le(n,e).reverse()}function dl(n){return sr(xa(n))}function ee(n,e,t){let r;if(typeof e=="string")try{r=sr(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(ii(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function $e(...n){let e=new Uint8Array(n.reduce((r,i)=>r+i.length,0)),t=0;return n.forEach(r=>{if(!ii(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function Ea(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Aa(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function yl(n){let e;for(e=0;n>wa;n>>=ni,e+=1);return e}function pl(n,e){return n>>BigInt(e)&ni}var ml=(n,e,t)=>n|(t?ni:wa)<<BigInt(e),ln=n=>(hl<<BigInt(n-1))-ni,Wo=n=>new Uint8Array(n),ba=n=>Uint8Array.from(n);function Vo(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Wo(n),i=Wo(n),o=0,s=()=>{r.fill(1),i.fill(0),o=0},c=(...h)=>t(i,r,...h),a=(h=Wo())=>{i=c(ba([0]),h),r=c(),h.length!==0&&(i=c(ba([1]),h),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,y=[];for(;h<e;){r=c();let w=r.slice();y.push(w),h+=r.length}return $e(...y)};return(h,y)=>{s(),a(h);let w;for(;!(w=y(u()));)a();return s(),w}}var gl={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Se(n,e,t={}){let r=(i,o,s)=>{let c=gl[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);let a=n[i];if(!(s&&a===void 0)&&!c(a,n))throw new Error(`Invalid param ${String(i)}=${a} (${typeof a}), expected ${o}`)};for(let[i,o]of Object.entries(e))r(i,o,!1);for(let[i,o]of Object.entries(t))r(i,o,!0);return n}var ae=BigInt(0),ie=BigInt(1),cr=BigInt(2),bl=BigInt(3),Ho=BigInt(4),va=BigInt(5),Ba=BigInt(8),wl=BigInt(9),xl=BigInt(16);function Y(n,e){let t=n%e;return t>=ae?t:e+t}function Fo(n,e,t){if(t<=ae||e<ae)throw new Error("Expected power/modulo > 0");if(t===ie)return ae;let r=ie;for(;e>ae;)e&ie&&(r=r*n%t),n=n*n%t,e>>=ie;return r}function re(n,e,t){let r=n;for(;e-- >ae;)r*=r,r%=t;return r}function si(n,e){if(n===ae||e<=ae)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Y(n,e),r=e,i=ae,o=ie,s=ie,c=ae;for(;t!==ae;){let u=r/t,f=r%t,h=i-s*u,y=o-c*u;r=t,t=f,i=s,o=c,s=h,c=y}if(r!==ie)throw new Error("invert: does not exist");return Y(i,e)}function El(n){let e=(n-ie)/cr,t,r,i;for(t=n-ie,r=0;t%cr===ae;t/=cr,r++);for(i=cr;i<n&&Fo(i,e,n)!==n-ie;i++);if(r===1){let s=(n+ie)/Ho;return function(a,u){let f=a.pow(u,s);if(!a.eql(a.sqr(f),u))throw new Error("Cannot find square root");return f}}let o=(t+ie)/cr;return function(c,a){if(c.pow(a,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let u=r,f=c.pow(c.mul(c.ONE,i),t),h=c.pow(a,o),y=c.pow(a,t);for(;!c.eql(y,c.ONE);){if(c.eql(y,c.ZERO))return c.ZERO;let w=1;for(let l=c.sqr(y);w<u&&!c.eql(l,c.ONE);w++)l=c.sqr(l);let p=c.pow(f,ie<<BigInt(u-w-1));f=c.sqr(p),h=c.mul(h,p),y=c.mul(y,f),u=w}return h}}function Al(n){if(n%Ho===bl){let e=(n+ie)/Ho;return function(r,i){let o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(n%Ba===va){let e=(n-va)/Ba;return function(r,i){let o=r.mul(i,cr),s=r.pow(o,e),c=r.mul(i,s),a=r.mul(r.mul(c,cr),s),u=r.mul(c,r.sub(a,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return n%xl,El(n)}var Ca=(n,e)=>(Y(n,e)&ie)===ie,vl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $o(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=vl.reduce((r,i)=>(r[i]="function",r),e);return Se(n,t)}function Bl(n,e,t){if(t<ae)throw new Error("Expected power > 0");if(t===ae)return n.ONE;if(t===ie)return e;let r=n.ONE,i=e;for(;t>ae;)t&ie&&(r=n.mul(r,i)),i=n.sqr(i),t>>=ie;return r}function Cl(n,e){let t=new Array(e.length),r=e.reduce((o,s,c)=>n.is0(s)?o:(t[c]=o,n.mul(o,s)),n.ONE),i=n.inv(r);return e.reduceRight((o,s,c)=>n.is0(s)?o:(t[c]=n.mul(o,t[c]),n.mul(o,s)),i),t}function ci(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ai(n,e,t=!1,r={}){if(n<=ae)throw new Error(`Expected Fp ORDER > 0, got ${n}`);let{nBitLength:i,nByteLength:o}=ci(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Al(n),c=Object.freeze({ORDER:n,BITS:i,BYTES:o,MASK:ln(i),ZERO:ae,ONE:ie,create:a=>Y(a,n),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ae<=a&&a<n},is0:a=>a===ae,isOdd:a=>(a&ie)===ie,neg:a=>Y(-a,n),eql:(a,u)=>a===u,sqr:a=>Y(a*a,n),add:(a,u)=>Y(a+u,n),sub:(a,u)=>Y(a-u,n),mul:(a,u)=>Y(a*u,n),pow:(a,u)=>Bl(c,a,u),div:(a,u)=>Y(a*si(u,n),n),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>si(a,n),sqrt:r.sqrt||(a=>s(c,a)),invertBatch:a=>Cl(c,a),cmov:(a,u,f)=>f?u:a,toBytes:a=>t?pt(a,o):Le(a,o),fromBytes:a=>{if(a.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${a.length}`);return t?_e(a):Fe(a)}});return Object.freeze(c)}function ka(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function Ua(n,e,t=!1){n=ee("privateHash",n);let r=n.length,i=ci(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);let o=t?_e(n):Fe(n);return Y(o,e-ie)+ie}var Ul=BigInt(0),Go=BigInt(1);function ui(n,e){let t=(i,o)=>{let s=o.negate();return i?s:o},r=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:t,unsafeLadder(i,o){let s=n.ZERO,c=i;for(;o>Ul;)o&Go&&(s=s.add(c)),c=c.double(),o>>=Go;return s},precomputeWindow(i,o){let{windows:s,windowSize:c}=r(o),a=[],u=i,f=u;for(let h=0;h<s;h++){f=u,a.push(f);for(let y=1;y<c;y++)f=f.add(u),a.push(f);u=f.double()}return a},wNAF(i,o,s){let{windows:c,windowSize:a}=r(i),u=n.ZERO,f=n.BASE,h=BigInt(2**i-1),y=2**i,w=BigInt(i);for(let p=0;p<c;p++){let l=p*a,g=Number(s&h);s>>=w,g>a&&(g-=y,s+=Go);let x=l,S=l+Math.abs(g)-1,m=p%2!==0,C=g<0;g===0?f=f.add(t(m,o[x])):u=u.add(t(C,o[S]))}return{p:u,f}},wNAFCached(i,o,s,c){let a=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,a),a!==1&&o.set(i,c(u))),this.wNAF(a,u,s)}}}function dn(n){return $o(n.Fp),Se(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ci(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}var Ge=BigInt(0),Ke=BigInt(1),fi=BigInt(2),Tl=BigInt(8),Sl={zip215:!0};function Kl(n){let e=dn(n);return Se(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function hi(n){let e=Kl(n),{Fp:t,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=e,u=fi<<BigInt(c*8)-Ke,f=t.create,h=e.uvRatio||((B,d)=>{try{return{isValid:!0,value:t.sqrt(B*t.inv(d))}}catch{return{isValid:!1,value:Ge}}}),y=e.adjustScalarBytes||(B=>B),w=e.domain||((B,d,U)=>{if(d.length||U)throw new Error("Contexts/pre-hash are not supported");return B}),p=B=>typeof B=="bigint"&&Ge<B,l=(B,d)=>p(B)&&p(d)&&B<d,g=B=>B===Ge||l(B,u);function x(B,d){if(l(B,d))return B;throw new Error(`Expected valid scalar < ${d}, got ${typeof B} ${B}`)}function S(B){return B===Ge?B:x(B,r)}let m=new Map;function C(B){if(!(B instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(d,U,I,_){if(this.ex=d,this.ey=U,this.ez=I,this.et=_,!g(d))throw new Error("x required");if(!g(U))throw new Error("y required");if(!g(I))throw new Error("z required");if(!g(_))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(d){if(d instanceof E)throw new Error("extended point not allowed");let{x:U,y:I}=d||{};if(!g(U)||!g(I))throw new Error("invalid affine point");return new E(U,I,Ke,f(U*I))}static normalizeZ(d){let U=t.invertBatch(d.map(I=>I.ez));return d.map((I,_)=>I.toAffine(U[_])).map(E.fromAffine)}_setWindowSize(d){this._WINDOW_SIZE=d,m.delete(this)}assertValidity(){let{a:d,d:U}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:I,ey:_,ez:q,et:W}=this,G=f(I*I),j=f(_*_),V=f(q*q),te=f(V*V),X=f(G*d),fe=f(V*f(X+j)),he=f(te+f(U*f(G*j)));if(fe!==he)throw new Error("bad point: equation left != right (1)");let se=f(I*_),ye=f(q*W);if(se!==ye)throw new Error("bad point: equation left != right (2)")}equals(d){C(d);let{ex:U,ey:I,ez:_}=this,{ex:q,ey:W,ez:G}=d,j=f(U*G),V=f(q*_),te=f(I*G),X=f(W*_);return j===V&&te===X}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:d}=e,{ex:U,ey:I,ez:_}=this,q=f(U*U),W=f(I*I),G=f(fi*f(_*_)),j=f(d*q),V=U+I,te=f(f(V*V)-q-W),X=j+W,fe=X-G,he=j-W,se=f(te*fe),ye=f(X*he),nt=f(te*he),Rt=f(fe*X);return new E(se,ye,Rt,nt)}add(d){C(d);let{a:U,d:I}=e,{ex:_,ey:q,ez:W,et:G}=this,{ex:j,ey:V,ez:te,et:X}=d;if(U===BigInt(-1)){let ds=f((q-_)*(V+j)),ys=f((q+_)*(V-j)),gi=f(ys-ds);if(gi===Ge)return this.double();let ps=f(W*fi*X),ms=f(G*fi*te),gs=ms+ps,bs=ys+ds,ws=ms-ps,iu=f(gs*gi),ou=f(bs*ws),su=f(gs*ws),cu=f(gi*bs);return new E(iu,ou,cu,su)}let fe=f(_*j),he=f(q*V),se=f(G*I*X),ye=f(W*te),nt=f((_+q)*(j+V)-fe-he),Rt=ye-se,Ir=ye+se,ls=f(he-U*fe),eu=f(nt*Rt),tu=f(Ir*ls),ru=f(nt*ls),nu=f(Rt*Ir);return new E(eu,tu,nu,ru)}subtract(d){return this.add(d.negate())}wNAF(d){return T.wNAFCached(this,m,d,E.normalizeZ)}multiply(d){let{p:U,f:I}=this.wNAF(x(d,r));return E.normalizeZ([U,I])[0]}multiplyUnsafe(d){let U=S(d);return U===Ge?K:this.equals(K)||U===Ke?this:this.equals(A)?this.wNAF(U).p:T.unsafeLadder(this,U)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(d){let{ex:U,ey:I,ez:_}=this,q=this.is0();d==null&&(d=q?Tl:t.inv(_));let W=f(U*d),G=f(I*d),j=f(_*d);if(q)return{x:Ge,y:Ke};if(j!==Ke)throw new Error("invZ was invalid");return{x:W,y:G}}clearCofactor(){let{h:d}=e;return d===Ke?this:this.multiplyUnsafe(d)}static fromHex(d,U=!1){let{d:I,a:_}=e,q=t.BYTES;d=ee("pointHex",d,q);let W=d.slice(),G=d[q-1];W[q-1]=G&-129;let j=_e(W);j===Ge||(U?x(j,u):x(j,t.ORDER));let V=f(j*j),te=f(V-Ke),X=f(I*V-_),{isValid:fe,value:he}=h(te,X);if(!fe)throw new Error("Point.fromHex: invalid y coordinate");let se=(he&Ke)===Ke,ye=(G&128)!==0;if(!U&&he===Ge&&ye)throw new Error("Point.fromHex: x=0 and x_0=1");return ye!==se&&(he=f(-he)),E.fromAffine({x:he,y:j})}static fromPrivateKey(d){return P(d).point}toRawBytes(){let{x:d,y:U}=this.toAffine(),I=pt(U,t.BYTES);return I[I.length-1]|=d&Ke?128:0,I}toHex(){return tt(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Ke,f(e.Gx*e.Gy)),E.ZERO=new E(Ge,Ke,Ke,Ge);let{BASE:A,ZERO:K}=E,T=ui(E,c*8);function O(B){return Y(B,r)}function L(B){return O(_e(B))}function P(B){let d=c;B=ee("private key",B,d);let U=ee("hashed private key",o(B),2*d),I=y(U.slice(0,d)),_=U.slice(d,2*d),q=L(I),W=A.multiply(q),G=W.toRawBytes();return{head:I,prefix:_,scalar:q,point:W,pointBytes:G}}function M(B){return P(B).pointBytes}function R(B=new Uint8Array,...d){let U=$e(...d);return L(o(w(U,ee("context",B),!!i)))}function $(B,d,U={}){B=ee("message",B),i&&(B=i(B));let{prefix:I,scalar:_,pointBytes:q}=P(d),W=R(U.context,I,B),G=A.multiply(W).toRawBytes(),j=R(U.context,G,q,B),V=O(W+j*_);S(V);let te=$e(G,pt(V,t.BYTES));return ee("result",te,c*2)}let v=Sl;function k(B,d,U,I=v){let{context:_,zip215:q}=I,W=t.BYTES;B=ee("signature",B,2*W),d=ee("message",d),i&&(d=i(d));let G=_e(B.slice(W,2*W)),j,V,te;try{j=E.fromHex(U,q),V=E.fromHex(B.slice(0,W),q),te=A.multiplyUnsafe(G)}catch{return!1}if(!q&&j.isSmallOrder())return!1;let X=R(_,V.toRawBytes(),j.toRawBytes(),d);return V.add(j.multiplyUnsafe(X)).subtract(te).clearCofactor().equals(E.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:$,verify:k,ExtendedPoint:E,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>s(t.BYTES),precompute(B=8,d=E.BASE){return d._setWindowSize(B),d.multiply(BigInt(3)),d}}}}var yn=BigInt(0),Jo=BigInt(1);function Ol(n){return Se(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function Ta(n){let e=Ol(n),{P:t}=e,r=m=>Y(m,t),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,c=e.adjustScalarBytes||(m=>m),a=e.powPminus2||(m=>Fo(m,t-BigInt(2),t));function u(m,C,E){let A=r(m*(C-E));return C=r(C-A),E=r(E+A),[C,E]}function f(m){if(typeof m=="bigint"&&yn<=m&&m<t)return m;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let h=(e.a-BigInt(2))/BigInt(4);function y(m,C){let E=f(m),A=f(C),K=E,T=Jo,O=yn,L=E,P=Jo,M=yn,R;for(let v=BigInt(i-1);v>=yn;v--){let k=A>>v&Jo;M^=k,R=u(M,T,L),T=R[0],L=R[1],R=u(M,O,P),O=R[0],P=R[1],M=k;let N=T+O,B=r(N*N),d=T-O,U=r(d*d),I=B-U,_=L+P,q=L-P,W=r(q*N),G=r(_*d),j=W+G,V=W-G;L=r(j*j),P=r(K*r(V*V)),T=r(B*U),O=r(I*(B+r(h*I)))}R=u(M,T,L),T=R[0],L=R[1],R=u(M,O,P),O=R[0],P=R[1];let $=a(O);return r(T*$)}function w(m){return pt(r(m),o)}function p(m){let C=ee("u coordinate",m,o);return s===o&&(C[s-1]&=127),_e(C)}function l(m){let C=ee("scalar",m);if(C.length!==o&&C.length!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${C.length}`);return _e(c(C))}function g(m,C){let E=p(C),A=l(m),K=y(E,A);if(K===yn)throw new Error("Invalid private or public key received");return w(K)}let x=w(e.Gu);function S(m){return g(m,x)}return{scalarMult:g,scalarMultBase:S,getSharedSecret:(m,C)=>g(m,C),getPublicKey:m=>S(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:x}}var pn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Sa=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),v0=BigInt(0),Pl=BigInt(1),zo=BigInt(2),_l=BigInt(5),Ka=BigInt(10),Ll=BigInt(20),Nl=BigInt(40),Oa=BigInt(80);function Ia(n){let e=pn,r=n*n%e*n%e,i=re(r,zo,e)*r%e,o=re(i,Pl,e)*n%e,s=re(o,_l,e)*o%e,c=re(s,Ka,e)*s%e,a=re(c,Ll,e)*c%e,u=re(a,Nl,e)*a%e,f=re(u,Oa,e)*u%e,h=re(f,Oa,e)*u%e,y=re(h,Ka,e)*s%e;return{pow_p_5_8:re(y,zo,e)*n%e,b2:r}}function Pa(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Rl(n,e){let t=pn,r=Y(e*e*e,t),i=Y(r*r*e,t),o=Ia(n*i).pow_p_5_8,s=Y(n*r*o,t),c=Y(e*s*s,t),a=s,u=Y(s*Sa,t),f=c===n,h=c===Y(-n,t),y=c===Y(-n*Sa,t);return f&&(s=a),(h||y)&&(s=u),Ca(s,t)&&(s=Y(-s,t)),{isValid:f||h,value:s}}var Ne=ai(pn,void 0,!0),mn={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ne,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:qo,randomBytes:St,adjustScalarBytes:Pa,uvRatio:Rl},It=hi(mn);function _a(n,e,t){if(e.length>255)throw new Error("Context is too big");return ir(Po("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}var B0=hi({...mn,domain:_a}),C0=hi({...mn,domain:_a,prehash:qo}),gn=(()=>Ta({P:pn,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{let e=pn,{pow_p_5_8:t,b2:r}=Ia(n);return Y(re(t,BigInt(3),e)*r,e)},adjustScalarBytes:Pa,randomBytes:St}))();function La(n){let{y:e}=It.ExtendedPoint.fromHex(n),t=BigInt(1);return Ne.toBytes(Ne.create((t+e)*Ne.inv(t-e)))}function Na(n){let e=mn.hash(n.subarray(0,32));return mn.adjustScalarBytes(e).subarray(0,32)}var Dl=(Ne.ORDER+BigInt(3))/BigInt(8),k0=Ne.pow(zo,Dl),U0=Ne.sqrt(Ne.neg(Ne.ONE)),T0=(Ne.ORDER-BigInt(5))/BigInt(8),S0=BigInt(486662);var K0=ka(Ne,Ne.neg(BigInt(486664)));var O0=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),I0=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),P0=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),_0=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var L0=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Pt=class{static async generateKeyPair(){let e=gn.utils.randomPrivateKey(),t=gn.getPublicKey(e);return{privateKey:e,publicKey:t}}static async getPublicKey(e){let{privateKey:t}=e;return gn.getPublicKey(t)}static async sharedSecret(e){let{privateKey:t,publicKey:r}=e;return gn.getSharedSecret(t,r)}static async validatePublicKey(e){throw new Error("Not implemented: 'validatePublicKey()'")}};var ar=class{static async decrypt(e){let{counter:t,data:r,key:i,length:o}=e,s=await this.importKey(i),c=await Ae.subtle.decrypt({name:"AES-CTR",counter:t,length:o},s,r);return new Uint8Array(c)}static async encrypt(e){let{counter:t,data:r,key:i,length:o}=e,s=await this.importKey(i),c=await Ae.subtle.encrypt({name:"AES-CTR",counter:t,length:o},s,r);return new Uint8Array(c)}static async generateKey(e){let{length:t}=e,r=t/8;return Ae.getRandomValues(new Uint8Array(r))}static async importKey(e){return Ae.subtle.importKey("raw",e.buffer,{name:"AES-CTR",length:e.byteLength*8},!0,["encrypt","decrypt"])}};var Zo=class{static async decrypt(e){let{additionalData:t,data:r,iv:i,key:o,tagLength:s}=e,c=await this.importKey(o),a=t===void 0?{name:"AES-GCM",iv:i,tagLength:s}:{name:"AES-GCM",additionalData:t,iv:i,tagLength:s},u=await Ae.subtle.decrypt(a,c,r);return new Uint8Array(u)}static async encrypt(e){let{additionalData:t,data:r,iv:i,key:o,tagLength:s}=e,c=await this.importKey(o),a=t===void 0?{name:"AES-GCM",iv:i,tagLength:s}:{name:"AES-GCM",additionalData:t,iv:i,tagLength:s},u=await Ae.subtle.encrypt(a,c,r);return new Uint8Array(u)}static async generateKey(e){let{length:t}=e,r=t/8;return Ae.getRandomValues(new Uint8Array(r))}static async importKey(e){return Ae.subtle.importKey("raw",e.buffer,{name:"AES-GCM",length:e.byteLength*8},!0,["encrypt","decrypt"])}};var Je=class{static async convertPrivateKeyToX25519(e){let{privateKey:t}=e;return Na(t)}static async convertPublicKeyToX25519(e){let{publicKey:t}=e;if(!await Je.validatePublicKey({key:t}))throw new Error("Ed25519: Invalid public key.");return La(t)}static async generateKeyPair(){let e=It.utils.randomPrivateKey(),t=It.getPublicKey(e);return{privateKey:e,publicKey:t}}static async getPublicKey(e){let{privateKey:t}=e;return It.getPublicKey(t)}static async sign(e){let{key:t,data:r}=e;return It.sign(r,t)}static async validatePublicKey(e){let{key:t}=e;try{It.ExtendedPoint.fromHex(t).assertValidity()}catch{return!1}return!0}static async verify(e){let{key:t,signature:r,data:i}=e;return It.verify(r,i,t)}};var Ml=(n,e,t)=>n&e^~n&t,ql=(n,e,t)=>n&e^n&t^e&t,Wl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_t=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lt=new Uint32Array(64),li=class extends Sr{constructor(){super(64,32,8,!1),this.A=_t[0]|0,this.B=_t[1]|0,this.C=_t[2]|0,this.D=_t[3]|0,this.E=_t[4]|0,this.F=_t[5]|0,this.G=_t[6]|0,this.H=_t[7]|0}get(){let{A:e,B:t,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[e,t,r,i,o,s,c,a]}set(e,t,r,i,o,s,c,a){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(e,t){for(let h=0;h<16;h++,t+=4)Lt[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){let y=Lt[h-15],w=Lt[h-2],p=He(y,7)^He(y,18)^y>>>3,l=He(w,17)^He(w,19)^w>>>10;Lt[h]=l+Lt[h-7]+p+Lt[h-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:u,H:f}=this;for(let h=0;h<64;h++){let y=He(c,6)^He(c,11)^He(c,25),w=f+y+Ml(c,a,u)+Wl[h]+Lt[h]|0,l=(He(r,2)^He(r,13)^He(r,22))+ql(r,i,o)|0;f=u,u=a,a=c,c=s+w|0,s=o,o=i,i=r,r=w+l|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,i,o,s,c,a,u,f)}roundClean(){Lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Yo=class extends li{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Nt=Tt(()=>new li),G0=Tt(()=>new Yo);var rt=class{static async deriveKey(e){let{keyDataLen:t,sharedSecret:r}=e,o=Math.ceil(t/256);if(o!==1)throw new Dt(`Concat KDF with ${o} rounds not supported.`);let s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,o);let c=rt.computeOtherInfo(e.otherInfo);return Nt(ir(s,r,c)).slice(0,t/8)}static computeOtherInfo(e){let t=rt.toDataLenData({data:e.algorithmId}),r=rt.toDataLenData({data:e.partyUInfo}),i=rt.toDataLenData({data:e.partyVInfo}),o=rt.toDataLenData({data:e.suppPubInfo,variableLength:!1}),s=rt.toDataLenData({data:e.suppPrivInfo});return ir(t,r,i,o,s)}static toDataLenData(e){let{data:t,variableLength:r=!0}=e,i,o=ge(t);if(o==="Undefined")return new Uint8Array(0);if(r){let s=o==="Uint8Array"?t:new z(t,o).toUint8Array(),c=s.length;i=new Uint8Array(4+c),new DataView(i.buffer).setUint32(0,c),i.set(s,4)}else{if(typeof t!="number")throw TypeError("Fixed length input must be a number.");i=new Uint8Array(4),new DataView(i.buffer).setUint32(0,t)}return i}};function jl(n){let e=dn(n);Se(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Vl,hexToBytes:Hl}=oi,ur={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=ur;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Vl(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=ur,t=typeof n=="string"?Hl(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=ur._parseInt(t.subarray(2)),{d:s,l:c}=ur._parseInt(o);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(n){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{let f=u.toString(16);return f.length&1?`0${f}`:f},r=e(t(n.s)),i=e(t(n.r)),o=r.length/2,s=i.length/2,c=t(o),a=t(s);return`30${t(s+o+4)}02${a}${i}02${c}${r}`}},mt=BigInt(0),Re=BigInt(1),im=BigInt(2),Ra=BigInt(3),om=BigInt(4);function Fl(n){let e=jl(n),{Fp:t}=e,r=e.toBytes||((p,l,g)=>{let x=l.toAffine();return $e(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=e.fromBytes||(p=>{let l=p.subarray(1),g=t.fromBytes(l.subarray(0,t.BYTES)),x=t.fromBytes(l.subarray(t.BYTES,2*t.BYTES));return{x:g,y:x}});function o(p){let{a:l,b:g}=e,x=t.sqr(p),S=t.mul(x,p);return t.add(t.add(S,t.mul(p,l)),g)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&mt<p&&p<e.n}function c(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(p){let{allowedPrivateKeyLengths:l,nByteLength:g,wrapPrivateKey:x,n:S}=e;if(l&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=tt(p)),typeof p!="string"||!l.includes(p.length))throw new Error("Invalid key");p=p.padStart(g*2,"0")}let m;try{m=typeof p=="bigint"?p:Fe(ee("private key",p,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof p}`)}return x&&(m=Y(m,S)),c(m),m}let u=new Map;function f(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(l,g,x){if(this.px=l,this.py=g,this.pz=x,l==null||!t.isValid(l))throw new Error("x required");if(g==null||!t.isValid(g))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(l){let{x:g,y:x}=l||{};if(!l||!t.isValid(g)||!t.isValid(x))throw new Error("invalid affine point");if(l instanceof h)throw new Error("projective point not allowed");let S=m=>t.eql(m,t.ZERO);return S(g)&&S(x)?h.ZERO:new h(g,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(l){let g=t.invertBatch(l.map(x=>x.pz));return l.map((x,S)=>x.toAffine(g[S])).map(h.fromAffine)}static fromHex(l){let g=h.fromAffine(i(ee("pointHex",l)));return g.assertValidity(),g}static fromPrivateKey(l){return h.BASE.multiply(a(l))}_setWindowSize(l){this._WINDOW_SIZE=l,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}let{x:l,y:g}=this.toAffine();if(!t.isValid(l)||!t.isValid(g))throw new Error("bad point: x or y not FE");let x=t.sqr(g),S=o(l);if(!t.eql(x,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:l}=this.toAffine();if(t.isOdd)return!t.isOdd(l);throw new Error("Field doesn't support isOdd")}equals(l){f(l);let{px:g,py:x,pz:S}=this,{px:m,py:C,pz:E}=l,A=t.eql(t.mul(g,E),t.mul(m,S)),K=t.eql(t.mul(x,E),t.mul(C,S));return A&&K}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){let{a:l,b:g}=e,x=t.mul(g,Ra),{px:S,py:m,pz:C}=this,E=t.ZERO,A=t.ZERO,K=t.ZERO,T=t.mul(S,S),O=t.mul(m,m),L=t.mul(C,C),P=t.mul(S,m);return P=t.add(P,P),K=t.mul(S,C),K=t.add(K,K),E=t.mul(l,K),A=t.mul(x,L),A=t.add(E,A),E=t.sub(O,A),A=t.add(O,A),A=t.mul(E,A),E=t.mul(P,E),K=t.mul(x,K),L=t.mul(l,L),P=t.sub(T,L),P=t.mul(l,P),P=t.add(P,K),K=t.add(T,T),T=t.add(K,T),T=t.add(T,L),T=t.mul(T,P),A=t.add(A,T),L=t.mul(m,C),L=t.add(L,L),T=t.mul(L,P),E=t.sub(E,T),K=t.mul(L,O),K=t.add(K,K),K=t.add(K,K),new h(E,A,K)}add(l){f(l);let{px:g,py:x,pz:S}=this,{px:m,py:C,pz:E}=l,A=t.ZERO,K=t.ZERO,T=t.ZERO,O=e.a,L=t.mul(e.b,Ra),P=t.mul(g,m),M=t.mul(x,C),R=t.mul(S,E),$=t.add(g,x),v=t.add(m,C);$=t.mul($,v),v=t.add(P,M),$=t.sub($,v),v=t.add(g,S);let k=t.add(m,E);return v=t.mul(v,k),k=t.add(P,R),v=t.sub(v,k),k=t.add(x,S),A=t.add(C,E),k=t.mul(k,A),A=t.add(M,R),k=t.sub(k,A),T=t.mul(O,v),A=t.mul(L,R),T=t.add(A,T),A=t.sub(M,T),T=t.add(M,T),K=t.mul(A,T),M=t.add(P,P),M=t.add(M,P),R=t.mul(O,R),v=t.mul(L,v),M=t.add(M,R),R=t.sub(P,R),R=t.mul(O,R),v=t.add(v,R),P=t.mul(M,v),K=t.add(K,P),P=t.mul(k,v),A=t.mul($,A),A=t.sub(A,P),P=t.mul($,M),T=t.mul(k,T),T=t.add(T,P),new h(A,K,T)}subtract(l){return this.add(l.negate())}is0(){return this.equals(h.ZERO)}wNAF(l){return w.wNAFCached(this,u,l,g=>{let x=t.invertBatch(g.map(S=>S.pz));return g.map((S,m)=>S.toAffine(x[m])).map(h.fromAffine)})}multiplyUnsafe(l){let g=h.ZERO;if(l===mt)return g;if(c(l),l===Re)return this;let{endo:x}=e;if(!x)return w.unsafeLadder(this,l);let{k1neg:S,k1:m,k2neg:C,k2:E}=x.splitScalar(l),A=g,K=g,T=this;for(;m>mt||E>mt;)m&Re&&(A=A.add(T)),E&Re&&(K=K.add(T)),T=T.double(),m>>=Re,E>>=Re;return S&&(A=A.negate()),C&&(K=K.negate()),K=new h(t.mul(K.px,x.beta),K.py,K.pz),A.add(K)}multiply(l){c(l);let g=l,x,S,{endo:m}=e;if(m){let{k1neg:C,k1:E,k2neg:A,k2:K}=m.splitScalar(g),{p:T,f:O}=this.wNAF(E),{p:L,f:P}=this.wNAF(K);T=w.constTimeNegate(C,T),L=w.constTimeNegate(A,L),L=new h(t.mul(L.px,m.beta),L.py,L.pz),x=T.add(L),S=O.add(P)}else{let{p:C,f:E}=this.wNAF(g);x=C,S=E}return h.normalizeZ([x,S])[0]}multiplyAndAddUnsafe(l,g,x){let S=h.BASE,m=(E,A)=>A===mt||A===Re||!E.equals(S)?E.multiplyUnsafe(A):E.multiply(A),C=m(this,g).add(m(l,x));return C.is0()?void 0:C}toAffine(l){let{px:g,py:x,pz:S}=this,m=this.is0();l==null&&(l=m?t.ONE:t.inv(S));let C=t.mul(g,l),E=t.mul(x,l),A=t.mul(S,l);if(m)return{x:t.ZERO,y:t.ZERO};if(!t.eql(A,t.ONE))throw new Error("invZ was invalid");return{x:C,y:E}}isTorsionFree(){let{h:l,isTorsionFree:g}=e;if(l===Re)return!0;if(g)return g(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:l,clearCofactor:g}=e;return l===Re?this:g?g(h,this):this.multiplyUnsafe(e.h)}toRawBytes(l=!0){return this.assertValidity(),r(h,this,l)}toHex(l=!0){return tt(this.toRawBytes(l))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);let y=e.nBitLength,w=ui(h,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:s}}function $l(n){let e=dn(n);return Se(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Da(n){let e=$l(n),{Fp:t,n:r}=e,i=t.BYTES+1,o=2*t.BYTES+1;function s(v){return mt<v&&v<t.ORDER}function c(v){return Y(v,r)}function a(v){return si(v,r)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:y}=Fl({...e,toBytes(v,k,N){let B=k.toAffine(),d=t.toBytes(B.x),U=$e;return N?U(Uint8Array.from([k.hasEvenY()?2:3]),d):U(Uint8Array.from([4]),d,t.toBytes(B.y))},fromBytes(v){let k=v.length,N=v[0],B=v.subarray(1);if(k===i&&(N===2||N===3)){let d=Fe(B);if(!s(d))throw new Error("Point is not on curve");let U=h(d),I=t.sqrt(U),_=(I&Re)===Re;return(N&1)===1!==_&&(I=t.neg(I)),{x:d,y:I}}else if(k===o&&N===4){let d=t.fromBytes(B.subarray(0,t.BYTES)),U=t.fromBytes(B.subarray(t.BYTES,2*t.BYTES));return{x:d,y:U}}else throw new Error(`Point of length ${k} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),w=v=>tt(Le(v,e.nByteLength));function p(v){let k=r>>Re;return v>k}function l(v){return p(v)?c(-v):v}let g=(v,k,N)=>Fe(v.slice(k,N));class x{constructor(k,N,B){this.r=k,this.s=N,this.recovery=B,this.assertValidity()}static fromCompact(k){let N=e.nByteLength;return k=ee("compactSignature",k,N*2),new x(g(k,0,N),g(k,N,2*N))}static fromDER(k){let{r:N,s:B}=ur.toSig(ee("DER",k));return new x(N,B)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new x(this.r,this.s,k)}recoverPublicKey(k){let{r:N,s:B,recovery:d}=this,U=K(ee("msgHash",k));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let I=d===2||d===3?N+e.n:N;if(I>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let _=d&1?"03":"02",q=u.fromHex(_+w(I)),W=a(I),G=c(-U*W),j=c(B*W),V=u.BASE.multiplyAndAddUnsafe(q,G,j);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return sr(this.toDERHex())}toDERHex(){return ur.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return sr(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}let S={isValidPrivateKey(v){try{return f(v),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let v=e.randomBytes(t.BYTES+8),k=Ua(v,r);return Le(k,e.nByteLength)},precompute(v=8,k=u.BASE){return k._setWindowSize(v),k.multiply(BigInt(3)),k}};function m(v,k=!0){return u.fromPrivateKey(v).toRawBytes(k)}function C(v){let k=v instanceof Uint8Array,N=typeof v=="string",B=(k||N)&&v.length;return k?B===i||B===o:N?B===2*i||B===2*o:v instanceof u}function E(v,k,N=!0){if(C(v))throw new Error("first arg must be private key");if(!C(k))throw new Error("second arg must be public key");return u.fromHex(k).multiply(f(v)).toRawBytes(N)}let A=e.bits2int||function(v){let k=Fe(v),N=v.length*8-e.nBitLength;return N>0?k>>BigInt(N):k},K=e.bits2int_modN||function(v){return c(A(v))},T=ln(e.nBitLength);function O(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(mt<=v&&v<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Le(v,e.nByteLength)}function L(v,k,N=P){if(["recovered","canonical"].some(X=>X in N))throw new Error("sign() legacy options not supported");let{hash:B,randomBytes:d}=e,{lowS:U,prehash:I,extraEntropy:_}=N;U==null&&(U=!0),v=ee("msgHash",v),I&&(v=ee("prehashed msgHash",B(v)));let q=K(v),W=f(k),G=[O(W),O(q)];if(_!=null){let X=_===!0?d(t.BYTES):_;G.push(ee("extraEntropy",X,t.BYTES))}let j=$e(...G),V=q;function te(X){let fe=A(X);if(!y(fe))return;let he=a(fe),se=u.BASE.multiply(fe).toAffine(),ye=c(se.x);if(ye===mt)return;let nt=c(he*c(V+ye*W));if(nt===mt)return;let Rt=(se.x===ye?0:2)|Number(se.y&Re),Ir=nt;return U&&p(nt)&&(Ir=l(nt),Rt^=1),new x(ye,Ir,Rt)}return{seed:j,k2sig:te}}let P={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function R(v,k,N=P){let{seed:B,k2sig:d}=L(v,k,N),U=e;return Vo(U.hash.outputLen,U.nByteLength,U.hmac)(B,d)}u.BASE._setWindowSize(8);function $(v,k,N,B=M){let d=v;if(k=ee("msgHash",k),N=ee("publicKey",N),"strict"in B)throw new Error("options.strict was renamed to lowS");let{lowS:U,prehash:I}=B,_,q;try{if(typeof d=="string"||d instanceof Uint8Array)try{_=x.fromDER(d)}catch(se){if(!(se instanceof ur.Err))throw se;_=x.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:se,s:ye}=d;_=new x(se,ye)}else throw new Error("PARSE");q=u.fromHex(N)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&_.hasHighS())return!1;I&&(k=e.hash(k));let{r:W,s:G}=_,j=K(k),V=a(G),te=c(j*V),X=c(W*V),fe=u.BASE.multiplyAndAddUnsafe(q,te,X)?.toAffine();return fe?c(fe.x)===W:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:E,sign:R,verify:$,ProjectivePoint:u,Signature:x,utils:S}}var di=class extends Tr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,yt.hash(e);let r=on(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return yt.exists(this),this.iHash.update(e),this}digestInto(e){yt.exists(this),yt.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Xo=(n,e,t)=>new di(n,e).update(t).digest();Xo.create=(n,e)=>new di(n,e);function Gl(n){return{hash:n,hmac:(e,...t)=>Xo(n,e,ir(...t)),randomBytes:St}}function Ma(n,e){let t=r=>Da({...n,...Gl(r)});return Object.freeze({...t(e),create:t})}var ja=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),qa=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Jl=BigInt(1),Qo=BigInt(2),Wa=(n,e)=>(n+e/Qo)/e;function zl(n){let e=ja,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),u=n*n*n%e,f=u*u*n%e,h=re(f,t,e)*f%e,y=re(h,t,e)*f%e,w=re(y,Qo,e)*u%e,p=re(w,i,e)*w%e,l=re(p,o,e)*p%e,g=re(l,c,e)*l%e,x=re(g,a,e)*g%e,S=re(x,c,e)*l%e,m=re(S,t,e)*f%e,C=re(m,s,e)*p%e,E=re(C,r,e)*u%e,A=re(E,Qo,e);if(!es.eql(es.sqr(A),n))throw new Error("Cannot find square root");return A}var es=ai(ja,void 0,void 0,{sqrt:zl}),De=Ma({a:BigInt(0),b:BigInt(7),Fp:es,n:qa,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=qa,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Jl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,s=BigInt("0x100000000000000000000000000000000"),c=Wa(o*n,e),a=Wa(-r*n,e),u=Y(n-c*t-a*i,e),f=Y(-c*r-a*o,e),h=u>s,y=f>s;if(h&&(u=e-u),y&&(f=e-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:y,k2:f}}}},Nt),vm=BigInt(0);var Bm=De.ProjectivePoint;var ts=class{static async convertPublicKey(e){let{publicKey:t,compressedPublicKey:r}=e;return De.ProjectivePoint.fromHex(t).toRawBytes(r)}static async generateKeyPair(e){let{compressedPublicKey:t}=e??{};t??=!0;let r=De.utils.randomPrivateKey(),i=De.getPublicKey(r,t);return{privateKey:r,publicKey:i}}static async getCurvePoints(e){let{key:t}=e;t.byteLength===32&&(t=await ts.getPublicKey({privateKey:t}));let r=De.ProjectivePoint.fromHex(t),i=Le(r.x,32),o=Le(r.y,32);return{x:i,y:o}}static async getPublicKey(e){let{privateKey:t,compressedPublicKey:r}=e;return r??=!0,De.getPublicKey(t,r)}static async sharedSecret(e){let{privateKey:t,publicKey:r}=e;return De.getSharedSecret(t,r).slice(1)}static async sign(e){let{data:t,hash:r,key:i}=e,o=this.hashAlgorithms[r],s=o(t);return De.sign(s,i).toCompactRawBytes()}static async validatePrivateKey(e){let{key:t}=e;return De.utils.isValidPrivateKey(t)}static async validatePublicKey(e){let{key:t}=e;try{De.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0}static async verify(e){let{data:t,hash:r,key:i,signature:o}=e,s=this.hashAlgorithms[r],c=s(t);return De.verify(o,c,i)}},Be=ts;Be.hashAlgorithms={"SHA-256":Nt};var Zl=n=>n instanceof Uint8Array;var Me=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Va=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Yl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Yl)throw new Error("Non little-endian hardware is not supported");function yi(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function pi(n){if(typeof n=="string"&&(n=yi(n)),!Zl(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}var Xl=n=>Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object;function Ha(n,e){if(e!==void 0&&(typeof e!="object"||!Xl(e)))throw new Error("Options should be object or undefined");return Object.assign(n,e)}function bn(n,e){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof e=="number"&&n.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function Fa(n,e){if(n.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let t=!0;for(let r=0;r<n.length;r++)t&&(t=n[r]===e[r]);return t}function rs(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),c=Number(t&o),a=r?4:0,u=r?0:4;n.setUint32(e+a,s,r),n.setUint32(e+u,c,r)}function ns(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Ql(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function $a(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function ed(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ns(n.outputLen),ns(n.blockLen)}function td(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function rd(n,e){$a(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var nd={number:ns,bool:Ql,bytes:$a,hash:ed,exists:td,output:rd},be=nd;var de=(n,e)=>n[e++]&255|(n[e++]&255)<<8,is=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=pi(e),bn(e,32);let t=de(e,0),r=de(e,2),i=de(e,4),o=de(e,6),s=de(e,8),c=de(e,10),a=de(e,12),u=de(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=de(e,16+2*f)}process(e,t,r=!1){let i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],u=s[2],f=s[3],h=s[4],y=s[5],w=s[6],p=s[7],l=s[8],g=s[9],x=de(e,t+0),S=de(e,t+2),m=de(e,t+4),C=de(e,t+6),E=de(e,t+8),A=de(e,t+10),K=de(e,t+12),T=de(e,t+14),O=o[0]+(x&8191),L=o[1]+((x>>>13|S<<3)&8191),P=o[2]+((S>>>10|m<<6)&8191),M=o[3]+((m>>>7|C<<9)&8191),R=o[4]+((C>>>4|E<<12)&8191),$=o[5]+(E>>>1&8191),v=o[6]+((E>>>14|A<<2)&8191),k=o[7]+((A>>>11|K<<5)&8191),N=o[8]+((K>>>8|T<<8)&8191),B=o[9]+(T>>>5|i),d=0,U=d+O*c+L*(5*g)+P*(5*l)+M*(5*p)+R*(5*w);d=U>>>13,U&=8191,U+=$*(5*y)+v*(5*h)+k*(5*f)+N*(5*u)+B*(5*a),d+=U>>>13,U&=8191;let I=d+O*a+L*c+P*(5*g)+M*(5*l)+R*(5*p);d=I>>>13,I&=8191,I+=$*(5*w)+v*(5*y)+k*(5*h)+N*(5*f)+B*(5*u),d+=I>>>13,I&=8191;let _=d+O*u+L*a+P*c+M*(5*g)+R*(5*l);d=_>>>13,_&=8191,_+=$*(5*p)+v*(5*w)+k*(5*y)+N*(5*h)+B*(5*f),d+=_>>>13,_&=8191;let q=d+O*f+L*u+P*a+M*c+R*(5*g);d=q>>>13,q&=8191,q+=$*(5*l)+v*(5*p)+k*(5*w)+N*(5*y)+B*(5*h),d+=q>>>13,q&=8191;let W=d+O*h+L*f+P*u+M*a+R*c;d=W>>>13,W&=8191,W+=$*(5*g)+v*(5*l)+k*(5*p)+N*(5*w)+B*(5*y),d+=W>>>13,W&=8191;let G=d+O*y+L*h+P*f+M*u+R*a;d=G>>>13,G&=8191,G+=$*c+v*(5*g)+k*(5*l)+N*(5*p)+B*(5*w),d+=G>>>13,G&=8191;let j=d+O*w+L*y+P*h+M*f+R*u;d=j>>>13,j&=8191,j+=$*a+v*c+k*(5*g)+N*(5*l)+B*(5*p),d+=j>>>13,j&=8191;let V=d+O*p+L*w+P*y+M*h+R*f;d=V>>>13,V&=8191,V+=$*u+v*a+k*c+N*(5*g)+B*(5*l),d+=V>>>13,V&=8191;let te=d+O*l+L*p+P*w+M*y+R*h;d=te>>>13,te&=8191,te+=$*f+v*u+k*a+N*c+B*(5*g),d+=te>>>13,te&=8191;let X=d+O*g+L*l+P*p+M*w+R*y;d=X>>>13,X&=8191,X+=$*h+v*f+k*u+N*a+B*c,d+=X>>>13,X&=8191,d=(d<<2)+d|0,d=d+U|0,U=d&8191,d=d>>>13,I+=d,o[0]=U,o[1]=I,o[2]=_,o[3]=q,o[4]=W,o[5]=G,o[6]=j,o[7]=V,o[8]=te,o[9]=X}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=1<<13;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=s&65535;for(let c=1;c<8;c++)s=(e[c]+t[c]|0)+(s>>>16)|0,e[c]=s&65535}update(e){be.exists(this);let{buffer:t,blockLen:r}=this;e=pi(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(e,o);continue}t.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){be.exists(this),be.output(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=r[s]>>>0,e[o++]=r[s]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}};function id(n){let e=(r,i)=>n(i).update(pi(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}var Ga=id(n=>new is(n));var od=yi("expand 16-byte k"),sd=yi("expand 32-byte k"),cd=Me(od),ad=Me(sd),Ja=n=>!(n.byteOffset%4),Or=n=>{let{core:e,rounds:t,counterRight:r,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:c}=Ha({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);be.number(i),be.number(t),be.number(c),be.bool(r),be.bool(o);let a=c/4;if(c%4!==0)throw new Error("Salsa/ChaCha: blockLen should be aligned to 4 bytes");return(u,f,h,y,w=0)=>{if(be.bytes(u),be.bytes(f),be.bytes(h),y||(y=new Uint8Array(h.length)),be.bytes(y),be.number(w),w<0||w>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(y.length<h.length)throw new Error(`Salsa/ChaCha: output (${y.length}) is shorter than data (${h.length})`);let p=[],l,g;if(u.length===32)l=u,g=ad;else if(u.length===16&&o)l=new Uint8Array(32),l.set(u),l.set(u,16),g=cd,p.push(l);else throw new Error(`Salsa/ChaCha: wrong key length=${u.length}, expected`);if(s){if(f.length<=16)throw new Error("Salsa/ChaCha: extended nonce should be bigger than 16 bytes");l=s(g,l,f.subarray(0,16),new Uint8Array(32)),p.push(l),f=f.subarray(16)}let x=16-i;if(f.length!==x)throw new Error(`Salsa/ChaCha: nonce should be ${x} or 16 bytes`);if(x!==12){let O=new Uint8Array(12);O.set(f,r?0:12-f.length),p.push(f=O)}let S=new Uint8Array(c),m=Me(S),C=Me(l),E=Me(f),A=Ja(h)&&Me(h),K=Ja(y)&&Me(y);p.push(m);let T=h.length;for(let O=0,L=w;O<T;L++){if(e(g,C,E,m,L,t),L>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");let P=Math.min(c,T-O);if(P===c&&K&&A){let M=O/4;if(O%4!==0)throw new Error("Salsa/ChaCha: wrong block position");for(let R=0;R<a;R++)K[M+R]=A[M+R]^m[R];O+=c;continue}for(let M=0;M<P;M++)y[O+M]=h[O+M]^S[M];O+=P}for(let O=0;O<p.length;O++)p[O].fill(0);return y}};var D=(n,e)=>n<<e|n>>>32-e;function wn(n,e,t,r,i,o=20){let s=n[0],c=n[1],a=n[2],u=n[3],f=e[0],h=e[1],y=e[2],w=e[3],p=e[4],l=e[5],g=e[6],x=e[7],S=i,m=t[0],C=t[1],E=t[2],A=s,K=c,T=a,O=u,L=f,P=h,M=y,R=w,$=p,v=l,k=g,N=x,B=S,d=m,U=C,I=E;for(let q=0;q<o;q+=2)A=A+L|0,B=D(B^A,16),$=$+B|0,L=D(L^$,12),A=A+L|0,B=D(B^A,8),$=$+B|0,L=D(L^$,7),K=K+P|0,d=D(d^K,16),v=v+d|0,P=D(P^v,12),K=K+P|0,d=D(d^K,8),v=v+d|0,P=D(P^v,7),T=T+M|0,U=D(U^T,16),k=k+U|0,M=D(M^k,12),T=T+M|0,U=D(U^T,8),k=k+U|0,M=D(M^k,7),O=O+R|0,I=D(I^O,16),N=N+I|0,R=D(R^N,12),O=O+R|0,I=D(I^O,8),N=N+I|0,R=D(R^N,7),A=A+P|0,I=D(I^A,16),k=k+I|0,P=D(P^k,12),A=A+P|0,I=D(I^A,8),k=k+I|0,P=D(P^k,7),K=K+M|0,B=D(B^K,16),N=N+B|0,M=D(M^N,12),K=K+M|0,B=D(B^K,8),N=N+B|0,M=D(M^N,7),T=T+R|0,d=D(d^T,16),$=$+d|0,R=D(R^$,12),T=T+R|0,d=D(d^T,8),$=$+d|0,R=D(R^$,7),O=O+L|0,U=D(U^O,16),v=v+U|0,L=D(L^v,12),O=O+L|0,U=D(U^O,8),v=v+U|0,L=D(L^v,7);let _=0;r[_++]=s+A|0,r[_++]=c+K|0,r[_++]=a+T|0,r[_++]=u+O|0,r[_++]=f+L|0,r[_++]=h+P|0,r[_++]=y+M|0,r[_++]=w+R|0,r[_++]=p+$|0,r[_++]=l+v|0,r[_++]=g+k|0,r[_++]=x+N|0,r[_++]=S+B|0,r[_++]=m+d|0,r[_++]=C+U|0,r[_++]=E+I|0}function ud(n,e,t,r){let i=Me(e),o=Me(t),s=Me(r),c=n[0],a=n[1],u=n[2],f=n[3],h=i[0],y=i[1],w=i[2],p=i[3],l=i[4],g=i[5],x=i[6],S=i[7],m=o[0],C=o[1],E=o[2],A=o[3];for(let K=0;K<20;K+=2)c=c+h|0,m=D(m^c,16),l=l+m|0,h=D(h^l,12),c=c+h|0,m=D(m^c,8),l=l+m|0,h=D(h^l,7),a=a+y|0,C=D(C^a,16),g=g+C|0,y=D(y^g,12),a=a+y|0,C=D(C^a,8),g=g+C|0,y=D(y^g,7),u=u+w|0,E=D(E^u,16),x=x+E|0,w=D(w^x,12),u=u+w|0,E=D(E^u,8),x=x+E|0,w=D(w^x,7),f=f+p|0,A=D(A^f,16),S=S+A|0,p=D(p^S,12),f=f+p|0,A=D(A^f,8),S=S+A|0,p=D(p^S,7),c=c+y|0,A=D(A^c,16),x=x+A|0,y=D(y^x,12),c=c+y|0,A=D(A^c,8),x=x+A|0,y=D(y^x,7),a=a+w|0,m=D(m^a,16),S=S+m|0,w=D(w^S,12),a=a+w|0,m=D(m^a,8),S=S+m|0,w=D(w^S,7),u=u+p|0,C=D(C^u,16),l=l+C|0,p=D(p^l,12),u=u+p|0,C=D(C^u,8),l=l+C|0,p=D(p^l,7),f=f+h|0,E=D(E^f,16),g=g+E|0,h=D(h^g,12),f=f+h|0,E=D(E^f,8),g=g+E|0,h=D(h^g,7);return s[0]=c,s[1]=a,s[2]=u,s[3]=f,s[4]=m,s[5]=C,s[6]=E,s[7]=A,r}var Wm=Or({core:wn,counterRight:!1,counterLen:8}),fd=Or({core:wn,counterRight:!1,counterLen:4,allow128bitKeys:!1}),mi=Or({core:wn,counterRight:!1,counterLen:8,extendNonceFn:ud,allow128bitKeys:!1}),jm=Or({core:wn,counterRight:!1,counterLen:4,rounds:8}),Vm=Or({core:wn,counterRight:!1,counterLen:4,rounds:12}),hd=new Uint8Array(16),za=(n,e)=>{n.update(e);let t=e.length%16;t&&n.update(hd.subarray(t))},Za=(n,e,t,r,i)=>{let o=n(e,t,new Uint8Array(32)),s=Ga.create(o);i&&za(s,i),za(s,r);let c=new Uint8Array(16),a=Va(c);rs(a,0,BigInt(i?i.length:0),!0),rs(a,8,BigInt(r.length),!0),s.update(c);let u=s.digest();return o.fill(0),u},Ya=n=>(e,t,r)=>(bn(e,32),bn(t),{tagLength:16,encrypt:o=>{let s=new Uint8Array(o.length+16);n(e,t,o,s,1);let c=Za(n,e,t,s.subarray(0,-16),r);return s.set(c,o.length),s},decrypt:o=>{if(o.length<16)throw new Error(`Encrypted data should be at least ${16}`);let s=o.subarray(-16),c=o.subarray(0,-16),a=Za(n,e,t,c,r);if(!Fa(s,a))throw new Error("Wrong tag");return n(e,t,c,void 0,1)}}),Hm=Ya(fd),os=Ya(mi);var ss=class{static async decrypt(e){let{data:t,key:r,nonce:i}=e;return mi(r,i,t)}static async encrypt(e){let{data:t,key:r,nonce:i}=e;return mi(r,i,t)}static async generateKey(){return crypto.getRandomValues(new Uint8Array(32))}};var Xa=16,cs=class{static async decrypt(e){let{additionalData:t,data:r,key:i,nonce:o,tag:s}=e,c=os(i,o,t),a=new Uint8Array([...r,...s]);return c.decrypt(a)}static async encrypt(e){let{additionalData:t,data:r,key:i,nonce:o}=e,c=os(i,o,t).encrypt(r),a=c.subarray(0,-Xa),u=c.subarray(-Xa);return{ciphertext:a,tag:u}}static async generateKey(){return crypto.getRandomValues(new Uint8Array(32))}};var as=class extends cn{constructor(){super(...arguments);this.namedCurves=["secp256k1","X25519"]}async deriveBits(t){let{algorithm:r,baseKey:i,length:o}=t;this.checkAlgorithmOptions({algorithm:r,baseKey:i}),this.checkKeyUsages({keyUsages:["deriveBits"],allowedKeyUsages:i.usages}),this.checkKeyUsages({keyUsages:["deriveBits"],allowedKeyUsages:r.publicKey.usages});let s,c=i.algorithm;switch(c.namedCurve){case"secp256k1":{let u=i.material,f=r.publicKey.material;s=await Be.sharedSecret({privateKey:u,publicKey:f});break}case"X25519":{let u=i.material,f=r.publicKey.material;s=await Pt.sharedSecret({privateKey:u,publicKey:f});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}if(o===null)return s;if(o&&o%8!==0)throw new qe("To be compatible with all browsers, 'length' must be a multiple of 8.");let a=o/8;if(s.byteLength<a)throw new qe("Requested 'length' exceeds the byte length of the derived secret.");return a===s.byteLength?s:s.slice(0,a)}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"secp256k1":{r.compressedPublicKey??=!0,s=await Be.generateKeyPair({compressedPublicKey:r.compressedPublicKey});break}case"X25519":{s=await Pt.generateKeyPair();break}}if(!or(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}};var us=class extends an{constructor(){super(...arguments);this.hashAlgorithms=["SHA-256"];this.namedCurves=["secp256k1"]}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"secp256k1":{r.compressedPublicKey??=!0,s=await Be.generateKeyPair({compressedPublicKey:r.compressedPublicKey});break}}if(!or(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}async sign(t){let{algorithm:r,key:i,data:o}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),this.checkKeyUsages({keyUsages:["sign"],allowedKeyUsages:i.usages});let s,c=i.algorithm;switch(c.namedCurve){case"secp256k1":{s=await Be.sign({hash:r.hash,key:i.material,data:o});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return s}async verify(t){let{algorithm:r,key:i,signature:o,data:s}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"public"}),this.checkKeyUsages({keyUsages:["verify"],allowedKeyUsages:i.usages});let c,a=i.algorithm;switch(a.namedCurve){case"secp256k1":{c=await Be.verify({hash:r.hash,key:i.material,signature:o,data:s});break}default:throw new TypeError(`Out of range: '${a.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return c}};var fs=class extends un{constructor(){super(...arguments);this.namedCurves=["Ed25519","Ed448"]}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"Ed25519":{s=await Je.generateKeyPair();break}}if(!or(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}async sign(t){let{algorithm:r,key:i,data:o}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),this.checkKeyUsages({keyUsages:["sign"],allowedKeyUsages:i.usages});let s,c=i.algorithm;switch(c.namedCurve){case"Ed25519":{s=await Je.sign({key:i.material,data:o});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return s}async verify(t){let{algorithm:r,key:i,signature:o,data:s}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"public"}),this.checkKeyUsages({keyUsages:["verify"],allowedKeyUsages:i.usages});let c,a=i.algorithm;switch(a.namedCurve){case"Ed25519":{c=await Je.verify({key:i.material,signature:o,data:s});break}default:throw new TypeError(`Out of range: '${a.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return c}};var hs=class extends hn{async decrypt(e){let{algorithm:t,key:r,data:i}=e;return this.checkAlgorithmOptions({algorithm:t,key:r}),this.checkKeyUsages({keyUsages:["decrypt"],allowedKeyUsages:r.usages}),ar.decrypt({counter:t.counter,data:i,key:r.material,length:t.length})}async encrypt(e){let{algorithm:t,key:r,data:i}=e;return this.checkAlgorithmOptions({algorithm:t,key:r}),this.checkKeyUsages({keyUsages:["encrypt"],allowedKeyUsages:r.usages}),ar.encrypt({counter:t.counter,data:i,key:r.material,length:t.length})}async generateKey(e){let{algorithm:t,extractable:r,keyUsages:i}=e;this.checkGenerateKey({algorithm:t,keyUsages:i});let o=await ar.generateKey({length:t.length});if(ge(o)!=="Uint8Array")throw new Error("Operation failed to generate key.");return new le(t,r,o,"secret",this.keyUsages)}};var ld={Ed25519:{name:"EdDSA",namedCurve:"Ed25519"},Ed448:{name:"EdDSA",namedCurve:"Ed448"},X25519:{name:"ECDH",namedCurve:"X25519"},"secp256k1:ES256K":{name:"ECDSA",namedCurve:"secp256k1"},secp256k1:{name:"ECDH",namedCurve:"secp256k1"},"P-256":{name:"ECDSA",namedCurve:"P-256"},"P-384":{name:"ECDSA",namedCurve:"P-384"},"P-521":{name:"ECDSA",namedCurve:"P-521"},A128CBC:{name:"AES-CBC",length:128},A192CBC:{name:"AES-CBC",length:192},A256CBC:{name:"AES-CBC",length:256},A128CTR:{name:"AES-CTR",length:128},A192CTR:{name:"AES-CTR",length:192},A256CTR:{name:"AES-CTR",length:256},A128GCM:{name:"AES-GCM",length:128},A192GCM:{name:"AES-GCM",length:192},A256GCM:{name:"AES-GCM",length:256},HS256:{name:"HMAC",hash:{name:"SHA-256"}},HS384:{name:"HMAC",hash:{name:"SHA-384"}},HS512:{name:"HMAC",hash:{name:"SHA-512"}}},dd={"EdDSA:Ed25519":{alg:"EdDSA",crv:"Ed25519",kty:"OKP"},"EdDSA:Ed448":{alg:"EdDSA",crv:"Ed448",kty:"OKP"},"ECDH:X25519":{crv:"X25519",kty:"OKP"},"ECDSA:secp256k1":{alg:"ES256K",crv:"secp256k1",kty:"EC"},"ECDH:secp256k1":{crv:"secp256k1",kty:"EC"},"ECDSA:P-256":{alg:"ES256",crv:"P-256",kty:"EC"},"ECDSA:P-384":{alg:"ES384",crv:"P-384",kty:"EC"},"ECDSA:P-521":{alg:"ES512",crv:"P-521",kty:"EC"},"AES-CBC:128":{alg:"A128CBC",kty:"oct"},"AES-CBC:192":{alg:"A192CBC",kty:"oct"},"AES-CBC:256":{alg:"A256CBC",kty:"oct"},"AES-CTR:128":{alg:"A128CTR",kty:"oct"},"AES-CTR:192":{alg:"A192CTR",kty:"oct"},"AES-CTR:256":{alg:"A256CTR",kty:"oct"},"AES-GCM:128":{alg:"A128GCM",kty:"oct"},"AES-GCM:192":{alg:"A192GCM",kty:"oct"},"AES-GCM:256":{alg:"A256GCM",kty:"oct"},"HMAC:SHA-256":{alg:"HS256",kty:"oct"},"HMAC:SHA-384":{alg:"HS384",kty:"oct"},"HMAC:SHA-512":{alg:"HS512",kty:"oct"}},yd={"ed25519-pub":{alg:"EdDSA",crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{alg:"EdDSA",crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{alg:"ES256K",crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{alg:"ES256K",crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}},pd={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"},Ce=class{static async cryptoKeyToJwk(e){let{algorithm:t,extractable:r,material:i,type:o,usages:s}=e.key,c=Ce.webCryptoToJose(t);return c.ext=r?"true":"false",c.key_ops=s,c=await Ce.keyToJwk({keyMaterial:i,keyType:o,...c}),{...c}}static async cryptoKeyToJwkPair(e){let{keyPair:t}=e,r=await Ce.cryptoKeyToJwk({key:t.privateKey}),i=await Ce.cryptoKeyToJwk({key:t.publicKey});return{...{privateKeyJwk:r,publicKeyJwk:i}}}static async joseToMulticodec(e){let t=e.key,r=[];"crv"in t&&(r.push(t.crv),"d"in t?r.push("private"):r.push("public"));let i=r.join(":"),o=pd[i];if(o===void 0)throw new Error(`Unsupported JOSE to Multicodec conversion: '${i}'`);return{code:ne.getCodeFromName({name:o}),name:o}}static joseToWebCrypto(e){let t=[];if("crv"in e&&e.crv)t.push(e.crv),e.crv==="secp256k1"&&e.alg==="ES256K"&&t.push(e.alg);else if(e.alg!==void 0)t.push(e.alg);else throw new TypeError("One or more parameters missing: 'alg' or 'crv'");let r=t.join(":"),i=ld[r];if(i===void 0)throw new Error(`Unsupported JOSE to WebCrypto conversion: '${r}'`);return{...i}}static async jwkThumbprint(e){let{key:t}=e,r=t.kty,i;if(r==="EC")i={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")i={k:t.k,kty:t.kty};else if(r==="OKP")i={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")i={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);Si(i);let o=Ce.canonicalize(i),s=z.string(o).toUint8Array(),c=Nt(s);return z.uint8Array(c).toBase64Url()}static async jwkToCryptoKey(e){let t=e.key,{keyMaterial:r,keyType:i}=await Ce.jwkToKey({key:t}),o=Ce.joseToWebCrypto(t),s;if("ext"in t&&t.ext!==void 0)s=t.ext==="true";else throw new Error("Conversion from JWK to CryptoKey failed. Required parameter missing: 'ext'");let c;if("key_ops"in t&&t.key_ops!==void 0)c=t.key_ops;else throw new Error("Conversion from JWK to CryptoKey failed. Required parameter missing: 'key_ops'");return new le(o,s,r,i,c)}static async jwkToKey(e){let t=e.key,r,i;if("d"in t)r=z.base64Url(t.d).toUint8Array(),i="private";else if("y"in t&&t.y){let o=new Uint8Array([4]),s=z.base64Url(t.x).toUint8Array(),c=z.base64Url(t.y).toUint8Array();r=new Uint8Array([...o,...s,...c]),i="public"}else if("x"in t)r=z.base64Url(t.x).toUint8Array(),i="public";else if("k"in t)r=z.base64Url(t.k).toUint8Array(),i="private";else throw new Error("Jose: Unknown JSON Web Key format.");return{keyMaterial:r,keyType:i}}static async jwkToMultibaseId(e){let t=e.key,{name:r}=await Ce.joseToMulticodec({key:t}),{keyMaterial:i}=await Ce.jwkToKey({key:t});if("crv"in t&&!("d"in t))switch(t.crv){case"secp256k1":{i=await Be.convertPublicKey({publicKey:i,compressedPublicKey:!0});break}}return _o({key:i,multicodecName:r})}static async keyToJwk(e){let{keyMaterial:t,keyType:r,...i}=e,o={...i};if("crv"in o){switch(o.crv){case"Ed25519":{let s=r==="private"?await Je.getPublicKey({privateKey:t}):t;o.x=z.uint8Array(s).toBase64Url(),o.kty??="OKP";break}case"X25519":{let s=r==="private"?await Pt.getPublicKey({privateKey:t}):t;o.x=z.uint8Array(s).toBase64Url(),o.kty??="OKP";break}case"secp256k1":{let s=await Be.getCurvePoints({key:t});o.x=z.uint8Array(s.x).toBase64Url(),o.y=z.uint8Array(s.y).toBase64Url(),o.kty??="EC";break}default:throw new Error(`Unsupported key to JWK conversion: ${o.crv}`)}r==="private"&&(o={d:z.uint8Array(t).toBase64Url(),...o})}return!("crv"in o)&&o.kty==="oct"&&(o.k=z.uint8Array(t).toBase64Url()),{...o}}static async multicodecToJose(e){let{code:t,name:r}=e;if(!(r?!t:t))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?ne.getNameFromCode({code:t}):r;let o=yd[r];if(o===void 0)throw new Error(`Unsupported Multicodec to JOSE conversion: '${e.name??e.code}'`);return{...o}}static webCryptoToJose(e){let t=[];if(t.push(e.name),"namedCurve"in e)t.push(e.namedCurve);else if(e.length!==void 0)t.push(e.length.toString());else if("hash"in e)t.push(e.hash.name);else throw new TypeError("One or more parameters missing: 'name', 'namedCurve', 'length', or 'hash'");let r=t.join(":"),i=dd[r];if(i===void 0)throw new Error(`Unsupported WebCrypto to JOSE conversion: '${r}'`);return{...i}}static canonicalize(e){let r=Object.keys(e).sort().reduce((i,o)=>(i[o]=e[o],i),{});return JSON.stringify(r)}};function Qa(n){return class extends n{async toJwk(){return Ce.cryptoKeyToJwk({key:this})}}}var md=Qa(le);return yu(gd);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.js.map
