var ps=Object.create;var cr=Object.defineProperty;var ys=Object.getOwnPropertyDescriptor;var ms=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,ws=Object.prototype.hasOwnProperty;var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Es=(n,e)=>{for(var t in e)cr(n,t,{get:e[t],enumerable:!0})},xs=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ms(e))!ws.call(n,i)&&i!==t&&cr(n,i,{get:()=>e[i],enumerable:!(r=ys(e,i))||r.enumerable});return n};var bs=(n,e,t)=>(t=n!=null?ps(gs(n)):{},xs(e||!n||!n.__esModule?cr(t,"default",{value:n,enumerable:!0}):t,n));var Fn=w(Cn=>{"use strict";Cn.supports=function(...e){let t=e.reduce((r,i)=>Object.assign(r,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var V=w((Cu,Nn)=>{"use strict";Nn.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Dn=w(St=>{"use strict";St.byteLength=Zs;St.toByteArray=to;St.fromByteArray=io;var H=[],k=[],Qs=typeof Uint8Array<"u"?Uint8Array:Array,gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(be=0,kn=gr.length;be<kn;++be)H[be]=gr[be],k[gr.charCodeAt(be)]=be;var be,kn;k["-".charCodeAt(0)]=62;k["_".charCodeAt(0)]=63;function Rn(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Zs(n){var e=Rn(n),t=e[0],r=e[1];return(t+r)*3/4-r}function eo(n,e,t){return(e+t)*3/4-t}function to(n){var e,t=Rn(n),r=t[0],i=t[1],s=new Qs(eo(n,r,i)),o=0,c=i>0?r-4:r,f;for(f=0;f<c;f+=4)e=k[n.charCodeAt(f)]<<18|k[n.charCodeAt(f+1)]<<12|k[n.charCodeAt(f+2)]<<6|k[n.charCodeAt(f+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=k[n.charCodeAt(f)]<<2|k[n.charCodeAt(f+1)]>>4,s[o++]=e&255),i===1&&(e=k[n.charCodeAt(f)]<<10|k[n.charCodeAt(f+1)]<<4|k[n.charCodeAt(f+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function ro(n){return H[n>>18&63]+H[n>>12&63]+H[n>>6&63]+H[n&63]}function no(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(ro(r));return i.join("")}function io(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,c=t-r;o<c;o+=s)i.push(no(n,o,o+s>c?c:o+s));return r===1?(e=n[t-1],i.push(H[e>>2]+H[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(H[e>>10]+H[e>>4&63]+H[e<<2&63]+"=")),i.join("")}});var Mn=w(wr=>{wr.read=function(n,e,t,r,i){var s,o,c=i*8-r-1,f=(1<<c)-1,h=f>>1,d=-7,a=t?i-1:0,l=t?-1:1,g=n[e+a];for(a+=l,s=g&(1<<-d)-1,g>>=-d,d+=c;d>0;s=s*256+n[e+a],a+=l,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+n[e+a],a+=l,d-=8);if(s===0)s=1-h;else{if(s===f)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-h}return(g?-1:1)*o*Math.pow(2,s-r)};wr.write=function(n,e,t,r,i,s){var o,c,f,h=s*8-i-1,d=(1<<h)-1,a=d>>1,l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,p=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+a>=1?e+=l/f:e+=l*Math.pow(2,1-a),e*f>=2&&(o++,f/=2),o+a>=d?(c=0,o=d):o+a>=1?(c=(e*f-1)*Math.pow(2,i),o=o+a):(c=e*Math.pow(2,a-1)*Math.pow(2,i),o=0));i>=8;n[t+g]=c&255,g+=p,c/=256,i-=8);for(o=o<<i|c,h+=i;h>0;n[t+g]=o&255,g+=p,o/=256,h-=8);n[t+g-p]|=E*128}});var Ct=w(Ke=>{"use strict";var Er=Dn(),je=Mn(),Pn=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ke.Buffer=u;Ke.SlowBuffer=ho;Ke.INSPECT_MAX_BYTES=50;var Ot=2147483647;Ke.kMaxLength=Ot;u.TYPED_ARRAY_SUPPORT=so();!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function so(){try{let n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}});Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function ee(n){if(n>Ot)throw new RangeError('The value "'+n+'" is invalid for option "size"');let e=new Uint8Array(n);return Object.setPrototypeOf(e,u.prototype),e}function u(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Tr(n)}return $n(n,e,t)}u.poolSize=8192;function $n(n,e,t){if(typeof n=="string")return co(n,e);if(ArrayBuffer.isView(n))return uo(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(W(n,ArrayBuffer)||n&&W(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(n,SharedArrayBuffer)||n&&W(n.buffer,SharedArrayBuffer)))return br(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return u.from(r,e,t);let i=fo(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return u.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}u.from=function(n,e,t){return $n(n,e,t)};Object.setPrototypeOf(u.prototype,Uint8Array.prototype);Object.setPrototypeOf(u,Uint8Array);function Kn(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function oo(n,e,t){return Kn(n),n<=0?ee(n):e!==void 0?typeof t=="string"?ee(n).fill(e,t):ee(n).fill(e):ee(n)}u.alloc=function(n,e,t){return oo(n,e,t)};function Tr(n){return Kn(n),ee(n<0?0:Br(n)|0)}u.allocUnsafe=function(n){return Tr(n)};u.allocUnsafeSlow=function(n){return Tr(n)};function co(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=zn(n,e)|0,r=ee(t),i=r.write(n,e);return i!==t&&(r=r.slice(0,i)),r}function xr(n){let e=n.length<0?0:Br(n.length)|0,t=ee(e);for(let r=0;r<e;r+=1)t[r]=n[r]&255;return t}function uo(n){if(W(n,Uint8Array)){let e=new Uint8Array(n);return br(e.buffer,e.byteOffset,e.byteLength)}return xr(n)}function br(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&t===void 0?r=new Uint8Array(n):t===void 0?r=new Uint8Array(n,e):r=new Uint8Array(n,e,t),Object.setPrototypeOf(r,u.prototype),r}function fo(n){if(u.isBuffer(n)){let e=Br(n.length)|0,t=ee(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||_r(n.length)?ee(0):xr(n);if(n.type==="Buffer"&&Array.isArray(n.data))return xr(n.data)}function Br(n){if(n>=Ot)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ot.toString(16)+" bytes");return n|0}function ho(n){return+n!=n&&(n=0),u.alloc(+n)}u.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==u.prototype};u.compare=function(e,t){if(W(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let s=0,o=Math.min(r,i);s<o;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);let r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=u.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){let o=e[r];if(W(o,Uint8Array))s+o.length>i.length?(u.isBuffer(o)||(o=u.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(u.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function zn(n,e){if(u.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||W(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let t=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return vr(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return ei(n).length;default:if(i)return r?-1:vr(n).length;e=(""+e).toLowerCase(),i=!0}}u.byteLength=zn;function ao(n,e,t){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return vo(this,e,t);case"utf8":case"utf-8":return Hn(this,e,t);case"ascii":return xo(this,e,t);case"latin1":case"binary":return bo(this,e,t);case"base64":return wo(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return To(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}u.prototype._isBuffer=!0;function ve(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}u.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)ve(this,t,t+1);return this};u.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)ve(this,t,t+3),ve(this,t+1,t+2);return this};u.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)ve(this,t,t+7),ve(this,t+1,t+6),ve(this,t+2,t+5),ve(this,t+3,t+4);return this};u.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Hn(this,0,e):ao.apply(this,arguments)};u.prototype.toLocaleString=u.prototype.toString;u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){let e="",t=Ke.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Pn&&(u.prototype[Pn]=u.prototype.inspect);u.prototype.compare=function(e,t,r,i,s){if(W(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,c=r-t,f=Math.min(o,c),h=this.slice(i,s),d=e.slice(t,r);for(let a=0;a<f;++a)if(h[a]!==d[a]){o=h[a],c=d[a];break}return o<c?-1:c<o?1:0};function Gn(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,_r(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,r)),u.isBuffer(e))return e.length===0?-1:Vn(n,e,t,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):Vn(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function Vn(n,e,t,r,i){let s=1,o=n.length,c=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;s=2,o/=2,c/=2,t/=2}function f(d,a){return s===1?d[a]:d.readUInt16BE(a*s)}let h;if(i){let d=-1;for(h=t;h<o;h++)if(f(n,h)===f(e,d===-1?0:h-d)){if(d===-1&&(d=h),h-d+1===c)return d*s}else d!==-1&&(h-=h-d),d=-1}else for(t+c>o&&(t=o-c),h=t;h>=0;h--){let d=!0;for(let a=0;a<c;a++)if(f(n,h+a)!==f(e,a)){d=!1;break}if(d)return h}return-1}u.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};u.prototype.indexOf=function(e,t,r){return Gn(this,e,t,r,!0)};u.prototype.lastIndexOf=function(e,t,r){return Gn(this,e,t,r,!1)};function lo(n,e,t,r){t=Number(t)||0;let i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;let s=e.length;r>s/2&&(r=s/2);let o;for(o=0;o<r;++o){let c=parseInt(e.substr(o*2,2),16);if(_r(c))return o;n[t+o]=c}return o}function po(n,e,t,r){return Ut(vr(e,n.length-t),n,t,r)}function yo(n,e,t,r){return Ut(Io(e),n,t,r)}function mo(n,e,t,r){return Ut(ei(e),n,t,r)}function go(n,e,t,r){return Ut(Lo(e,n.length-t),n,t,r)}u.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return lo(this,e,t,r);case"utf8":case"utf-8":return po(this,e,t,r);case"ascii":case"latin1":case"binary":return yo(this,e,t,r);case"base64":return mo(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return go(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wo(n,e,t){return e===0&&t===n.length?Er.fromByteArray(n):Er.fromByteArray(n.slice(e,t))}function Hn(n,e,t){t=Math.min(n.length,t);let r=[],i=e;for(;i<t;){let s=n[i],o=null,c=s>239?4:s>223?3:s>191?2:1;if(i+c<=t){let f,h,d,a;switch(c){case 1:s<128&&(o=s);break;case 2:f=n[i+1],(f&192)===128&&(a=(s&31)<<6|f&63,a>127&&(o=a));break;case 3:f=n[i+1],h=n[i+2],(f&192)===128&&(h&192)===128&&(a=(s&15)<<12|(f&63)<<6|h&63,a>2047&&(a<55296||a>57343)&&(o=a));break;case 4:f=n[i+1],h=n[i+2],d=n[i+3],(f&192)===128&&(h&192)===128&&(d&192)===128&&(a=(s&15)<<18|(f&63)<<12|(h&63)<<6|d&63,a>65535&&a<1114112&&(o=a))}}o===null?(o=65533,c=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),i+=c}return Eo(r)}var qn=4096;function Eo(n){let e=n.length;if(e<=qn)return String.fromCharCode.apply(String,n);let t="",r=0;for(;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=qn));return t}function xo(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function bo(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function vo(n,e,t){let r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);let i="";for(let s=e;s<t;++s)i+=So[n[s]];return i}function To(n,e,t){let r=n.slice(e,t),i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}u.prototype.slice=function(e,t){let r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,u.prototype),i};function B(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||B(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return i};u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||B(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i};u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e=e>>>0,t||B(e,1,this.length),this[e]};u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||B(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||B(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||B(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readBigUInt64LE=fe(function(e){e=e>>>0,$e(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&ot(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});u.prototype.readBigUInt64BE=fe(function(e){e=e>>>0,$e(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&ot(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(i)<<BigInt(32))+BigInt(s)});u.prototype.readIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||B(e,t,this.length);let i=this[e],s=1,o=0;for(;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};u.prototype.readIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||B(e,t,this.length);let i=t,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};u.prototype.readInt8=function(e,t){return e=e>>>0,t||B(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,t){e=e>>>0,t||B(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};u.prototype.readInt16BE=function(e,t){e=e>>>0,t||B(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};u.prototype.readInt32LE=function(e,t){return e=e>>>0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,t){return e=e>>>0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readBigInt64LE=fe(function(e){e=e>>>0,$e(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&ot(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});u.prototype.readBigInt64BE=fe(function(e){e=e>>>0,$e(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&ot(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)});u.prototype.readFloatLE=function(e,t){return e=e>>>0,t||B(e,4,this.length),je.read(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,t){return e=e>>>0,t||B(e,4,this.length),je.read(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||B(e,8,this.length),je.read(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||B(e,8,this.length),je.read(this,e,!1,52,8)};function S(n,e,t,r,i,s){if(!u.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;S(this,e,t,r,c,0)}let s=1,o=0;for(this[t]=e&255;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r};u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;S(this,e,t,r,c,0)}let s=r-1,o=1;for(this[t+s]=e&255;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r};u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,1,255,0),this[t]=e&255,t+1};u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Wn(n,e,t,r,i){Zn(e,r,i,n,t,7);let s=Number(e&BigInt(4294967295));n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,t}function Yn(n,e,t,r,i){Zn(e,r,i,n,t,7);let s=Number(e&BigInt(4294967295));n[t+7]=s,s=s>>8,n[t+6]=s,s=s>>8,n[t+5]=s,s=s>>8,n[t+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=o,o=o>>8,n[t+2]=o,o=o>>8,n[t+1]=o,o=o>>8,n[t]=o,t+8}u.prototype.writeBigUInt64LE=fe(function(e,t=0){return Wn(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeBigUInt64BE=fe(function(e,t=0){return Yn(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*r-1);S(this,e,t,r,f-1,-f)}let s=0,o=1,c=0;for(this[t]=e&255;++s<r&&(o*=256);)e<0&&c===0&&this[t+s-1]!==0&&(c=1),this[t+s]=(e/o>>0)-c&255;return t+r};u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*r-1);S(this,e,t,r,f-1,-f)}let s=r-1,o=1,c=0;for(this[t+s]=e&255;--s>=0&&(o*=256);)e<0&&c===0&&this[t+s+1]!==0&&(c=1),this[t+s]=(e/o>>0)-c&255;return t+r};u.prototype.writeInt8=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};u.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};u.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};u.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};u.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};u.prototype.writeBigInt64LE=fe(function(e,t=0){return Wn(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});u.prototype.writeBigInt64BE=fe(function(e,t=0){return Yn(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Jn(n,e,t,r,i,s){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Xn(n,e,t,r,i){return e=+e,t=t>>>0,i||Jn(n,e,t,4,34028234663852886e22,-34028234663852886e22),je.write(n,e,t,r,23,4),t+4}u.prototype.writeFloatLE=function(e,t,r){return Xn(this,e,t,!0,r)};u.prototype.writeFloatBE=function(e,t,r){return Xn(this,e,t,!1,r)};function Qn(n,e,t,r,i){return e=+e,t=t>>>0,i||Jn(n,e,t,8,17976931348623157e292,-17976931348623157e292),je.write(n,e,t,r,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,r){return Qn(this,e,t,!0,r)};u.prototype.writeDoubleBE=function(e,t,r){return Qn(this,e,t,!1,r)};u.prototype.copy=function(e,t,r,i){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let s=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),s};u.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{let o=u.isBuffer(e)?e:u.from(e,i),c=o.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%c]}return this};var qe={};function Ar(n,e,t){qe[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Ar("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ar("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError);Ar("ERR_OUT_OF_RANGE",function(n,e,t){let r=`The value of "${n}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=jn(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=jn(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);function jn(n){let e="",t=n.length,r=n[0]==="-"?1:0;for(;t>=r+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function Bo(n,e,t){$e(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&ot(e,n.length-(t+1))}function Zn(n,e,t,r,i,s){if(n>t||n<e){let o=typeof e=="bigint"?"n":"",c;throw s>3?e===0||e===BigInt(0)?c=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:c=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:c=`>= ${e}${o} and <= ${t}${o}`,new qe.ERR_OUT_OF_RANGE("value",c,n)}Bo(r,i,s)}function $e(n,e){if(typeof n!="number")throw new qe.ERR_INVALID_ARG_TYPE(e,"number",n)}function ot(n,e,t){throw Math.floor(n)!==n?($e(n,t),new qe.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new qe.ERR_BUFFER_OUT_OF_BOUNDS:new qe.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}var Ao=/[^+/0-9A-Za-z-_]/g;function _o(n){if(n=n.split("=")[0],n=n.trim().replace(Ao,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function vr(n,e){e=e||1/0;let t,r=n.length,i=null,s=[];for(let o=0;o<r;++o){if(t=n.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Io(n){let e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function Lo(n,e){let t,r,i,s=[];for(let o=0;o<n.length&&!((e-=2)<0);++o)t=n.charCodeAt(o),r=t>>8,i=t%256,s.push(i),s.push(r);return s}function ei(n){return Er.toByteArray(_o(n))}function Ut(n,e,t,r){let i;for(i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function W(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function _r(n){return n!==n}var So=function(){let n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let r=t*16;for(let i=0;i<16;++i)e[r+i]=n[t]+n[i]}return e}();function fe(n){return typeof BigInt>"u"?Oo:n}function Oo(){throw new Error("BigInt not supported")}});var Lr=w((Du,ti)=>{"use strict";var Ir=null;ti.exports=function(){return Ir===null&&(Ir={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Ir}});var Ur=w(ri=>{"use strict";var Sr=V(),Uo=new Set(["buffer","view","utf8"]),Or=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Uo.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new Sr(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new Sr(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new Sr(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};ri.Encoding=Or});var kr=w(Ft=>{"use strict";var{Buffer:Fr}=Ct()||{},{Encoding:Nr}=Ur(),Co=Lr(),ct=class extends Nr{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ut({encode:this.encode,decode:e=>this.decode(Fr.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ut=class extends Nr{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new ct({encode:e=>{let t=this.encode(e);return Fr.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Cr=class extends Nr{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new ct({encode:e=>Fr.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=Co();return new ut({encode:r=>e.encode(this.encode(r)),decode:r=>this.decode(t.decode(r)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Ft.BufferFormat=ct;Ft.ViewFormat=ut;Ft.UTF8Format=Cr});var oi=w(Te=>{"use strict";var{Buffer:A}=Ct()||{Buffer:{isBuffer:()=>!1}},{textEncoder:ii,textDecoder:ni}=Lr()(),{BufferFormat:ft,ViewFormat:Rr,UTF8Format:si}=kr(),Nt=n=>n;Te.utf8=new si({encode:function(n){return A.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?ni.decode(n):String(n)},decode:Nt,name:"utf8",createViewTranscoder(){return new Rr({encode:function(n){return ArrayBuffer.isView(n)?n:ii.encode(n)},decode:function(n){return ni.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new ft({encode:function(n){return A.isBuffer(n)?n:ArrayBuffer.isView(n)?A.from(n.buffer,n.byteOffset,n.byteLength):A.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});Te.json=new si({encode:JSON.stringify,decode:JSON.parse,name:"json"});Te.buffer=new ft({encode:function(n){return A.isBuffer(n)?n:ArrayBuffer.isView(n)?A.from(n.buffer,n.byteOffset,n.byteLength):A.from(String(n),"utf8")},decode:Nt,name:"buffer",createViewTranscoder(){return new Rr({encode:function(n){return ArrayBuffer.isView(n)?n:A.from(String(n),"utf8")},decode:function(n){return A.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});Te.view=new Rr({encode:function(n){return ArrayBuffer.isView(n)?n:ii.encode(n)},decode:Nt,name:"view",createBufferTranscoder(){return new ft({encode:function(n){return A.isBuffer(n)?n:ArrayBuffer.isView(n)?A.from(n.buffer,n.byteOffset,n.byteLength):A.from(String(n),"utf8")},decode:Nt,name:`${this.name}+buffer`})}});Te.hex=new ft({encode:function(n){return A.isBuffer(n)?n:A.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});Te.base64=new ft({encode:function(n){return A.isBuffer(n)?n:A.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"})});var fi=w(ui=>{"use strict";var ci=V(),Rt=oi(),{Encoding:Fo}=Ur(),{BufferFormat:No,ViewFormat:ko,UTF8Format:Ro}=kr(),ht=Symbol("formats"),kt=Symbol("encodings"),Do=new Set(["buffer","view","utf8"]),Dr=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>Do.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kt]=new Map,this[ht]=new Set(e);for(let t in Rt)try{this.encoding(t)}catch(r){if(r.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw r}}encodings(){return Array.from(new Set(this[kt].values()))}encoding(e){let t=this[kt].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=qo[e],!t)throw new ci(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=Mo(e)}let{name:r,format:i}=t;if(!this[ht].has(i))if(this[ht].has("view"))t=t.createViewTranscoder();else if(this[ht].has("buffer"))t=t.createBufferTranscoder();else if(this[ht].has("utf8"))t=t.createUTF8Transcoder();else throw new ci(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[e,r,t.name,t.commonName])this[kt].set(s,t)}return t}};ui.Transcoder=Dr;function Mo(n){if(n instanceof Fo)return n;let e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${jo++}`;switch(Po(n)){case"view":return new ko({...n,name:t});case"utf8":return new Ro({...n,name:t});case"buffer":return new No({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Po(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}var Vo={binary:Rt.buffer,"utf-8":Rt.utf8},qo={...Rt,...Vo},jo=0});var xi=w((ju,Mr)=>{"use strict";var ze=typeof Reflect=="object"?Reflect:null,hi=ze&&typeof ze.apply=="function"?ze.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Dt;ze&&typeof ze.ownKeys=="function"?Dt=ze.ownKeys:Object.getOwnPropertySymbols?Dt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Dt=function(e){return Object.getOwnPropertyNames(e)};function $o(n){console&&console.warn&&console.warn(n)}var di=Number.isNaN||function(e){return e!==e};function x(){x.init.call(this)}Mr.exports=x;Mr.exports.once=Ho;x.EventEmitter=x;x.prototype._events=void 0;x.prototype._eventsCount=0;x.prototype._maxListeners=void 0;var ai=10;function Mt(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return ai},set:function(n){if(typeof n!="number"||n<0||di(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");ai=n}});x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};x.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||di(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function li(n){return n._maxListeners===void 0?x.defaultMaxListeners:n._maxListeners}x.prototype.getMaxListeners=function(){return li(this)};x.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var f=s[e];if(f===void 0)return!1;if(typeof f=="function")hi(f,this,t);else for(var h=f.length,d=wi(f,h),r=0;r<h;++r)hi(d[r],this,t);return!0};function pi(n,e,t,r){var i,s,o;if(Mt(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=li(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=o.length,$o(c)}return n}x.prototype.addListener=function(e,t){return pi(this,e,t,!1)};x.prototype.on=x.prototype.addListener;x.prototype.prependListener=function(e,t){return pi(this,e,t,!0)};function Ko(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yi(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=Ko.bind(r);return i.listener=t,r.wrapFn=i,i}x.prototype.once=function(e,t){return Mt(t),this.on(e,yi(this,e,t)),this};x.prototype.prependOnceListener=function(e,t){return Mt(t),this.prependListener(e,yi(this,e,t)),this};x.prototype.removeListener=function(e,t){var r,i,s,o,c;if(Mt(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){c=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():zo(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};x.prototype.off=x.prototype.removeListener;x.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function mi(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Go(i):wi(i,i.length)}x.prototype.listeners=function(e){return mi(this,e,!0)};x.prototype.rawListeners=function(e){return mi(this,e,!1)};x.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):gi.call(n,e)};x.prototype.listenerCount=gi;function gi(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?Dt(this._events):[]};function wi(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function zo(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Go(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Ho(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}Ei(n,e,s,{once:!0}),e!=="error"&&Wo(n,i,{once:!0})})}function Wo(n,e,t){typeof n.on=="function"&&Ei(n,"error",e,t)}function Ei(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}});var vi=w(($u,bi)=>{bi.exports=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n)});var at=w(Pr=>{"use strict";var Ti=vi();Pr.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(r,i){n=function(s,o){s?i(s):r(o)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};Pr.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){Ti(()=>e(null,t))}).catch(function(t){Ti(()=>e(t))})}});var Pt=w(Vr=>{"use strict";Vr.getCallback=function(n,e){return typeof n=="function"?n:e};Vr.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}}});var ye=w($t=>{"use strict";var{fromCallback:qr}=at(),U=V(),{getOptions:jr,getCallback:Bi}=Pt(),Be=Symbol("promise"),Ge=Symbol("callback"),Y=Symbol("working"),Ae=Symbol("handleOne"),te=Symbol("handleMany"),$r=Symbol("autoClose"),le=Symbol("finishWork"),J=Symbol("returnMany"),he=Symbol("closing"),dt=Symbol("handleClose"),Vt=Symbol("closed"),lt=Symbol("closeCallbacks"),de=Symbol("keyEncoding"),_e=Symbol("valueEncoding"),Kr=Symbol("abortOnClose"),qt=Symbol("legacy"),zr=Symbol("keys"),Gr=Symbol("values"),ae=Symbol("limit"),R=Symbol("count"),jt=Object.freeze({}),Yo=()=>{},Ai=!1,pt=class{constructor(e,t,r){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Vt]=!1,this[lt]=[],this[Y]=!1,this[he]=!1,this[$r]=!1,this[Ge]=null,this[Ae]=this[Ae].bind(this),this[te]=this[te].bind(this),this[dt]=this[dt].bind(this),this[de]=t[de],this[_e]=t[_e],this[qt]=r,this[ae]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[R]=0,this[Kr]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[R]}get limit(){return this[ae]}next(e){let t;if(e===void 0)t=new Promise((r,i)=>{e=(s,o,c)=>{s?i(s):this[qt]?o===void 0&&c===void 0?r():r([o,c]):r(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[he]?this.nextTick(e,new U("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Y]?this.nextTick(e,new U("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Y]=!0,this[Ge]=e,this[R]>=this[ae]?this.nextTick(this[Ae],null):this._next(this[Ae])),t}_next(e){this.nextTick(e)}nextv(e,t,r){return r=Bi(t,r),r=qr(r,Be),t=jr(t,jt),Number.isInteger(e)?(this[he]?this.nextTick(r,new U("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Y]?this.nextTick(r,new U("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[ae]<1/0&&(e=Math.min(e,this[ae]-this[R])),this[Y]=!0,this[Ge]=r,e<=0?this.nextTick(this[te],null,[]):this._nextv(e,t,this[te])),r[Be]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[Be])}_nextv(e,t,r){let i=[],s=(o,c,f)=>{if(o)return r(o);if(this[qt]?c===void 0&&f===void 0:c===void 0)return r(null,i);i.push(this[qt]?[c,f]:c),i.length===e?r(null,i):this._next(s)};this._next(s)}all(e,t){return t=Bi(e,t),t=qr(t,Be),e=jr(e,jt),this[he]?this.nextTick(t,new U("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Y]?this.nextTick(t,new U("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Y]=!0,this[Ge]=t,this[$r]=!0,this[R]>=this[ae]?this.nextTick(this[te],null,[]):this._all(e,this[te])),t[Be]}_all(e,t){let r=this[R],i=[],s=()=>{let c=this[ae]<1/0?Math.min(1e3,this[ae]-r):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,jt,o)},o=(c,f)=>{c?t(c):f.length===0?t(null,i):(i.push.apply(i,f),r+=f.length,s())};s()}[le](){let e=this[Ge];return this[Kr]&&e===null?Yo:(this[Y]=!1,this[Ge]=null,this[he]&&this._close(this[dt]),e)}[J](e,t,r){this[$r]?this.close(e.bind(null,t,r)):e(t,r)}seek(e,t){if(t=jr(t,jt),!this[he]){if(this[Y])throw new U("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let r=this.db.keyEncoding(t.keyEncoding||this[de]),i=r.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let s=this.db.prefixKey(r.encode(e),i);this._seek(s,t)}}}_seek(e,t){throw new U("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=qr(e,Be),this[Vt]?this.nextTick(e):this[he]?this[lt].push(e):(this[he]=!0,this[lt].push(e),this[Y]?this[Kr]&&this[le]()(new U("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[dt])),e[Be]}_close(e){this.nextTick(e)}[dt](){this[Vt]=!0,this.db.detachResource(this);let e=this[lt];this[lt]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Vt]||await this.close()}}},He=class extends pt{constructor(e,t){super(e,t,!0),this[zr]=t.keys!==!1,this[Gr]=t.values!==!1}[Ae](e,t,r){let i=this[le]();if(e)return i(e);try{t=this[zr]&&t!==void 0?this[de].decode(t):void 0,r=this[Gr]&&r!==void 0?this[_e].decode(r):void 0}catch(s){return i(new pe("entry",s))}t===void 0&&r===void 0||this[R]++,i(null,t,r)}[te](e,t){let r=this[le]();if(e)return this[J](r,e);try{for(let i of t){let s=i[0],o=i[1];i[0]=this[zr]&&s!==void 0?this[de].decode(s):void 0,i[1]=this[Gr]&&o!==void 0?this[_e].decode(o):void 0}}catch(i){return this[J](r,new pe("entries",i))}this[R]+=t.length,this[J](r,null,t)}end(e){return!Ai&&typeof console<"u"&&(Ai=!0,console.warn(new U("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Hr=class extends pt{constructor(e,t){super(e,t,!1)}[Ae](e,t){let r=this[le]();if(e)return r(e);try{t=t!==void 0?this[de].decode(t):void 0}catch(i){return r(new pe("key",i))}t!==void 0&&this[R]++,r(null,t)}[te](e,t){let r=this[le]();if(e)return this[J](r,e);try{for(let i=0;i<t.length;i++){let s=t[i];t[i]=s!==void 0?this[de].decode(s):void 0}}catch(i){return this[J](r,new pe("keys",i))}this[R]+=t.length,this[J](r,null,t)}},Wr=class extends pt{constructor(e,t){super(e,t,!1)}[Ae](e,t){let r=this[le]();if(e)return r(e);try{t=t!==void 0?this[_e].decode(t):void 0}catch(i){return r(new pe("value",i))}t!==void 0&&this[R]++,r(null,t)}[te](e,t){let r=this[le]();if(e)return this[J](r,e);try{for(let i=0;i<t.length;i++){let s=t[i];t[i]=s!==void 0?this[_e].decode(s):void 0}}catch(i){return this[J](r,new pe("values",i))}this[R]+=t.length,this[J](r,null,t)}},pe=class extends U{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let n of["_ended property","_nexting property","_end method"])Object.defineProperty(He.prototype,n.split(" ")[0],{get(){throw new U(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new U(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});He.keyEncoding=de;He.valueEncoding=_e;$t.AbstractIterator=He;$t.AbstractKeyIterator=Hr;$t.AbstractValueIterator=Wr});var _i=w(Yr=>{"use strict";var{AbstractKeyIterator:Jo,AbstractValueIterator:Xo}=ye(),Ie=Symbol("iterator"),yt=Symbol("callback"),We=Symbol("handleOne"),Le=Symbol("handleMany"),mt=class extends Jo{constructor(e,t){super(e,t),this[Ie]=e.iterator({...t,keys:!0,values:!1}),this[We]=this[We].bind(this),this[Le]=this[Le].bind(this)}},Kt=class extends Xo{constructor(e,t){super(e,t),this[Ie]=e.iterator({...t,keys:!1,values:!0}),this[We]=this[We].bind(this),this[Le]=this[Le].bind(this)}};for(let n of[mt,Kt]){let e=n===mt,t=e?r=>r[0]:r=>r[1];n.prototype._next=function(r){this[yt]=r,this[Ie].next(this[We])},n.prototype[We]=function(r,i,s){let o=this[yt];r?o(r):o(null,e?i:s)},n.prototype._nextv=function(r,i,s){this[yt]=s,this[Ie].nextv(r,i,this[Le])},n.prototype._all=function(r,i){this[yt]=i,this[Ie].all(r,this[Le])},n.prototype[Le]=function(r,i){let s=this[yt];r?s(r):s(null,i.map(t))},n.prototype._seek=function(r,i){this[Ie].seek(r,i)},n.prototype._close=function(r){this[Ie].close(r)}}Yr.DefaultKeyIterator=mt;Yr.DefaultValueIterator=Kt});var Ii=w(Jt=>{"use strict";var{AbstractIterator:Qo,AbstractKeyIterator:Zo,AbstractValueIterator:ec}=ye(),Jr=V(),O=Symbol("nut"),Wt=Symbol("undefer"),Yt=Symbol("factory"),zt=class extends Qo{constructor(e,t){super(e,t),this[O]=null,this[Yt]=()=>e.iterator(t),this.db.defer(()=>this[Wt]())}},Gt=class extends Zo{constructor(e,t){super(e,t),this[O]=null,this[Yt]=()=>e.keys(t),this.db.defer(()=>this[Wt]())}},Ht=class extends ec{constructor(e,t){super(e,t),this[O]=null,this[Yt]=()=>e.values(t),this.db.defer(()=>this[Wt]())}};for(let n of[zt,Gt,Ht])n.prototype[Wt]=function(){this.db.status==="open"&&(this[O]=this[Yt]())},n.prototype._next=function(e){this[O]!==null?this[O].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Jr("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,r){this[O]!==null?this[O].nextv(e,t,r):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,r)):this.nextTick(r,new Jr("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[O]!==null?this[O].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new Jr("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[O]!==null?this[O]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[O]!==null?this[O].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Jt.DeferredIterator=zt;Jt.DeferredKeyIterator=Gt;Jt.DeferredValueIterator=Ht});var Qr=w(Si=>{"use strict";var{fromCallback:Li}=at(),Xt=V(),{getCallback:tc,getOptions:rc}=Pt(),Qt=Symbol("promise"),D=Symbol("status"),Ye=Symbol("operations"),gt=Symbol("finishClose"),Je=Symbol("closeCallbacks"),Xr=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Ye]=[],this[Je]=[],this[D]="open",this[gt]=this[gt].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Ye].length}put(e,t,r){if(this[D]!=="open")throw new Xt("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let s=r&&r.sublevel!=null?r.sublevel:this.db,o=r,c=s.keyEncoding(r&&r.keyEncoding),f=s.valueEncoding(r&&r.valueEncoding),h=c.format;r={...r,keyEncoding:h,valueEncoding:f.format},s!==this.db&&(r.sublevel=null);let d=s.prefixKey(c.encode(e),h),a=f.encode(t);return this._put(d,a,r),this[Ye].push({...o,type:"put",key:e,value:t}),this}_put(e,t,r){}del(e,t){if(this[D]!=="open")throw new Xt("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let r=this.db._checkKey(e);if(r)throw r;let i=t&&t.sublevel!=null?t.sublevel:this.db,s=t,o=i.keyEncoding(t&&t.keyEncoding),c=o.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(o.encode(e),c),t),this[Ye].push({...s,type:"del",key:e}),this}_del(e,t){}clear(){if(this[D]!=="open")throw new Xt("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ye]=[],this}_clear(){}write(e,t){return t=tc(e,t),t=Li(t,Qt),e=rc(e),this[D]!=="open"?this.nextTick(t,new Xt("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[D]="writing",this._write(e,r=>{this[D]="closing",this[Je].push(()=>t(r)),r||this.db.emit("batch",this[Ye]),this._close(this[gt])})),t[Qt]}_write(e,t){}close(e){return e=Li(e,Qt),this[D]==="closing"?this[Je].push(e):this[D]==="closed"?this.nextTick(e):(this[Je].push(e),this[D]!=="writing"&&(this[D]="closing",this._close(this[gt]))),e[Qt]}_close(e){this.nextTick(e)}[gt](){this[D]="closed",this.db.detachResource(this);let e=this[Je];this[Je]=[];for(let t of e)t()}};Si.AbstractChainedBatch=Xr});var Ui=w(Oi=>{"use strict";var{AbstractChainedBatch:nc}=Qr(),ic=V(),Xe=Symbol("encoded"),Zr=class extends nc{constructor(e){super(e),this[Xe]=[]}_put(e,t,r){this[Xe].push({...r,type:"put",key:e,value:t})}_del(e,t){this[Xe].push({...t,type:"del",key:e})}_clear(){this[Xe]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[Xe].length===0?this.nextTick(t):this.db._batch(this[Xe],e,t):this.nextTick(t,new ic("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Oi.DefaultChainedBatch=Zr});var Ni=w((Xu,Fi)=>{"use strict";var Ci=V(),sc=Object.prototype.hasOwnProperty,oc=new Set(["lt","lte","gt","gte"]);Fi.exports=function(n,e){let t={};for(let r in n)if(sc.call(n,r)&&!(r==="keyEncoding"||r==="valueEncoding")){if(r==="start"||r==="end")throw new Ci(`The legacy range option '${r}' has been removed`,{code:"LEVEL_LEGACY"});if(r==="encoding")throw new Ci("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});oc.has(r)?t[r]=e.encode(n[r]):t[r]=n[r]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var en=w((Qu,Ri)=>{var ki;Ri.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):n=>(ki||(ki=Promise.resolve())).then(n).catch(e=>setTimeout(()=>{throw e},0))});var Pi=w((Zu,Mi)=>{"use strict";var Di=en();Mi.exports=function(n,...e){e.length===0?Di(n):Di(()=>n(...e))}});var Vi=w(Zt=>{"use strict";var{AbstractIterator:cc,AbstractKeyIterator:uc,AbstractValueIterator:fc}=ye(),Qe=Symbol("unfix"),q=Symbol("iterator"),Se=Symbol("handleOne"),me=Symbol("handleMany"),re=Symbol("callback"),wt=class extends cc{constructor(e,t,r,i){super(e,t),this[q]=r,this[Qe]=i,this[Se]=this[Se].bind(this),this[me]=this[me].bind(this),this[re]=null}[Se](e,t,r){let i=this[re];if(e)return i(e);t!==void 0&&(t=this[Qe](t)),i(e,t,r)}[me](e,t){let r=this[re];if(e)return r(e);for(let i of t){let s=i[0];s!==void 0&&(i[0]=this[Qe](s))}r(e,t)}},Et=class extends uc{constructor(e,t,r,i){super(e,t),this[q]=r,this[Qe]=i,this[Se]=this[Se].bind(this),this[me]=this[me].bind(this),this[re]=null}[Se](e,t){let r=this[re];if(e)return r(e);t!==void 0&&(t=this[Qe](t)),r(e,t)}[me](e,t){let r=this[re];if(e)return r(e);for(let i=0;i<t.length;i++){let s=t[i];s!==void 0&&(t[i]=this[Qe](s))}r(e,t)}},xt=class extends fc{constructor(e,t,r){super(e,t),this[q]=r}};for(let n of[wt,Et])n.prototype._next=function(e){this[re]=e,this[q].next(this[Se])},n.prototype._nextv=function(e,t,r){this[re]=r,this[q].nextv(e,t,this[me])},n.prototype._all=function(e,t){this[re]=t,this[q].all(e,this[me])};for(let n of[xt])n.prototype._next=function(e){this[q].next(e)},n.prototype._nextv=function(e,t,r){this[q].nextv(e,t,r)},n.prototype._all=function(e,t){this[q].all(e,t)};for(let n of[wt,Et,xt])n.prototype._seek=function(e,t){this[q].seek(e,t)},n.prototype._close=function(e){this[q].close(e)};Zt.AbstractSublevelIterator=wt;Zt.AbstractSublevelKeyIterator=Et;Zt.AbstractSublevelValueIterator=xt});var Ki=w((tf,$i)=>{"use strict";var tn=V(),{Buffer:sn}=Ct()||{},{AbstractSublevelIterator:hc,AbstractSublevelKeyIterator:ac,AbstractSublevelValueIterator:dc}=Vi(),ne=Symbol("prefix"),qi=Symbol("upperBound"),bt=Symbol("prefixRange"),C=Symbol("parent"),rn=Symbol("unfix"),ji=new TextEncoder,lc={separator:"!"};$i.exports=function({AbstractLevel:n}){class e extends n{static defaults(r){if(typeof r=="string")throw new tn("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(r&&r.open)throw new tn("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return r==null?lc:r.separator?r:{...r,separator:"!"}}constructor(r,i,s){let{separator:o,manifest:c,...f}=e.defaults(s);i=yc(i,o);let h=o.charCodeAt(0)+1,d=r[C]||r;if(!ji.encode(i).every(g=>g>h&&g<127))throw new tn(`Prefix must use bytes > ${h} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(pc(d,c),f);let a=(r.prefix||"")+o+i+o,l=a.slice(0,-1)+String.fromCharCode(h);this[C]=d,this[ne]=new er(a),this[qi]=new er(l),this[rn]=new on,this.nextTick=d.nextTick}prefixKey(r,i){if(i==="utf8")return this[ne].utf8+r;if(r.byteLength===0)return this[ne][i];if(i==="view"){let s=this[ne].view,o=new Uint8Array(s.byteLength+r.byteLength);return o.set(s,0),o.set(r,s.byteLength),o}else{let s=this[ne].buffer;return sn.concat([s,r],s.byteLength+r.byteLength)}}[bt](r,i){r.gte!==void 0?r.gte=this.prefixKey(r.gte,i):r.gt!==void 0?r.gt=this.prefixKey(r.gt,i):r.gte=this[ne][i],r.lte!==void 0?r.lte=this.prefixKey(r.lte,i):r.lt!==void 0?r.lt=this.prefixKey(r.lt,i):r.lte=this[qi][i]}get prefix(){return this[ne].utf8}get db(){return this[C]}_open(r,i){this[C].open({passive:!0},i)}_put(r,i,s,o){this[C].put(r,i,s,o)}_get(r,i,s){this[C].get(r,i,s)}_getMany(r,i,s){this[C].getMany(r,i,s)}_del(r,i,s){this[C].del(r,i,s)}_batch(r,i,s){this[C].batch(r,i,s)}_clear(r,i){this[bt](r,r.keyEncoding),this[C].clear(r,i)}_iterator(r){this[bt](r,r.keyEncoding);let i=this[C].iterator(r),s=this[rn].get(this[ne].utf8.length,r.keyEncoding);return new hc(this,r,i,s)}_keys(r){this[bt](r,r.keyEncoding);let i=this[C].keys(r),s=this[rn].get(this[ne].utf8.length,r.keyEncoding);return new ac(this,r,i,s)}_values(r){this[bt](r,r.keyEncoding);let i=this[C].values(r);return new dc(this,r,i)}}return{AbstractSublevel:e}};var pc=function(n,e){return{...n.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:nn(n,"utf8"),buffer:nn(n,"buffer"),view:nn(n,"view")}}},nn=function(n,e){return n.supports.encodings[e]?n.keyEncoding(e).name===e:!1},er=class{constructor(e){this.utf8=e,this.view=ji.encode(e),this.buffer=sn?sn.from(this.view.buffer,0,this.view.byteLength):{}}},on=class{constructor(){this.cache=new Map}get(e,t){let r=this.cache.get(t);return r===void 0&&(t==="view"?r=function(i,s){return s.subarray(i)}.bind(null,e):r=function(i,s){return s.slice(i)}.bind(null,e),this.cache.set(t,r)),r}},yc=function(n,e){let t=0,r=n.length;for(;t<r&&n[t]===e;)t++;for(;r>t&&n[r-1]===e;)r--;return n.slice(t,r)}});var an=w(hn=>{"use strict";var{supports:mc}=Fn(),{Transcoder:gc}=fi(),{EventEmitter:wc}=xi(),{fromCallback:ge}=at(),j=V(),{AbstractIterator:Oe}=ye(),{DefaultKeyIterator:Ec,DefaultValueIterator:xc}=_i(),{DeferredIterator:bc,DeferredKeyIterator:vc,DeferredValueIterator:Tc}=Ii(),{DefaultChainedBatch:zi}=Ui(),{getCallback:Ue,getOptions:we}=Pt(),tr=Ni(),y=Symbol("promise"),ie=Symbol("landed"),Ce=Symbol("resources"),cn=Symbol("closeResources"),vt=Symbol("operations"),Tt=Symbol("undefer"),rr=Symbol("deferOpen"),Gi=Symbol("options"),m=Symbol("status"),Fe=Symbol("defaultOptions"),Ze=Symbol("transcoder"),nr=Symbol("keyEncoding"),un=Symbol("valueEncoding"),Bc=()=>{},Bt=class extends wc{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=we(t);let{keyEncoding:r,valueEncoding:i,passive:s,...o}=t;this[Ce]=new Set,this[vt]=[],this[rr]=!0,this[Gi]=o,this[m]="opening",this.supports=mc(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Ze]=new gc(Ac(this)),this[nr]=this[Ze].encoding(r||"utf8"),this[un]=this[Ze].encoding(i||"utf8");for(let c of this[Ze].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[Fe]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[nr].commonName,valueEncoding:this[un].commonName}),key:Object.freeze({keyEncoding:this[nr].commonName})},this.nextTick(()=>{this[rr]&&this.open({passive:!1},Bc)})}get status(){return this[m]}keyEncoding(e){return this[Ze].encoding(e??this[nr])}valueEncoding(e){return this[Ze].encoding(e??this[un])}open(e,t){t=Ue(e,t),t=ge(t,y),e={...this[Gi],...we(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let r=i=>{this[m]==="closing"||this[m]==="opening"?this.once(ie,i?()=>r(i):r):this[m]!=="open"?t(new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[m]==="opening"?this.once(ie,r):this.nextTick(r):this[m]==="closed"||this[rr]?(this[rr]=!1,this[m]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[m]="closed",this[cn](()=>{this.emit(ie),r(i)}),this[Tt]();return}this[m]="open",this[Tt](),this.emit(ie),this[m]==="open"&&this.emit("open"),this[m]==="open"&&this.emit("ready"),r()})):this[m]==="open"?this.nextTick(r):this.once(ie,()=>this.open(e,t)),t[y]}_open(e,t){this.nextTick(t)}close(e){e=ge(e,y);let t=r=>{this[m]==="opening"||this[m]==="closing"?this.once(ie,r?t(r):t):this[m]!=="closed"?e(new j("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):e()};if(this[m]==="open"){this[m]="closing",this.emit("closing");let r=i=>{this[m]="open",this[Tt](),this.emit(ie),t(i)};this[cn](()=>{this._close(i=>{if(i)return r(i);this[m]="closed",this[Tt](),this.emit(ie),this[m]==="closed"&&this.emit("closed"),t()})})}else this[m]==="closed"?this.nextTick(t):this.once(ie,()=>this.close(e));return e[y]}[cn](e){if(this[Ce].size===0)return this.nextTick(e);let t=this[Ce].size,r=!0,i=()=>{--t===0&&(r?this.nextTick(e):e())};for(let s of this[Ce])s.close(i);r=!1,this[Ce].clear()}_close(e){this.nextTick(e)}get(e,t,r){if(r=Ue(t,r),r=ge(r,y),t=we(t,this[Fe].entry),this[m]==="opening")return this.defer(()=>this.get(e,t,r)),r[y];if(et(this,r))return r[y];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[y];let s=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),c=s.format,f=o.format;return(t.keyEncoding!==c||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:f})),this._get(this.prefixKey(s.encode(e),c),t,(h,d)=>{if(h)return(h.code==="LEVEL_NOT_FOUND"||h.notFound||/NotFound/i.test(h))&&(h.code||(h.code="LEVEL_NOT_FOUND"),h.notFound||(h.notFound=!0),h.status||(h.status=404)),r(h);try{d=o.decode(d)}catch(a){return r(new j("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:a}))}r(null,d)}),r[y]}_get(e,t,r){this.nextTick(r,new Error("NotFound"))}getMany(e,t,r){if(r=Ue(t,r),r=ge(r,y),t=we(t,this[Fe].entry),this[m]==="opening")return this.defer(()=>this.getMany(e,t,r)),r[y];if(et(this,r))return r[y];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[y];if(e.length===0)return this.nextTick(r,null,[]),r[y];let i=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),o=i.format,c=s.format;(t.keyEncoding!==o||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:o,valueEncoding:c}));let f=new Array(e.length);for(let h=0;h<e.length;h++){let d=e[h],a=this._checkKey(d);if(a)return this.nextTick(r,a),r[y];f[h]=this.prefixKey(i.encode(d),o)}return this._getMany(f,t,(h,d)=>{if(h)return r(h);try{for(let a=0;a<d.length;a++)d[a]!==void 0&&(d[a]=s.decode(d[a]))}catch(a){return r(new j(`Could not decode one or more of ${d.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:a}))}r(null,d)}),r[y]}_getMany(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}put(e,t,r,i){if(i=Ue(r,i),i=ge(i,y),r=we(r,this[Fe].entry),this[m]==="opening")return this.defer(()=>this.put(e,t,r,i)),i[y];if(et(this,i))return i[y];let s=this._checkKey(e)||this._checkValue(t);if(s)return this.nextTick(i,s),i[y];let o=this.keyEncoding(r.keyEncoding),c=this.valueEncoding(r.valueEncoding),f=o.format,h=c.format;(r.keyEncoding!==f||r.valueEncoding!==h)&&(r=Object.assign({},r,{keyEncoding:f,valueEncoding:h}));let d=this.prefixKey(o.encode(e),f),a=c.encode(t);return this._put(d,a,r,l=>{if(l)return i(l);this.emit("put",e,t),i()}),i[y]}_put(e,t,r,i){this.nextTick(i)}del(e,t,r){if(r=Ue(t,r),r=ge(r,y),t=we(t,this[Fe].key),this[m]==="opening")return this.defer(()=>this.del(e,t,r)),r[y];if(et(this,r))return r[y];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[y];let s=this.keyEncoding(t.keyEncoding),o=s.format;return t.keyEncoding!==o&&(t=Object.assign({},t,{keyEncoding:o})),this._del(this.prefixKey(s.encode(e),o),t,c=>{if(c)return r(c);this.emit("del",e),r()}),r[y]}_del(e,t,r){this.nextTick(r)}batch(e,t,r){if(!arguments.length){if(this[m]==="opening")return new zi(this);if(this[m]!=="open")throw new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?r=e:r=Ue(t,r),r=ge(r,y),t=we(t,this[Fe].empty),this[m]==="opening")return this.defer(()=>this.batch(e,t,r)),r[y];if(et(this,r))return r[y];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[y];if(e.length===0)return this.nextTick(r),r[y];let i=new Array(e.length),{keyEncoding:s,valueEncoding:o,...c}=t;for(let f=0;f<e.length;f++){if(typeof e[f]!="object"||e[f]===null)return this.nextTick(r,new TypeError("A batch operation must be an object")),r[y];let h=Object.assign({},e[f]);if(h.type!=="put"&&h.type!=="del")return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[y];let d=this._checkKey(h.key);if(d)return this.nextTick(r,d),r[y];let a=h.sublevel!=null?h.sublevel:this,l=a.keyEncoding(h.keyEncoding||s),g=l.format;if(h.key=a.prefixKey(l.encode(h.key),g),h.keyEncoding=g,h.type==="put"){let p=this._checkValue(h.value);if(p)return this.nextTick(r,p),r[y];let E=a.valueEncoding(h.valueEncoding||o);h.value=E.encode(h.value),h.valueEncoding=E.format}a!==this&&(h.sublevel=null),i[f]=h}return this._batch(i,c,f=>{if(f)return r(f);this.emit("batch",e),r()}),r[y]}_batch(e,t,r){this.nextTick(r)}sublevel(e,t){return this._sublevel(e,fn.defaults(t))}_sublevel(e,t){return new fn(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Ue(e,t),t=ge(t,y),e=we(e,this[Fe].empty),this[m]==="opening")return this.defer(()=>this.clear(e,t)),t[y];if(et(this,t))return t[y];let r=e,i=this.keyEncoding(e.keyEncoding);return e=tr(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,s=>{if(s)return t(s);this.emit("clear",r),t()}),t[y]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=tr(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Oe.keyEncoding]=t,e[Oe.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[m]==="opening")return new bc(this,e);if(this[m]!=="open")throw new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Oe(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=tr(e,t),e[Oe.keyEncoding]=t,e[Oe.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[m]==="opening")return new vc(this,e);if(this[m]!=="open")throw new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new Ec(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=tr(e,t),e[Oe.keyEncoding]=t,e[Oe.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[m]==="opening")return new Tc(this,e);if(this[m]!=="open")throw new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new xc(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[vt].push(e)}[Tt](){if(this[vt].length===0)return;let e=this[vt];this[vt]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Ce].add(e)}detachResource(e){this[Ce].delete(e)}_chainedBatch(){return new zi(this)}_checkKey(e){if(e==null)return new j("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new j("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Bt.prototype.nextTick=Pi();var{AbstractSublevel:fn}=Ki()({AbstractLevel:Bt});hn.AbstractLevel=Bt;hn.AbstractSublevel=fn;var et=function(n,e){return n[m]!=="open"?(n.nextTick(e,new j("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Ac=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])}});var dn=w(Ne=>{"use strict";Ne.AbstractLevel=an().AbstractLevel;Ne.AbstractSublevel=an().AbstractSublevel;Ne.AbstractIterator=ye().AbstractIterator;Ne.AbstractKeyIterator=ye().AbstractKeyIterator;Ne.AbstractValueIterator=ye().AbstractValueIterator;Ne.AbstractChainedBatch=Qr().AbstractChainedBatch});var Wi=w((sf,Hi)=>{Hi.exports=Ic;var _c=en();function Ic(n,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let r,i,s,o,c,f=!0,h;Array.isArray(n)?(r=[],s=i=n.length):(o=Object.keys(n),r={},s=i=o.length);function d(l){function g(){t&&t(l,r),t=null}f?_c(g):g()}function a(l,g,p){if(r[l]=p,g&&(c=!0),--s===0||g)d(g);else if(!c&&h<i){let E;o?(E=o[h],h+=1,n[E](function(M,_){a(E,M,_)})):(E=h,h+=1,n[E](function(M,_){a(E,M,_)}))}}h=e,s?o?o.some(function(l,g){return n[l](function(p,E){a(l,p,E)}),g===e-1}):n.some(function(l,g){return l(function(p,E){a(g,p,E)}),g===e-1}):d(null),f=!1}});var ln=w((of,Yi)=>{"use strict";Yi.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,r=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,s=e.lte===void 0;return t!==void 0&&r!==void 0?IDBKeyRange.bound(t,r,i,s):t!==void 0?IDBKeyRange.lowerBound(t,i):r!==void 0?IDBKeyRange.upperBound(r,s):null}});var pn=w((cf,Ji)=>{"use strict";var Lc=new TextEncoder;Ji.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):Lc.encode(n)}});var ts=w(es=>{"use strict";var{AbstractIterator:Sc}=dn(),Xi=ln(),ir=pn(),X=Symbol("cache"),se=Symbol("finished"),F=Symbol("options"),oe=Symbol("currentOptions"),ke=Symbol("position"),yn=Symbol("location"),tt=Symbol("first"),Qi={},mn=class extends Sc{constructor(e,t,r){super(e,r),this[X]=[],this[se]=this.limit===0,this[F]=r,this[oe]={...r},this[ke]=void 0,this[yn]=t,this[tt]=!0}_nextv(e,t,r){if(this[tt]=!1,this[se])return this.nextTick(r,null,[]);if(this[X].length>0)return e=Math.min(e,this[X].length),this.nextTick(r,null,this[X].splice(0,e));this[ke]!==void 0&&(this[F].reverse?(this[oe].lt=this[ke],this[oe].lte=void 0):(this[oe].gt=this[ke],this[oe].gte=void 0));let i;try{i=Xi(this[oe])}catch{return this[se]=!0,this.nextTick(r,null,[])}let s=this.db.db.transaction([this[yn]],"readonly"),o=s.objectStore(this[yn]),c=[];if(this[F].reverse){let f=!this[F].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[f](i,"prev").onsuccess=h=>{let d=h.target.result;if(d){let{key:a,value:l}=d;this[ke]=a,c.push([this[F].keys&&a!==void 0?ir(a):void 0,this[F].values&&l!==void 0?ir(l):void 0]),c.length<e?d.continue():Zi(s)}else this[se]=!0}}else{let f,h,d=()=>{if(f===void 0||h===void 0)return;let a=Math.max(f.length,h.length);a===0||e===1/0?this[se]=!0:this[ke]=f[a-1],c.length=a;for(let l=0;l<a;l++){let g=f[l],p=h[l];c[l]=[this[F].keys&&g!==void 0?ir(g):void 0,this[F].values&&p!==void 0?ir(p):void 0]}Zi(s)};this[F].keys||e<1/0?o.getAllKeys(i,e<1/0?e:void 0).onsuccess=a=>{f=a.target.result,d()}:(f=[],this.nextTick(d)),this[F].values?o.getAll(i,e<1/0?e:void 0).onsuccess=a=>{h=a.target.result,d()}:(h=[],this.nextTick(d))}s.onabort=()=>{r(s.error||new Error("aborted by user")),r=null},s.oncomplete=()=>{r(null,c),r=null}}_next(e){if(this[X].length>0){let[t,r]=this[X].shift();this.nextTick(e,null,t,r)}else if(this[se])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[tt]&&(this[tt]=!1,t=1),this._nextv(t,Qi,(r,i)=>{if(r)return e(r);this[X]=i,this._next(e)})}}_all(e,t){this[tt]=!1;let r=this[X].splice(0,this[X].length),i=this.limit-this.count-r.length;if(i<=0)return this.nextTick(t,null,r);this._nextv(i,Qi,(s,o)=>{if(s)return t(s);r.length>0&&(o=r.concat(o)),t(null,o)})}_seek(e,t){this[tt]=!0,this[X]=[],this[se]=!1,this[ke]=void 0,this[oe]={...this[F]};let r;try{r=Xi(this[F])}catch{this[se]=!0;return}r!==null&&!r.includes(e)?this[se]=!0:this[F].reverse?this[oe].lte=e:this[oe].gte=e}};es.Iterator=mn;function Zi(n){typeof n.commit=="function"&&n.commit()}});var ns=w((ff,rs)=>{"use strict";rs.exports=function(e,t,r,i,s){if(i.limit===0)return e.nextTick(s);let o=e.db.transaction([t],"readwrite"),c=o.objectStore(t),f=0;o.oncomplete=function(){s()},o.onabort=function(){s(o.error||new Error("aborted by user"))};let h=c.openKeyCursor?"openKeyCursor":"openCursor",d=i.reverse?"prev":"next";c[h](r,d).onsuccess=function(a){let l=a.target.result;l&&(c.delete(l.key).onsuccess=function(){(i.limit<=0||++f<i.limit)&&l.continue()})}}});var fs=w(us=>{"use strict";var{AbstractLevel:Oc}=dn(),is=V(),Uc=Wi(),{fromCallback:Cc}=at(),{Iterator:Fc}=ts(),ss=pn(),Nc=ns(),kc=ln(),cs="level-js-",At=Symbol("idb"),gn=Symbol("namePrefix"),ce=Symbol("location"),wn=Symbol("version"),Re=Symbol("store"),_t=Symbol("onComplete"),os=Symbol("promise"),sr=class extends Oc{constructor(e,t,r){if(typeof t=="function"||typeof r=="function")throw new is("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:s,...o}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[ce]=e,this[gn]=i??cs,this[wn]=parseInt(s||1,10),this[At]=null}get location(){return this[ce]}get namePrefix(){return this[gn]}get version(){return this[wn]}get db(){return this[At]}get type(){return"browser-level"}_open(e,t){let r=indexedDB.open(this[gn]+this[ce],this[wn]);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[At]=r.result,t()},r.onupgradeneeded=i=>{let s=i.target.result;s.objectStoreNames.contains(this[ce])||s.createObjectStore(this[ce])}}[Re](e){return this[At].transaction([this[ce]],e).objectStore(this[ce])}[_t](e,t){let r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}_get(e,t,r){let i=this[Re]("readonly"),s;try{s=i.get(e)}catch(o){return this.nextTick(r,o)}this[_t](s,function(o,c){if(o)return r(o);if(c===void 0)return r(new is("Entry not found",{code:"LEVEL_NOT_FOUND"}));r(null,ss(c))})}_getMany(e,t,r){let i=this[Re]("readonly"),s=e.map(o=>c=>{let f;try{f=i.get(o)}catch(h){return c(h)}f.onsuccess=()=>{let h=f.result;c(null,h===void 0?h:ss(h))},f.onerror=h=>{h.stopPropagation(),c(f.error)}});Uc(s,16,r)}_del(e,t,r){let i=this[Re]("readwrite"),s;try{s=i.delete(e)}catch(o){return this.nextTick(r,o)}this[_t](s,r)}_put(e,t,r,i){let s=this[Re]("readwrite"),o;try{o=s.put(t,e)}catch(c){return this.nextTick(i,c)}this[_t](o,i)}_iterator(e){return new Fc(this,this[ce],e)}_batch(e,t,r){let i=this[Re]("readwrite"),s=i.transaction,o=0,c;s.onabort=function(){r(c||s.error||new Error("aborted by user"))},s.oncomplete=function(){r()};function f(){let h=e[o++],d=h.key,a;try{a=h.type==="del"?i.delete(d):i.put(h.value,d)}catch(l){c=l,s.abort();return}o<e.length?a.onsuccess=f:typeof s.commit=="function"&&s.commit()}f()}_clear(e,t){let r,i;try{r=kc(e)}catch{return this.nextTick(t)}if(e.limit>=0)return Nc(this,this[ce],r,e,t);try{let s=this[Re]("readwrite");i=r?s.delete(r):s.clear()}catch(s){return this.nextTick(t,s)}this[_t](i,t)}_close(e){this[At].close(),this.nextTick(e)}};sr.destroy=function(n,e,t){typeof e=="function"&&(t=e,e=cs),t=Cc(t,os);let r=indexedDB.deleteDatabase(e+n);return r.onsuccess=function(){t()},r.onerror=function(i){t(i)},t[os]};us.BrowserLevel=sr});var as=w(hs=>{hs.Level=fs().BrowserLevel});function vs(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,f=n.charAt(0),h=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function a(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var E=0,M=0,_=0,$=p.length;_!==$&&p[_]===0;)_++,E++;for(var K=($-_)*d+1>>>0,N=new Uint8Array(K);_!==$;){for(var z=p[_],ue=0,P=K-1;(z!==0||ue<M)&&P!==-1;P--,ue++)z+=256*N[P]>>>0,N[P]=z%c>>>0,z=z/c>>>0;if(z!==0)throw new Error("Non-zero carry");M=ue,_++}for(var Q=K-M;Q!==K&&N[Q]===0;)Q++;for(var It=f.repeat(E);Q<K;++Q)It+=n.charAt(N[Q]);return It}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var E=0;if(p[E]!==" "){for(var M=0,_=0;p[E]===f;)M++,E++;for(var $=(p.length-E)*h+1>>>0,K=new Uint8Array($);p[E];){var N=t[p.charCodeAt(E)];if(N===255)return;for(var z=0,ue=$-1;(N!==0||z<_)&&ue!==-1;ue--,z++)N+=c*K[ue]>>>0,K[ue]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");_=z,E++}if(p[E]!==" "){for(var P=$-_;P!==$&&K[P]===0;)P++;for(var Q=new Uint8Array(M+($-P)),It=M;P!==$;)Q[It++]=K[P++];return Q}}}function g(p){var E=l(p);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:a,decodeUnsafe:l,decode:g}}var Ts=vs,Bs=Ts,En=Bs;var $c=new Uint8Array(0);var xn=(n,e)=>{if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0},De=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};var ur=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fr=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bn(this,e)}},hr=class{constructor(e){this.decoders=e}or(e){return bn(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},bn=(n,e)=>new hr({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}}),ar=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new ur(e,t,r),this.decoder=new fr(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},vn=({name:n,prefix:e,encode:t,decode:r})=>new ar(n,e,t,r),dr=({prefix:n,name:e,alphabet:t})=>{let{encode:r,decode:i}=En(t,e);return vn({prefix:n,name:e,encode:r,decode:s=>De(i(s))})},_s=(n,e,t,r)=>{let i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=n.length;for(;n[s-1]==="=";)--s;let o=new Uint8Array(s*t/8|0),c=0,f=0,h=0;for(let d=0;d<s;++d){let a=i[n[d]];if(a===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<t|a,c+=t,c>=8&&(c-=8,o[h++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return o},Is=(n,e,t)=>{let r=e[e.length-1]==="=",i=(1<<t)-1,s="",o=0,c=0;for(let f=0;f<n.length;++f)for(c=c<<8|n[f],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},I=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>vn({prefix:e,name:n,encode(i){return Is(i,r,t)},decode(i){return _s(i,r,t,n)}});var L=dr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wc=dr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Xc=I({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qc=I({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),G=I({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zc=I({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Tn(n){return n.byteOffset!==0||n.byteLength!==n.buffer.byteLength}function Me(n){let t=Object.prototype.toString.call(n).match(/\s([a-zA-Z0-9]+)/),[r,i]=t;return i}var Lt=new TextEncoder,rt=new TextDecoder,v=class{constructor(e,t){this.data=e,this.format=t}static arrayBuffer(e){return new v(e,"ArrayBuffer")}static base58Btc(e){return new v(e,"Base58Btc")}static base64Url(e){return new v(e,"Base64Url")}static bufferSource(e){return new v(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new v(e,"Hex")}static multibase(e){return new v(e,"Multibase")}static object(e){return new v(e,"Object")}static string(e){return new v(e,"String")}static uint8Array(e){return new v(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return L.baseDecode(this.data).buffer;case"Base64Url":return G.baseDecode(this.data).buffer;case"BufferSource":{if(Me(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Tn(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return L.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return L.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return G.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return G.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),t=Lt.encode(e);return G.baseEncode(t)}case"String":{let e=Lt.encode(this.data);return G.baseEncode(e)}case"Uint8Array":return G.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toHex(){let e=Array.from({length:256},(t,r)=>r.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let t=this.toUint8Array();return v.uint8Array(t).toHex()}case"Base64Url":{let t=this.toUint8Array();return v.uint8Array(t).toHex()}case"Uint8Array":{let t="";for(let r=0;r<this.data.length;r++)t+=e[this.data[r]];return t}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=G.baseDecode(this.data),t=rt.decode(e);return JSON.parse(t)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=rt.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toString(){switch(this.format){case"ArrayBuffer":return rt.decode(this.data);case"Base64Url":{let e=G.baseDecode(this.data);return rt.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return rt.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base58Btc":return L.baseDecode(this.data);case"Base64Url":return G.baseDecode(this.data);case"BufferSource":{let e=Me(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let t=0;t<this.data.length;t+=2){let r=parseInt(this.data.substring(t,t+2),16);if(isNaN(r))throw new TypeError("Input is not a valid hexadecimal string.");e[t/2]=r}return e}case"Object":{let e=JSON.stringify(this.data);return Lt.encode(e)}case"String":return Lt.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}};var Z={};Es(Z,{decode:()=>Pe,encodeTo:()=>Ee,encodingLength:()=>xe});var Ls=_n,Bn=128,Ss=127,Os=~Ss,Us=Math.pow(2,31);function _n(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Us;)e[t++]=n&255|Bn,n/=128;for(;n&Os;)e[t++]=n&255|Bn,n>>>=7;return e[t]=n|0,_n.bytes=t-r+1,e}var Cs=lr,Fs=128,An=127;function lr(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw lr.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&An)<<i:(o&An)*Math.pow(2,i),i+=7}while(o>=Fs);return lr.bytes=s-r,t}var Ns=Math.pow(2,7),ks=Math.pow(2,14),Rs=Math.pow(2,21),Ds=Math.pow(2,28),Ms=Math.pow(2,35),Ps=Math.pow(2,42),Vs=Math.pow(2,49),qs=Math.pow(2,56),js=Math.pow(2,63),$s=function(n){return n<Ns?1:n<ks?2:n<Rs?3:n<Ds?4:n<Ms?5:n<Ps?6:n<Vs?7:n<qs?8:n<js?9:10},Ks={encode:Ls,decode:Cs,encodingLength:$s},zs=Ks,nt=zs;var Pe=(n,e=0)=>[nt.decode(n,e),nt.decode.bytes],Ee=(n,e,t=0)=>(nt.encode(n,e,t),e),xe=n=>nt.encodingLength(n);var pr=(n,e)=>{let t=e.byteLength,r=xe(n),i=r+xe(t),s=new Uint8Array(i+t);return Ee(n,s,0),Ee(t,s,r),s.set(e,i),new Ve(n,t,e,s)},In=n=>{let e=De(n),[t,r]=Pe(e),[i,s]=Pe(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Ve(t,i,o,e)},Ln=(n,e)=>{if(n===e)return!0;{let t=e;return n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&xn(n.bytes,t.bytes)}},Ve=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};var it=I({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hu=I({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),au=I({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),du=I({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lu=I({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pu=I({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yu=I({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mu=I({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gu=I({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sn=(n,e)=>{let{bytes:t,version:r}=n;switch(r){case 0:return Hs(t,mr(n),e||L.encoder);default:return Ws(t,mr(n),e||it.encoder)}};var On=new WeakMap,mr=n=>{let e=On.get(n);if(e==null){let t=new Map;return On.set(n,t),t}return e},T=class{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==st)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ys)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return T.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=pr(e,t);return T.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return T.equals(this,e)}static equals(e,t){let r=t;return r&&e.code===r.code&&e.version===r.version&&Ln(e.multihash,r.multihash)}toString(e){return Sn(this,e)}toJSON(){return{"/":Sn(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof T)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:r,code:i,multihash:s,bytes:o}=t;return new T(r,i,s,o||Un(r,i,s.bytes))}else if(t[Js]===!0){let{version:r,multihash:i,code:s}=t,o=In(i);return T.create(r,s,o)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==st)throw new Error(`Version 0 CID must use dag-pb (code: ${st}) block encoding`);return new T(e,t,r,r.bytes)}case 1:{let i=Un(e,t,r.bytes);return new T(e,t,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return T.create(0,st,e)}static createV1(e,t){return T.create(1,e,t)}static decode(e){let[t,r]=T.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=T.inspectBytes(e),r=t.size-t.multihashSize,i=De(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let s=i.subarray(t.multihashSize-t.digestSize),o=new Ve(t.multihashCode,t.digestSize,s,i);return[t.version===0?T.createV0(o):T.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[a,l]=Pe(e.subarray(t));return t+=l,a},i=r(),s=st;if(i===18?(i=0,t=0):s=r(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=t,c=r(),f=r(),h=t+f,d=h-o;return{version:i,codec:s,multihashCode:c,digestSize:f,multihashSize:d,size:h}}static parse(e,t){let[r,i]=Gs(e,t),s=T.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return mr(s).set(r,e),s}},Gs=(n,e)=>{switch(n[0]){case"Q":{let t=e||L;return[L.prefix,t.decode(`${L.prefix}${n}`)]}case L.prefix:{let t=e||L;return[L.prefix,t.decode(n)]}case it.prefix:{let t=e||it;return[it.prefix,t.decode(n)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],e.decode(n)]}}},Hs=(n,e,t)=>{let{prefix:r}=t;if(r!==L.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(r);if(i==null){let s=t.encode(n).slice(1);return e.set(r,s),s}else return i},Ws=(n,e,t)=>{let{prefix:r}=t,i=e.get(r);if(i==null){let s=t.encode(n);return e.set(r,s),s}else return i},st=112,Ys=18,Un=(n,e,t)=>{let r=xe(n),i=r+xe(e),s=new Uint8Array(i+t.byteLength);return Ee(n,s,0),Ee(e,s,r),s.set(t,i),s},Js=Symbol.for("@ipld/js-cid/CID");var b=class{static addPrefix(e){var t;let{code:r,data:i,name:s}=e;if(!(s?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(r=b.codeToName.has(r)?r:b.nameToCode.get(s),r===void 0)throw new Error(`Unsupported multicodec: ${(t=e.name)!==null&&t!==void 0?t:e.code}`);let o=Z.encodingLength(r),c=new Uint8Array(o+i.byteLength);return c.set(i,o),Z.encodeTo(r,c),c}static getCodeFromData(e){let{prefixedData:t}=e,[r,i]=Z.decode(t);return r}static getCodeFromName(e){let{name:t}=e,r=b.nameToCode.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static getNameFromCode(e){let{code:t}=e,r=b.codeToName.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static registerCodec(e){b.codeToName.set(e.code,e.name),b.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:t}=e,[r,i]=Z.decode(t),s=b.codeToName.get(r);if(s===void 0)throw new Error(`Unsupported multicodec: ${r}`);return{code:r,data:t.slice(i),name:s}}};b.codeToName=new Map;b.nameToCode=new Map;b.registerCodec({code:237,name:"ed25519-pub"});b.registerCodec({code:4864,name:"ed25519-priv"});b.registerCodec({code:236,name:"x25519-pub"});b.registerCodec({code:4866,name:"x25519-priv"});b.registerCodec({code:231,name:"secp256k1-pub"});b.registerCodec({code:4865,name:"secp256k1-priv"});var Rc=bs(as(),1);var or=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Dc=n=>n instanceof Uint8Array;var Mc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Mc)throw new Error("Non little-endian hardware is not supported");var Pc=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ds(n){if(!Dc(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Pc[n[t]];return e}function ls(n=32){if(or&&typeof or.getRandomValues=="function")return or.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Bf(n){if(!n||n.property===void 0||n.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:t}=n;if(!(e in t))throw new TypeError(`Required parameter missing: '${e}'`)}function Af(n){if(!n||n.property===void 0||n.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:t}=n;if(Array.isArray(t)&&!t.includes(e)||t instanceof Set&&!t.has(e)||t instanceof Map&&!t.has(e)){let r=Array.from(t instanceof Map?t.keys():t).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${r}'`)}}function _f(n){return!!(n&&"privateKey"in n&&"publicKey"in n&&Me(n.privateKey)==="Uint8Array"&&Me(n.publicKey)==="Uint8Array")}function If(n){return n&&"privateKey"in n&&"publicKey"in n}function Lf(n){let{key:e,multicodecCode:t,multicodecName:r}=n,i=b.addPrefix({code:t,data:e,name:r}),s=v.uint8Array(i).toBase58Btc();return v.base58Btc(s).toMultibase()}function Sf(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function Of(n){let{multibaseKeyId:e}=n,t=v.multibase(e).toBase58Btc(),r=v.base58Btc(t).toUint8Array(),{code:i,data:s,name:o}=b.removePrefix({prefixedData:r});return{key:s,multicodecCode:i,multicodecName:o}}function Vc(n){return ls(n)}function Uf(){let n=Vc(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;let e=ds(n);n.fill(0);let t=[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)],r=t.join("-");return t.fill("0"),r}export{Bf as checkRequiredProperty,Af as checkValidProperty,_f as isBytesKeyPair,If as isCryptoKeyPair,Sf as isWebCryptoSupported,Lf as keyToMultibaseId,Of as multibaseIdToKey,Vc as randomBytes,Uf as randomUuid};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=utils.js.map
