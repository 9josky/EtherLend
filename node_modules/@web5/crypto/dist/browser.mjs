var lu=Object.create;var gi=Object.defineProperty;var du=Object.getOwnPropertyDescriptor;var yu=Object.getOwnPropertyNames;var pu=Object.getPrototypeOf,mu=Object.prototype.hasOwnProperty;var Z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),bi=(n,e)=>{for(var t in e)gi(n,t,{get:e[t],enumerable:!0})},gu=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yu(e))!mu.call(n,i)&&i!==t&&gi(n,i,{get:()=>e[i],enumerable:!(r=du(e,i))||r.enumerable});return n};var ys=(n,e,t)=>(t=n!=null?lu(pu(n)):{},gu(e||!n||!n.__esModule?gi(t,"default",{value:n,enumerable:!0}):t,n));var Os=Z(Ss=>{"use strict";Ss.supports=function(...e){let t=e.reduce((r,i)=>Object.assign(r,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var qe=Z((yy,Is)=>{"use strict";Is.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Ls=Z(gn=>{"use strict";gn.byteLength=zu;gn.toByteArray=Yu;gn.fromByteArray=ef;var ze=[],Ie=[],Ju=typeof Uint8Array<"u"?Uint8Array:Array,Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Mt=0,Ps=Ki.length;Mt<Ps;++Mt)ze[Mt]=Ki[Mt],Ie[Ki.charCodeAt(Mt)]=Mt;var Mt,Ps;Ie["-".charCodeAt(0)]=62;Ie["_".charCodeAt(0)]=63;function _s(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function zu(n){var e=_s(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Zu(n,e,t){return(e+t)*3/4-t}function Yu(n){var e,t=_s(n),r=t[0],i=t[1],o=new Ju(Zu(n,r,i)),s=0,c=i>0?r-4:r,a;for(a=0;a<c;a+=4)e=Ie[n.charCodeAt(a)]<<18|Ie[n.charCodeAt(a+1)]<<12|Ie[n.charCodeAt(a+2)]<<6|Ie[n.charCodeAt(a+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Ie[n.charCodeAt(a)]<<2|Ie[n.charCodeAt(a+1)]>>4,o[s++]=e&255),i===1&&(e=Ie[n.charCodeAt(a)]<<10|Ie[n.charCodeAt(a+1)]<<4|Ie[n.charCodeAt(a+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Xu(n){return ze[n>>18&63]+ze[n>>12&63]+ze[n>>6&63]+ze[n&63]}function Qu(n,e,t){for(var r,i=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),i.push(Xu(r));return i.join("")}function ef(n){for(var e,t=n.length,r=t%3,i=[],o=16383,s=0,c=t-r;s<c;s+=o)i.push(Qu(n,s,s+o>c?c:s+o));return r===1?(e=n[t-1],i.push(ze[e>>2]+ze[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(ze[e>>10]+ze[e>>4&63]+ze[e<<2&63]+"=")),i.join("")}});var Ns=Z(Si=>{Si.read=function(n,e,t,r,i){var o,s,c=i*8-r-1,a=(1<<c)-1,u=a>>1,f=-7,h=t?i-1:0,y=t?-1:1,w=n[e+h];for(h+=y,o=w&(1<<-f)-1,w>>=-f,f+=c;f>0;o=o*256+n[e+h],h+=y,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=s*256+n[e+h],h+=y,f-=8);if(o===0)o=1-u;else{if(o===a)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(w?-1:1)*s*Math.pow(2,o-r)};Si.write=function(n,e,t,r,i,o){var s,c,a,u=o*8-i-1,f=(1<<u)-1,h=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:o-1,p=r?1:-1,l=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+h>=1?e+=y/a:e+=y*Math.pow(2,1-h),e*a>=2&&(s++,a/=2),s+h>=f?(c=0,s=f):s+h>=1?(c=(e*a-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;n[t+w]=c&255,w+=p,c/=256,i-=8);for(s=s<<i|c,u+=i;u>0;n[t+w]=s&255,w+=p,s/=256,u-=8);n[t+w-p]|=l*128}});var xn=Z(gr=>{"use strict";var Oi=Ls(),pr=Ns(),Rs=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;gr.Buffer=b;gr.SlowBuffer=cf;gr.INSPECT_MAX_BYTES=50;var bn=2147483647;gr.kMaxLength=bn;b.TYPED_ARRAY_SUPPORT=tf();!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function tf(){try{let n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function it(n){if(n>bn)throw new RangeError('The value "'+n+'" is invalid for option "size"');let e=new Uint8Array(n);return Object.setPrototypeOf(e,b.prototype),e}function b(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Li(n)}return qs(n,e,t)}b.poolSize=8192;function qs(n,e,t){if(typeof n=="string")return nf(n,e);if(ArrayBuffer.isView(n))return of(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(Ze(n,ArrayBuffer)||n&&Ze(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(n,SharedArrayBuffer)||n&&Ze(n.buffer,SharedArrayBuffer)))return Pi(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return b.from(r,e,t);let i=sf(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return b.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}b.from=function(n,e,t){return qs(n,e,t)};Object.setPrototypeOf(b.prototype,Uint8Array.prototype);Object.setPrototypeOf(b,Uint8Array);function Hs(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function rf(n,e,t){return Hs(n),n<=0?it(n):e!==void 0?typeof t=="string"?it(n).fill(e,t):it(n).fill(e):it(n)}b.alloc=function(n,e,t){return rf(n,e,t)};function Li(n){return Hs(n),it(n<0?0:Ni(n)|0)}b.allocUnsafe=function(n){return Li(n)};b.allocUnsafeSlow=function(n){return Li(n)};function nf(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=js(n,e)|0,r=it(t),i=r.write(n,e);return i!==t&&(r=r.slice(0,i)),r}function Ii(n){let e=n.length<0?0:Ni(n.length)|0,t=it(e);for(let r=0;r<e;r+=1)t[r]=n[r]&255;return t}function of(n){if(Ze(n,Uint8Array)){let e=new Uint8Array(n);return Pi(e.buffer,e.byteOffset,e.byteLength)}return Ii(n)}function Pi(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&t===void 0?r=new Uint8Array(n):t===void 0?r=new Uint8Array(n,e):r=new Uint8Array(n,e,t),Object.setPrototypeOf(r,b.prototype),r}function sf(n){if(b.isBuffer(n)){let e=Ni(n.length)|0,t=it(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||Di(n.length)?it(0):Ii(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Ii(n.data)}function Ni(n){if(n>=bn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+bn.toString(16)+" bytes");return n|0}function cf(n){return+n!=n&&(n=0),b.alloc(+n)}b.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==b.prototype};b.compare=function(e,t){if(Ze(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),Ze(t,Uint8Array)&&(t=b.from(t,t.offset,t.byteLength)),!b.isBuffer(e)||!b.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let o=0,s=Math.min(r,i);o<s;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:i<r?1:0};b.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return b.alloc(0);let r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=b.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let s=e[r];if(Ze(s,Uint8Array))o+s.length>i.length?(b.isBuffer(s)||(s=b.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(b.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function js(n,e){if(b.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||Ze(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let t=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return _i(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Xs(n).length;default:if(i)return r?-1:_i(n).length;e=(""+e).toLowerCase(),i=!0}}b.byteLength=js;function af(n,e,t){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return bf(this,e,t);case"utf8":case"utf-8":return Fs(this,e,t);case"ascii":return mf(this,e,t);case"latin1":case"binary":return gf(this,e,t);case"base64":return yf(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wf(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}b.prototype._isBuffer=!0;function qt(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}b.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)qt(this,t,t+1);return this};b.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)qt(this,t,t+3),qt(this,t+1,t+2);return this};b.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)qt(this,t,t+7),qt(this,t+1,t+6),qt(this,t+2,t+5),qt(this,t+3,t+4);return this};b.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Fs(this,0,e):af.apply(this,arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(e){if(!b.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:b.compare(this,e)===0};b.prototype.inspect=function(){let e="",t=gr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Rs&&(b.prototype[Rs]=b.prototype.inspect);b.prototype.compare=function(e,t,r,i,o){if(Ze(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),!b.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=r-t,a=Math.min(s,c),u=this.slice(i,o),f=e.slice(t,r);for(let h=0;h<a;++h)if(u[h]!==f[h]){s=u[h],c=f[h];break}return s<c?-1:c<s?1:0};function Vs(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Di(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=b.from(e,r)),b.isBuffer(e))return e.length===0?-1:Ds(n,e,t,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):Ds(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function Ds(n,e,t,r,i){let o=1,s=n.length,c=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;o=2,s/=2,c/=2,t/=2}function a(f,h){return o===1?f[h]:f.readUInt16BE(h*o)}let u;if(i){let f=-1;for(u=t;u<s;u++)if(a(n,u)===a(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===c)return f*o}else f!==-1&&(u-=u-f),f=-1}else for(t+c>s&&(t=s-c),u=t;u>=0;u--){let f=!0;for(let h=0;h<c;h++)if(a(n,u+h)!==a(e,h)){f=!1;break}if(f)return u}return-1}b.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};b.prototype.indexOf=function(e,t,r){return Vs(this,e,t,r,!0)};b.prototype.lastIndexOf=function(e,t,r){return Vs(this,e,t,r,!1)};function uf(n,e,t,r){t=Number(t)||0;let i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;let o=e.length;r>o/2&&(r=o/2);let s;for(s=0;s<r;++s){let c=parseInt(e.substr(s*2,2),16);if(Di(c))return s;n[t+s]=c}return s}function ff(n,e,t,r){return wn(_i(e,n.length-t),n,t,r)}function hf(n,e,t,r){return wn(vf(e),n,t,r)}function lf(n,e,t,r){return wn(Xs(e),n,t,r)}function df(n,e,t,r){return wn(Bf(e,n.length-t),n,t,r)}b.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((r===void 0||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return uf(this,e,t,r);case"utf8":case"utf-8":return ff(this,e,t,r);case"ascii":case"latin1":case"binary":return hf(this,e,t,r);case"base64":return lf(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return df(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function yf(n,e,t){return e===0&&t===n.length?Oi.fromByteArray(n):Oi.fromByteArray(n.slice(e,t))}function Fs(n,e,t){t=Math.min(n.length,t);let r=[],i=e;for(;i<t;){let o=n[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let a,u,f,h;switch(c){case 1:o<128&&(s=o);break;case 2:a=n[i+1],(a&192)===128&&(h=(o&31)<<6|a&63,h>127&&(s=h));break;case 3:a=n[i+1],u=n[i+2],(a&192)===128&&(u&192)===128&&(h=(o&15)<<12|(a&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:a=n[i+1],u=n[i+2],f=n[i+3],(a&192)===128&&(u&192)===128&&(f&192)===128&&(h=(o&15)<<18|(a&63)<<12|(u&63)<<6|f&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),i+=c}return pf(r)}var Ws=4096;function pf(n){let e=n.length;if(e<=Ws)return String.fromCharCode.apply(String,n);let t="",r=0;for(;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=Ws));return t}function mf(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function gf(n,e,t){let r="";t=Math.min(n.length,t);for(let i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function bf(n,e,t){let r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);let i="";for(let o=e;o<t;++o)i+=Cf[n[o]];return i}function wf(n,e,t){let r=n.slice(e,t),i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+r[o+1]*256);return i}b.prototype.slice=function(e,t){let r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,b.prototype),i};function he(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||he(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};b.prototype.readUintBE=b.prototype.readUIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||he(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};b.prototype.readUint8=b.prototype.readUInt8=function(e,t){return e=e>>>0,t||he(e,1,this.length),this[e]};b.prototype.readUint16LE=b.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||he(e,2,this.length),this[e]|this[e+1]<<8};b.prototype.readUint16BE=b.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||he(e,2,this.length),this[e]<<8|this[e+1]};b.prototype.readUint32LE=b.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||he(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};b.prototype.readUint32BE=b.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||he(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};b.prototype.readBigUInt64LE=gt(function(e){e=e>>>0,mr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Wr(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});b.prototype.readBigUInt64BE=gt(function(e){e=e>>>0,mr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Wr(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(i)<<BigInt(32))+BigInt(o)});b.prototype.readIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||he(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};b.prototype.readIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||he(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};b.prototype.readInt8=function(e,t){return e=e>>>0,t||he(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};b.prototype.readInt16LE=function(e,t){e=e>>>0,t||he(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};b.prototype.readInt16BE=function(e,t){e=e>>>0,t||he(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};b.prototype.readInt32LE=function(e,t){return e=e>>>0,t||he(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};b.prototype.readInt32BE=function(e,t){return e=e>>>0,t||he(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};b.prototype.readBigInt64LE=gt(function(e){e=e>>>0,mr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Wr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});b.prototype.readBigInt64BE=gt(function(e){e=e>>>0,mr(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&Wr(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)});b.prototype.readFloatLE=function(e,t){return e=e>>>0,t||he(e,4,this.length),pr.read(this,e,!0,23,4)};b.prototype.readFloatBE=function(e,t){return e=e>>>0,t||he(e,4,this.length),pr.read(this,e,!1,23,4)};b.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||he(e,8,this.length),pr.read(this,e,!0,52,8)};b.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||he(e,8,this.length),pr.read(this,e,!1,52,8)};function ve(n,e,t,r,i,o){if(!b.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;ve(this,e,t,r,c,0)}let o=1,s=0;for(this[t]=e&255;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r};b.prototype.writeUintBE=b.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){let c=Math.pow(2,8*r)-1;ve(this,e,t,r,c,0)}let o=r-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r};b.prototype.writeUint8=b.prototype.writeUInt8=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,1,255,0),this[t]=e&255,t+1};b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function $s(n,e,t,r,i){Ys(e,r,i,n,t,7);let o=Number(e&BigInt(4294967295));n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o,o=o>>8,n[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,s=s>>8,n[t++]=s,t}function Gs(n,e,t,r,i){Ys(e,r,i,n,t,7);let o=Number(e&BigInt(4294967295));n[t+7]=o,o=o>>8,n[t+6]=o,o=o>>8,n[t+5]=o,o=o>>8,n[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return n[t+3]=s,s=s>>8,n[t+2]=s,s=s>>8,n[t+1]=s,s=s>>8,n[t]=s,t+8}b.prototype.writeBigUInt64LE=gt(function(e,t=0){return $s(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeBigUInt64BE=gt(function(e,t=0){return Gs(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*r-1);ve(this,e,t,r,a-1,-a)}let o=0,s=1,c=0;for(this[t]=e&255;++o<r&&(s*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+r};b.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*r-1);ve(this,e,t,r,a-1,-a)}let o=r-1,s=1,c=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+r};b.prototype.writeInt8=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};b.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};b.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};b.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};b.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||ve(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};b.prototype.writeBigInt64LE=gt(function(e,t=0){return $s(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});b.prototype.writeBigInt64BE=gt(function(e,t=0){return Gs(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Js(n,e,t,r,i,o){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function zs(n,e,t,r,i){return e=+e,t=t>>>0,i||Js(n,e,t,4,34028234663852886e22,-34028234663852886e22),pr.write(n,e,t,r,23,4),t+4}b.prototype.writeFloatLE=function(e,t,r){return zs(this,e,t,!0,r)};b.prototype.writeFloatBE=function(e,t,r){return zs(this,e,t,!1,r)};function Zs(n,e,t,r,i){return e=+e,t=t>>>0,i||Js(n,e,t,8,17976931348623157e292,-17976931348623157e292),pr.write(n,e,t,r,52,8),t+8}b.prototype.writeDoubleLE=function(e,t,r){return Zs(this,e,t,!0,r)};b.prototype.writeDoubleBE=function(e,t,r){return Zs(this,e,t,!1,r)};b.prototype.copy=function(e,t,r,i){if(!b.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let o=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),o};b.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<r;++o)this[o]=e;else{let s=b.isBuffer(e)?e:b.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%c]}return this};var yr={};function Ri(n,e,t){yr[n]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Ri("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ri("ERR_INVALID_ARG_TYPE",function(n,e){return`The "${n}" argument must be of type number. Received type ${typeof e}`},TypeError);Ri("ERR_OUT_OF_RANGE",function(n,e,t){let r=`The value of "${n}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Ms(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Ms(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);function Ms(n){let e="",t=n.length,r=n[0]==="-"?1:0;for(;t>=r+4;t-=3)e=`_${n.slice(t-3,t)}${e}`;return`${n.slice(0,t)}${e}`}function xf(n,e,t){mr(e,"offset"),(n[e]===void 0||n[e+t]===void 0)&&Wr(e,n.length-(t+1))}function Ys(n,e,t,r,i,o){if(n>t||n<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${t}${s}`,new yr.ERR_OUT_OF_RANGE("value",c,n)}xf(r,i,o)}function mr(n,e){if(typeof n!="number")throw new yr.ERR_INVALID_ARG_TYPE(e,"number",n)}function Wr(n,e,t){throw Math.floor(n)!==n?(mr(n,t),new yr.ERR_OUT_OF_RANGE(t||"offset","an integer",n)):e<0?new yr.ERR_BUFFER_OUT_OF_BOUNDS:new yr.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,n)}var Ef=/[^+/0-9A-Za-z-_]/g;function Af(n){if(n=n.split("=")[0],n=n.trim().replace(Ef,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function _i(n,e){e=e||1/0;let t,r=n.length,i=null,o=[];for(let s=0;s<r;++s){if(t=n.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function vf(n){let e=[];for(let t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function Bf(n,e){let t,r,i,o=[];for(let s=0;s<n.length&&!((e-=2)<0);++s)t=n.charCodeAt(s),r=t>>8,i=t%256,o.push(i),o.push(r);return o}function Xs(n){return Oi.toByteArray(Af(n))}function wn(n,e,t,r){let i;for(i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function Ze(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function Di(n){return n!==n}var Cf=function(){let n="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let r=t*16;for(let i=0;i<16;++i)e[r+i]=n[t]+n[i]}return e}();function gt(n){return typeof BigInt>"u"?kf:n}function kf(){throw new Error("BigInt not supported")}});var Mi=Z((wy,Qs)=>{"use strict";var Wi=null;Qs.exports=function(){return Wi===null&&(Wi={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Wi}});var ji=Z(ec=>{"use strict";var qi=qe(),Uf=new Set(["buffer","view","utf8"]),Hi=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Uf.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new qi(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new qi(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new qi(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};ec.Encoding=Hi});var Gi=Z(En=>{"use strict";var{Buffer:Fi}=xn()||{},{Encoding:$i}=ji(),Tf=Mi(),Mr=class extends $i{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new qr({encode:this.encode,decode:e=>this.decode(Fi.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},qr=class extends $i{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Mr({encode:e=>{let t=this.encode(e);return Fi.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Vi=class extends $i{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Mr({encode:e=>Fi.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=Tf();return new qr({encode:r=>e.encode(this.encode(r)),decode:r=>this.decode(t.decode(r)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};En.BufferFormat=Mr;En.ViewFormat=qr;En.UTF8Format=Vi});var ic=Z(Ht=>{"use strict";var{Buffer:be}=xn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:rc,textDecoder:tc}=Mi()(),{BufferFormat:Hr,ViewFormat:Ji,UTF8Format:nc}=Gi(),An=n=>n;Ht.utf8=new nc({encode:function(n){return be.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?tc.decode(n):String(n)},decode:An,name:"utf8",createViewTranscoder(){return new Ji({encode:function(n){return ArrayBuffer.isView(n)?n:rc.encode(n)},decode:function(n){return tc.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new Hr({encode:function(n){return be.isBuffer(n)?n:ArrayBuffer.isView(n)?be.from(n.buffer,n.byteOffset,n.byteLength):be.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});Ht.json=new nc({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ht.buffer=new Hr({encode:function(n){return be.isBuffer(n)?n:ArrayBuffer.isView(n)?be.from(n.buffer,n.byteOffset,n.byteLength):be.from(String(n),"utf8")},decode:An,name:"buffer",createViewTranscoder(){return new Ji({encode:function(n){return ArrayBuffer.isView(n)?n:be.from(String(n),"utf8")},decode:function(n){return be.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});Ht.view=new Ji({encode:function(n){return ArrayBuffer.isView(n)?n:rc.encode(n)},decode:An,name:"view",createBufferTranscoder(){return new Hr({encode:function(n){return be.isBuffer(n)?n:ArrayBuffer.isView(n)?be.from(n.buffer,n.byteOffset,n.byteLength):be.from(String(n),"utf8")},decode:An,name:`${this.name}+buffer`})}});Ht.hex=new Hr({encode:function(n){return be.isBuffer(n)?n:be.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});Ht.base64=new Hr({encode:function(n){return be.isBuffer(n)?n:be.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"})});var cc=Z(sc=>{"use strict";var oc=qe(),Bn=ic(),{Encoding:Kf}=ji(),{BufferFormat:Sf,ViewFormat:Of,UTF8Format:If}=Gi(),jr=Symbol("formats"),vn=Symbol("encodings"),Pf=new Set(["buffer","view","utf8"]),zi=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>Pf.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[vn]=new Map,this[jr]=new Set(e);for(let t in Bn)try{this.encoding(t)}catch(r){if(r.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw r}}encodings(){return Array.from(new Set(this[vn].values()))}encoding(e){let t=this[vn].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=Rf[e],!t)throw new oc(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=_f(e)}let{name:r,format:i}=t;if(!this[jr].has(i))if(this[jr].has("view"))t=t.createViewTranscoder();else if(this[jr].has("buffer"))t=t.createBufferTranscoder();else if(this[jr].has("utf8"))t=t.createUTF8Transcoder();else throw new oc(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,r,t.name,t.commonName])this[vn].set(o,t)}return t}};sc.Transcoder=zi;function _f(n){if(n instanceof Kf)return n;let e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${Df++}`;switch(Lf(n)){case"view":return new Of({...n,name:t});case"utf8":return new If({...n,name:t});case"buffer":return new Sf({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Lf(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}var Nf={binary:Bn.buffer,"utf-8":Bn.utf8},Rf={...Bn,...Nf},Df=0});var bc=Z((By,Zi)=>{"use strict";var br=typeof Reflect=="object"?Reflect:null,ac=br&&typeof br.apply=="function"?br.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Cn;br&&typeof br.ownKeys=="function"?Cn=br.ownKeys:Object.getOwnPropertySymbols?Cn=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cn=function(e){return Object.getOwnPropertyNames(e)};function Wf(n){console&&console.warn&&console.warn(n)}var fc=Number.isNaN||function(e){return e!==e};function Q(){Q.init.call(this)}Zi.exports=Q;Zi.exports.once=jf;Q.EventEmitter=Q;Q.prototype._events=void 0;Q.prototype._eventsCount=0;Q.prototype._maxListeners=void 0;var uc=10;function kn(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return uc},set:function(n){if(typeof n!="number"||n<0||fc(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");uc=n}});Q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Q.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||fc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function hc(n){return n._maxListeners===void 0?Q.defaultMaxListeners:n._maxListeners}Q.prototype.getMaxListeners=function(){return hc(this)};Q.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")ac(a,this,t);else for(var u=a.length,f=mc(a,u),r=0;r<u;++r)ac(f[r],this,t);return!0};function lc(n,e,t,r){var i,o,s;if(kn(t),o=n._events,o===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),o=n._events),s=o[e]),s===void 0)s=o[e]=t,++n._eventsCount;else if(typeof s=="function"?s=o[e]=r?[t,s]:[s,t]:r?s.unshift(t):s.push(t),i=hc(n),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=s.length,Wf(c)}return n}Q.prototype.addListener=function(e,t){return lc(this,e,t,!1)};Q.prototype.on=Q.prototype.addListener;Q.prototype.prependListener=function(e,t){return lc(this,e,t,!0)};function Mf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dc(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=Mf.bind(r);return i.listener=t,r.wrapFn=i,i}Q.prototype.once=function(e,t){return kn(t),this.on(e,dc(this,e,t)),this};Q.prototype.prependOnceListener=function(e,t){return kn(t),this.prependListener(e,dc(this,e,t)),this};Q.prototype.removeListener=function(e,t){var r,i,o,s,c;if(kn(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){c=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():qf(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Q.prototype.off=Q.prototype.removeListener;Q.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function yc(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Hf(i):mc(i,i.length)}Q.prototype.listeners=function(e){return yc(this,e,!0)};Q.prototype.rawListeners=function(e){return yc(this,e,!1)};Q.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):pc.call(n,e)};Q.prototype.listenerCount=pc;function pc(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Q.prototype.eventNames=function(){return this._eventsCount>0?Cn(this._events):[]};function mc(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function qf(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Hf(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function jf(n,e){return new Promise(function(t,r){function i(s){n.removeListener(e,o),r(s)}function o(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}gc(n,e,o,{once:!0}),e!=="error"&&Vf(n,i,{once:!0})})}function Vf(n,e,t){typeof n.on=="function"&&gc(n,"error",e,t)}function gc(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(o){r.once&&n.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}});var xc=Z((Cy,wc)=>{wc.exports=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n)});var Vr=Z(Yi=>{"use strict";var Ec=xc();Yi.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(r,i){n=function(o,s){o?i(o):r(s)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};Yi.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){Ec(()=>e(null,t))}).catch(function(t){Ec(()=>e(t))})}});var Un=Z(Xi=>{"use strict";Xi.getCallback=function(n,e){return typeof n=="function"?n:e};Xi.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}}});var vt=Z(On=>{"use strict";var{fromCallback:Qi}=Vr(),Ce=qe(),{getOptions:eo,getCallback:Ac}=Un(),jt=Symbol("promise"),wr=Symbol("callback"),Ye=Symbol("working"),Vt=Symbol("handleOne"),ot=Symbol("handleMany"),to=Symbol("autoClose"),Et=Symbol("finishWork"),Xe=Symbol("returnMany"),bt=Symbol("closing"),Fr=Symbol("handleClose"),Tn=Symbol("closed"),$r=Symbol("closeCallbacks"),xt=Symbol("keyEncoding"),Ft=Symbol("valueEncoding"),ro=Symbol("abortOnClose"),Kn=Symbol("legacy"),no=Symbol("keys"),io=Symbol("values"),wt=Symbol("limit"),Pe=Symbol("count"),Sn=Object.freeze({}),Ff=()=>{},vc=!1,Gr=class{constructor(e,t,r){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Tn]=!1,this[$r]=[],this[Ye]=!1,this[bt]=!1,this[to]=!1,this[wr]=null,this[Vt]=this[Vt].bind(this),this[ot]=this[ot].bind(this),this[Fr]=this[Fr].bind(this),this[xt]=t[xt],this[Ft]=t[Ft],this[Kn]=r,this[wt]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[Pe]=0,this[ro]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Pe]}get limit(){return this[wt]}next(e){let t;if(e===void 0)t=new Promise((r,i)=>{e=(o,s,c)=>{o?i(o):this[Kn]?s===void 0&&c===void 0?r():r([s,c]):r(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[bt]?this.nextTick(e,new Ce("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ye]?this.nextTick(e,new Ce("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ye]=!0,this[wr]=e,this[Pe]>=this[wt]?this.nextTick(this[Vt],null):this._next(this[Vt])),t}_next(e){this.nextTick(e)}nextv(e,t,r){return r=Ac(t,r),r=Qi(r,jt),t=eo(t,Sn),Number.isInteger(e)?(this[bt]?this.nextTick(r,new Ce("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ye]?this.nextTick(r,new Ce("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[wt]<1/0&&(e=Math.min(e,this[wt]-this[Pe])),this[Ye]=!0,this[wr]=r,e<=0?this.nextTick(this[ot],null,[]):this._nextv(e,t,this[ot])),r[jt]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[jt])}_nextv(e,t,r){let i=[],o=(s,c,a)=>{if(s)return r(s);if(this[Kn]?c===void 0&&a===void 0:c===void 0)return r(null,i);i.push(this[Kn]?[c,a]:c),i.length===e?r(null,i):this._next(o)};this._next(o)}all(e,t){return t=Ac(e,t),t=Qi(t,jt),e=eo(e,Sn),this[bt]?this.nextTick(t,new Ce("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ye]?this.nextTick(t,new Ce("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ye]=!0,this[wr]=t,this[to]=!0,this[Pe]>=this[wt]?this.nextTick(this[ot],null,[]):this._all(e,this[ot])),t[jt]}_all(e,t){let r=this[Pe],i=[],o=()=>{let c=this[wt]<1/0?Math.min(1e3,this[wt]-r):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Sn,s)},s=(c,a)=>{c?t(c):a.length===0?t(null,i):(i.push.apply(i,a),r+=a.length,o())};o()}[Et](){let e=this[wr];return this[ro]&&e===null?Ff:(this[Ye]=!1,this[wr]=null,this[bt]&&this._close(this[Fr]),e)}[Xe](e,t,r){this[to]?this.close(e.bind(null,t,r)):e(t,r)}seek(e,t){if(t=eo(t,Sn),!this[bt]){if(this[Ye])throw new Ce("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let r=this.db.keyEncoding(t.keyEncoding||this[xt]),i=r.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(r.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Ce("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=Qi(e,jt),this[Tn]?this.nextTick(e):this[bt]?this[$r].push(e):(this[bt]=!0,this[$r].push(e),this[Ye]?this[ro]&&this[Et]()(new Ce("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Fr])),e[jt]}_close(e){this.nextTick(e)}[Fr](){this[Tn]=!0,this.db.detachResource(this);let e=this[$r];this[$r]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Tn]||await this.close()}}},xr=class extends Gr{constructor(e,t){super(e,t,!0),this[no]=t.keys!==!1,this[io]=t.values!==!1}[Vt](e,t,r){let i=this[Et]();if(e)return i(e);try{t=this[no]&&t!==void 0?this[xt].decode(t):void 0,r=this[io]&&r!==void 0?this[Ft].decode(r):void 0}catch(o){return i(new At("entry",o))}t===void 0&&r===void 0||this[Pe]++,i(null,t,r)}[ot](e,t){let r=this[Et]();if(e)return this[Xe](r,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[no]&&o!==void 0?this[xt].decode(o):void 0,i[1]=this[io]&&s!==void 0?this[Ft].decode(s):void 0}}catch(i){return this[Xe](r,new At("entries",i))}this[Pe]+=t.length,this[Xe](r,null,t)}end(e){return!vc&&typeof console<"u"&&(vc=!0,console.warn(new Ce("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},oo=class extends Gr{constructor(e,t){super(e,t,!1)}[Vt](e,t){let r=this[Et]();if(e)return r(e);try{t=t!==void 0?this[xt].decode(t):void 0}catch(i){return r(new At("key",i))}t!==void 0&&this[Pe]++,r(null,t)}[ot](e,t){let r=this[Et]();if(e)return this[Xe](r,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[xt].decode(o):void 0}}catch(i){return this[Xe](r,new At("keys",i))}this[Pe]+=t.length,this[Xe](r,null,t)}},so=class extends Gr{constructor(e,t){super(e,t,!1)}[Vt](e,t){let r=this[Et]();if(e)return r(e);try{t=t!==void 0?this[Ft].decode(t):void 0}catch(i){return r(new At("value",i))}t!==void 0&&this[Pe]++,r(null,t)}[ot](e,t){let r=this[Et]();if(e)return this[Xe](r,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Ft].decode(o):void 0}}catch(i){return this[Xe](r,new At("values",i))}this[Pe]+=t.length,this[Xe](r,null,t)}},At=class extends Ce{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let n of["_ended property","_nexting property","_end method"])Object.defineProperty(xr.prototype,n.split(" ")[0],{get(){throw new Ce(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Ce(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});xr.keyEncoding=xt;xr.valueEncoding=Ft;On.AbstractIterator=xr;On.AbstractKeyIterator=oo;On.AbstractValueIterator=so});var Bc=Z(co=>{"use strict";var{AbstractKeyIterator:$f,AbstractValueIterator:Gf}=vt(),$t=Symbol("iterator"),Jr=Symbol("callback"),Er=Symbol("handleOne"),Gt=Symbol("handleMany"),zr=class extends $f{constructor(e,t){super(e,t),this[$t]=e.iterator({...t,keys:!0,values:!1}),this[Er]=this[Er].bind(this),this[Gt]=this[Gt].bind(this)}},In=class extends Gf{constructor(e,t){super(e,t),this[$t]=e.iterator({...t,keys:!1,values:!0}),this[Er]=this[Er].bind(this),this[Gt]=this[Gt].bind(this)}};for(let n of[zr,In]){let e=n===zr,t=e?r=>r[0]:r=>r[1];n.prototype._next=function(r){this[Jr]=r,this[$t].next(this[Er])},n.prototype[Er]=function(r,i,o){let s=this[Jr];r?s(r):s(null,e?i:o)},n.prototype._nextv=function(r,i,o){this[Jr]=o,this[$t].nextv(r,i,this[Gt])},n.prototype._all=function(r,i){this[Jr]=i,this[$t].all(r,this[Gt])},n.prototype[Gt]=function(r,i){let o=this[Jr];r?o(r):o(null,i.map(t))},n.prototype._seek=function(r,i){this[$t].seek(r,i)},n.prototype._close=function(r){this[$t].close(r)}}co.DefaultKeyIterator=zr;co.DefaultValueIterator=In});var Cc=Z(Dn=>{"use strict";var{AbstractIterator:Jf,AbstractKeyIterator:zf,AbstractValueIterator:Zf}=vt(),ao=qe(),Be=Symbol("nut"),Nn=Symbol("undefer"),Rn=Symbol("factory"),Pn=class extends Jf{constructor(e,t){super(e,t),this[Be]=null,this[Rn]=()=>e.iterator(t),this.db.defer(()=>this[Nn]())}},_n=class extends zf{constructor(e,t){super(e,t),this[Be]=null,this[Rn]=()=>e.keys(t),this.db.defer(()=>this[Nn]())}},Ln=class extends Zf{constructor(e,t){super(e,t),this[Be]=null,this[Rn]=()=>e.values(t),this.db.defer(()=>this[Nn]())}};for(let n of[Pn,_n,Ln])n.prototype[Nn]=function(){this.db.status==="open"&&(this[Be]=this[Rn]())},n.prototype._next=function(e){this[Be]!==null?this[Be].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ao("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,r){this[Be]!==null?this[Be].nextv(e,t,r):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,r)):this.nextTick(r,new ao("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[Be]!==null?this[Be].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new ao("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[Be]!==null?this[Be]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[Be]!==null?this[Be].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Dn.DeferredIterator=Pn;Dn.DeferredKeyIterator=_n;Dn.DeferredValueIterator=Ln});var fo=Z(Uc=>{"use strict";var{fromCallback:kc}=Vr(),Wn=qe(),{getCallback:Yf,getOptions:Xf}=Un(),Mn=Symbol("promise"),_e=Symbol("status"),Ar=Symbol("operations"),Zr=Symbol("finishClose"),vr=Symbol("closeCallbacks"),uo=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Ar]=[],this[vr]=[],this[_e]="open",this[Zr]=this[Zr].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Ar].length}put(e,t,r){if(this[_e]!=="open")throw new Wn("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=r&&r.sublevel!=null?r.sublevel:this.db,s=r,c=o.keyEncoding(r&&r.keyEncoding),a=o.valueEncoding(r&&r.valueEncoding),u=c.format;r={...r,keyEncoding:u,valueEncoding:a.format},o!==this.db&&(r.sublevel=null);let f=o.prefixKey(c.encode(e),u),h=a.encode(t);return this._put(f,h,r),this[Ar].push({...s,type:"put",key:e,value:t}),this}_put(e,t,r){}del(e,t){if(this[_e]!=="open")throw new Wn("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let r=this.db._checkKey(e);if(r)throw r;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),c=s.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),c),t),this[Ar].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[_e]!=="open")throw new Wn("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ar]=[],this}_clear(){}write(e,t){return t=Yf(e,t),t=kc(t,Mn),e=Xf(e),this[_e]!=="open"?this.nextTick(t,new Wn("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[_e]="writing",this._write(e,r=>{this[_e]="closing",this[vr].push(()=>t(r)),r||this.db.emit("batch",this[Ar]),this._close(this[Zr])})),t[Mn]}_write(e,t){}close(e){return e=kc(e,Mn),this[_e]==="closing"?this[vr].push(e):this[_e]==="closed"?this.nextTick(e):(this[vr].push(e),this[_e]!=="writing"&&(this[_e]="closing",this._close(this[Zr]))),e[Mn]}_close(e){this.nextTick(e)}[Zr](){this[_e]="closed",this.db.detachResource(this);let e=this[vr];this[vr]=[];for(let t of e)t()}};Uc.AbstractChainedBatch=uo});var Kc=Z(Tc=>{"use strict";var{AbstractChainedBatch:Qf}=fo(),eh=qe(),Br=Symbol("encoded"),ho=class extends Qf{constructor(e){super(e),this[Br]=[]}_put(e,t,r){this[Br].push({...r,type:"put",key:e,value:t})}_del(e,t){this[Br].push({...t,type:"del",key:e})}_clear(){this[Br]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[Br].length===0?this.nextTick(t):this.db._batch(this[Br],e,t):this.nextTick(t,new eh("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Tc.DefaultChainedBatch=ho});var Ic=Z((Py,Oc)=>{"use strict";var Sc=qe(),th=Object.prototype.hasOwnProperty,rh=new Set(["lt","lte","gt","gte"]);Oc.exports=function(n,e){let t={};for(let r in n)if(th.call(n,r)&&!(r==="keyEncoding"||r==="valueEncoding")){if(r==="start"||r==="end")throw new Sc(`The legacy range option '${r}' has been removed`,{code:"LEVEL_LEGACY"});if(r==="encoding")throw new Sc("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rh.has(r)?t[r]=e.encode(n[r]):t[r]=n[r]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var lo=Z((_y,_c)=>{var Pc;_c.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):n=>(Pc||(Pc=Promise.resolve())).then(n).catch(e=>setTimeout(()=>{throw e},0))});var Rc=Z((Ly,Nc)=>{"use strict";var Lc=lo();Nc.exports=function(n,...e){e.length===0?Lc(n):Lc(()=>n(...e))}});var Dc=Z(qn=>{"use strict";var{AbstractIterator:nh,AbstractKeyIterator:ih,AbstractValueIterator:oh}=vt(),Cr=Symbol("unfix"),He=Symbol("iterator"),Jt=Symbol("handleOne"),Bt=Symbol("handleMany"),st=Symbol("callback"),Yr=class extends nh{constructor(e,t,r,i){super(e,t),this[He]=r,this[Cr]=i,this[Jt]=this[Jt].bind(this),this[Bt]=this[Bt].bind(this),this[st]=null}[Jt](e,t,r){let i=this[st];if(e)return i(e);t!==void 0&&(t=this[Cr](t)),i(e,t,r)}[Bt](e,t){let r=this[st];if(e)return r(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[Cr](o))}r(e,t)}},Xr=class extends ih{constructor(e,t,r,i){super(e,t),this[He]=r,this[Cr]=i,this[Jt]=this[Jt].bind(this),this[Bt]=this[Bt].bind(this),this[st]=null}[Jt](e,t){let r=this[st];if(e)return r(e);t!==void 0&&(t=this[Cr](t)),r(e,t)}[Bt](e,t){let r=this[st];if(e)return r(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[Cr](o))}r(e,t)}},Qr=class extends oh{constructor(e,t,r){super(e,t),this[He]=r}};for(let n of[Yr,Xr])n.prototype._next=function(e){this[st]=e,this[He].next(this[Jt])},n.prototype._nextv=function(e,t,r){this[st]=r,this[He].nextv(e,t,this[Bt])},n.prototype._all=function(e,t){this[st]=t,this[He].all(e,this[Bt])};for(let n of[Qr])n.prototype._next=function(e){this[He].next(e)},n.prototype._nextv=function(e,t,r){this[He].nextv(e,t,r)},n.prototype._all=function(e,t){this[He].all(e,t)};for(let n of[Yr,Xr,Qr])n.prototype._seek=function(e,t){this[He].seek(e,t)},n.prototype._close=function(e){this[He].close(e)};qn.AbstractSublevelIterator=Yr;qn.AbstractSublevelKeyIterator=Xr;qn.AbstractSublevelValueIterator=Qr});var Hc=Z((Ry,qc)=>{"use strict";var yo=qe(),{Buffer:go}=xn()||{},{AbstractSublevelIterator:sh,AbstractSublevelKeyIterator:ch,AbstractSublevelValueIterator:ah}=Dc(),ct=Symbol("prefix"),Wc=Symbol("upperBound"),en=Symbol("prefixRange"),ke=Symbol("parent"),po=Symbol("unfix"),Mc=new TextEncoder,uh={separator:"!"};qc.exports=function({AbstractLevel:n}){class e extends n{static defaults(r){if(typeof r=="string")throw new yo("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(r&&r.open)throw new yo("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return r==null?uh:r.separator?r:{...r,separator:"!"}}constructor(r,i,o){let{separator:s,manifest:c,...a}=e.defaults(o);i=hh(i,s);let u=s.charCodeAt(0)+1,f=r[ke]||r;if(!Mc.encode(i).every(w=>w>u&&w<127))throw new yo(`Prefix must use bytes > ${u} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(fh(f,c),a);let h=(r.prefix||"")+s+i+s,y=h.slice(0,-1)+String.fromCharCode(u);this[ke]=f,this[ct]=new Hn(h),this[Wc]=new Hn(y),this[po]=new bo,this.nextTick=f.nextTick}prefixKey(r,i){if(i==="utf8")return this[ct].utf8+r;if(r.byteLength===0)return this[ct][i];if(i==="view"){let o=this[ct].view,s=new Uint8Array(o.byteLength+r.byteLength);return s.set(o,0),s.set(r,o.byteLength),s}else{let o=this[ct].buffer;return go.concat([o,r],o.byteLength+r.byteLength)}}[en](r,i){r.gte!==void 0?r.gte=this.prefixKey(r.gte,i):r.gt!==void 0?r.gt=this.prefixKey(r.gt,i):r.gte=this[ct][i],r.lte!==void 0?r.lte=this.prefixKey(r.lte,i):r.lt!==void 0?r.lt=this.prefixKey(r.lt,i):r.lte=this[Wc][i]}get prefix(){return this[ct].utf8}get db(){return this[ke]}_open(r,i){this[ke].open({passive:!0},i)}_put(r,i,o,s){this[ke].put(r,i,o,s)}_get(r,i,o){this[ke].get(r,i,o)}_getMany(r,i,o){this[ke].getMany(r,i,o)}_del(r,i,o){this[ke].del(r,i,o)}_batch(r,i,o){this[ke].batch(r,i,o)}_clear(r,i){this[en](r,r.keyEncoding),this[ke].clear(r,i)}_iterator(r){this[en](r,r.keyEncoding);let i=this[ke].iterator(r),o=this[po].get(this[ct].utf8.length,r.keyEncoding);return new sh(this,r,i,o)}_keys(r){this[en](r,r.keyEncoding);let i=this[ke].keys(r),o=this[po].get(this[ct].utf8.length,r.keyEncoding);return new ch(this,r,i,o)}_values(r){this[en](r,r.keyEncoding);let i=this[ke].values(r);return new ah(this,r,i)}}return{AbstractSublevel:e}};var fh=function(n,e){return{...n.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:mo(n,"utf8"),buffer:mo(n,"buffer"),view:mo(n,"view")}}},mo=function(n,e){return n.supports.encodings[e]?n.keyEncoding(e).name===e:!1},Hn=class{constructor(e){this.utf8=e,this.view=Mc.encode(e),this.buffer=go?go.from(this.view.buffer,0,this.view.byteLength):{}}},bo=class{constructor(){this.cache=new Map}get(e,t){let r=this.cache.get(t);return r===void 0&&(t==="view"?r=function(i,o){return o.subarray(i)}.bind(null,e):r=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,r)),r}},hh=function(n,e){let t=0,r=n.length;for(;t<r&&n[t]===e;)t++;for(;r>t&&n[r-1]===e;)r--;return n.slice(t,r)}});var vo=Z(Ao=>{"use strict";var{supports:lh}=Os(),{Transcoder:dh}=cc(),{EventEmitter:yh}=bc(),{fromCallback:Ct}=Vr(),je=qe(),{AbstractIterator:zt}=vt(),{DefaultKeyIterator:ph,DefaultValueIterator:mh}=Bc(),{DeferredIterator:gh,DeferredKeyIterator:bh,DeferredValueIterator:wh}=Cc(),{DefaultChainedBatch:jc}=Kc(),{getCallback:Zt,getOptions:kt}=Un(),jn=Ic(),F=Symbol("promise"),at=Symbol("landed"),Yt=Symbol("resources"),wo=Symbol("closeResources"),tn=Symbol("operations"),rn=Symbol("undefer"),Vn=Symbol("deferOpen"),Vc=Symbol("options"),J=Symbol("status"),Xt=Symbol("defaultOptions"),kr=Symbol("transcoder"),Fn=Symbol("keyEncoding"),xo=Symbol("valueEncoding"),xh=()=>{},nn=class extends yh{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=kt(t);let{keyEncoding:r,valueEncoding:i,passive:o,...s}=t;this[Yt]=new Set,this[tn]=[],this[Vn]=!0,this[Vc]=s,this[J]="opening",this.supports=lh(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kr]=new dh(Eh(this)),this[Fn]=this[kr].encoding(r||"utf8"),this[xo]=this[kr].encoding(i||"utf8");for(let c of this[kr].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[Xt]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Fn].commonName,valueEncoding:this[xo].commonName}),key:Object.freeze({keyEncoding:this[Fn].commonName})},this.nextTick(()=>{this[Vn]&&this.open({passive:!1},xh)})}get status(){return this[J]}keyEncoding(e){return this[kr].encoding(e??this[Fn])}valueEncoding(e){return this[kr].encoding(e??this[xo])}open(e,t){t=Zt(e,t),t=Ct(t,F),e={...this[Vc],...kt(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let r=i=>{this[J]==="closing"||this[J]==="opening"?this.once(at,i?()=>r(i):r):this[J]!=="open"?t(new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[J]==="opening"?this.once(at,r):this.nextTick(r):this[J]==="closed"||this[Vn]?(this[Vn]=!1,this[J]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[J]="closed",this[wo](()=>{this.emit(at),r(i)}),this[rn]();return}this[J]="open",this[rn](),this.emit(at),this[J]==="open"&&this.emit("open"),this[J]==="open"&&this.emit("ready"),r()})):this[J]==="open"?this.nextTick(r):this.once(at,()=>this.open(e,t)),t[F]}_open(e,t){this.nextTick(t)}close(e){e=Ct(e,F);let t=r=>{this[J]==="opening"||this[J]==="closing"?this.once(at,r?t(r):t):this[J]!=="closed"?e(new je("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):e()};if(this[J]==="open"){this[J]="closing",this.emit("closing");let r=i=>{this[J]="open",this[rn](),this.emit(at),t(i)};this[wo](()=>{this._close(i=>{if(i)return r(i);this[J]="closed",this[rn](),this.emit(at),this[J]==="closed"&&this.emit("closed"),t()})})}else this[J]==="closed"?this.nextTick(t):this.once(at,()=>this.close(e));return e[F]}[wo](e){if(this[Yt].size===0)return this.nextTick(e);let t=this[Yt].size,r=!0,i=()=>{--t===0&&(r?this.nextTick(e):e())};for(let o of this[Yt])o.close(i);r=!1,this[Yt].clear()}_close(e){this.nextTick(e)}get(e,t,r){if(r=Zt(t,r),r=Ct(r,F),t=kt(t,this[Xt].entry),this[J]==="opening")return this.defer(()=>this.get(e,t,r)),r[F];if(Ur(this,r))return r[F];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[F];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=o.format,a=s.format;return(t.keyEncoding!==c||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:a})),this._get(this.prefixKey(o.encode(e),c),t,(u,f)=>{if(u)return(u.code==="LEVEL_NOT_FOUND"||u.notFound||/NotFound/i.test(u))&&(u.code||(u.code="LEVEL_NOT_FOUND"),u.notFound||(u.notFound=!0),u.status||(u.status=404)),r(u);try{f=s.decode(f)}catch(h){return r(new je("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}r(null,f)}),r[F]}_get(e,t,r){this.nextTick(r,new Error("NotFound"))}getMany(e,t,r){if(r=Zt(t,r),r=Ct(r,F),t=kt(t,this[Xt].entry),this[J]==="opening")return this.defer(()=>this.getMany(e,t,r)),r[F];if(Ur(this,r))return r[F];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[F];if(e.length===0)return this.nextTick(r,null,[]),r[F];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,c=o.format;(t.keyEncoding!==s||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));let a=new Array(e.length);for(let u=0;u<e.length;u++){let f=e[u],h=this._checkKey(f);if(h)return this.nextTick(r,h),r[F];a[u]=this.prefixKey(i.encode(f),s)}return this._getMany(a,t,(u,f)=>{if(u)return r(u);try{for(let h=0;h<f.length;h++)f[h]!==void 0&&(f[h]=o.decode(f[h]))}catch(h){return r(new je(`Could not decode one or more of ${f.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}r(null,f)}),r[F]}_getMany(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}put(e,t,r,i){if(i=Zt(r,i),i=Ct(i,F),r=kt(r,this[Xt].entry),this[J]==="opening")return this.defer(()=>this.put(e,t,r,i)),i[F];if(Ur(this,i))return i[F];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[F];let s=this.keyEncoding(r.keyEncoding),c=this.valueEncoding(r.valueEncoding),a=s.format,u=c.format;(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u}));let f=this.prefixKey(s.encode(e),a),h=c.encode(t);return this._put(f,h,r,y=>{if(y)return i(y);this.emit("put",e,t),i()}),i[F]}_put(e,t,r,i){this.nextTick(i)}del(e,t,r){if(r=Zt(t,r),r=Ct(r,F),t=kt(t,this[Xt].key),this[J]==="opening")return this.defer(()=>this.del(e,t,r)),r[F];if(Ur(this,r))return r[F];let i=this._checkKey(e);if(i)return this.nextTick(r,i),r[F];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,c=>{if(c)return r(c);this.emit("del",e),r()}),r[F]}_del(e,t,r){this.nextTick(r)}batch(e,t,r){if(!arguments.length){if(this[J]==="opening")return new jc(this);if(this[J]!=="open")throw new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?r=e:r=Zt(t,r),r=Ct(r,F),t=kt(t,this[Xt].empty),this[J]==="opening")return this.defer(()=>this.batch(e,t,r)),r[F];if(Ur(this,r))return r[F];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[F];if(e.length===0)return this.nextTick(r),r[F];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...c}=t;for(let a=0;a<e.length;a++){if(typeof e[a]!="object"||e[a]===null)return this.nextTick(r,new TypeError("A batch operation must be an object")),r[F];let u=Object.assign({},e[a]);if(u.type!=="put"&&u.type!=="del")return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[F];let f=this._checkKey(u.key);if(f)return this.nextTick(r,f),r[F];let h=u.sublevel!=null?u.sublevel:this,y=h.keyEncoding(u.keyEncoding||o),w=y.format;if(u.key=h.prefixKey(y.encode(u.key),w),u.keyEncoding=w,u.type==="put"){let p=this._checkValue(u.value);if(p)return this.nextTick(r,p),r[F];let l=h.valueEncoding(u.valueEncoding||s);u.value=l.encode(u.value),u.valueEncoding=l.format}h!==this&&(u.sublevel=null),i[a]=u}return this._batch(i,c,a=>{if(a)return r(a);this.emit("batch",e),r()}),r[F]}_batch(e,t,r){this.nextTick(r)}sublevel(e,t){return this._sublevel(e,Eo.defaults(t))}_sublevel(e,t){return new Eo(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Zt(e,t),t=Ct(t,F),e=kt(e,this[Xt].empty),this[J]==="opening")return this.defer(()=>this.clear(e,t)),t[F];if(Ur(this,t))return t[F];let r=e,i=this.keyEncoding(e.keyEncoding);return e=jn(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",r),t()}),t[F]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=jn(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[zt.keyEncoding]=t,e[zt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new gh(this,e);if(this[J]!=="open")throw new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new zt(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=jn(e,t),e[zt.keyEncoding]=t,e[zt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new bh(this,e);if(this[J]!=="open")throw new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new ph(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=jn(e,t),e[zt.keyEncoding]=t,e[zt.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,this[J]==="opening")return new wh(this,e);if(this[J]!=="open")throw new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new mh(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[tn].push(e)}[rn](){if(this[tn].length===0)return;let e=this[tn];this[tn]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Yt].add(e)}detachResource(e){this[Yt].delete(e)}_chainedBatch(){return new jc(this)}_checkKey(e){if(e==null)return new je("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new je("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};nn.prototype.nextTick=Rc();var{AbstractSublevel:Eo}=Hc()({AbstractLevel:nn});Ao.AbstractLevel=nn;Ao.AbstractSublevel=Eo;var Ur=function(n,e){return n[J]!=="open"?(n.nextTick(e,new je("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Eh=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])}});var Bo=Z(Qt=>{"use strict";Qt.AbstractLevel=vo().AbstractLevel;Qt.AbstractSublevel=vo().AbstractSublevel;Qt.AbstractIterator=vt().AbstractIterator;Qt.AbstractKeyIterator=vt().AbstractKeyIterator;Qt.AbstractValueIterator=vt().AbstractValueIterator;Qt.AbstractChainedBatch=fo().AbstractChainedBatch});var $c=Z((My,Fc)=>{Fc.exports=vh;var Ah=lo();function vh(n,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let r,i,o,s,c,a=!0,u;Array.isArray(n)?(r=[],o=i=n.length):(s=Object.keys(n),r={},o=i=s.length);function f(y){function w(){t&&t(y,r),t=null}a?Ah(w):w()}function h(y,w,p){if(r[y]=p,w&&(c=!0),--o===0||w)f(w);else if(!c&&u<i){let l;s?(l=s[u],u+=1,n[l](function(g,x){h(l,g,x)})):(l=u,u+=1,n[l](function(g,x){h(l,g,x)}))}}u=e,o?s?s.some(function(y,w){return n[y](function(p,l){h(y,p,l)}),w===e-1}):n.some(function(y,w){return y(function(p,l){h(w,p,l)}),w===e-1}):f(null),a=!1}});var Co=Z((qy,Gc)=>{"use strict";Gc.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,r=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&r!==void 0?IDBKeyRange.bound(t,r,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):r!==void 0?IDBKeyRange.upperBound(r,o):null}});var ko=Z((Hy,Jc)=>{"use strict";var Bh=new TextEncoder;Jc.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):Bh.encode(n)}});var Qc=Z(Xc=>{"use strict";var{AbstractIterator:Ch}=Bo(),zc=Co(),$n=ko(),Qe=Symbol("cache"),ut=Symbol("finished"),Ue=Symbol("options"),ft=Symbol("currentOptions"),er=Symbol("position"),Uo=Symbol("location"),Tr=Symbol("first"),Zc={},To=class extends Ch{constructor(e,t,r){super(e,r),this[Qe]=[],this[ut]=this.limit===0,this[Ue]=r,this[ft]={...r},this[er]=void 0,this[Uo]=t,this[Tr]=!0}_nextv(e,t,r){if(this[Tr]=!1,this[ut])return this.nextTick(r,null,[]);if(this[Qe].length>0)return e=Math.min(e,this[Qe].length),this.nextTick(r,null,this[Qe].splice(0,e));this[er]!==void 0&&(this[Ue].reverse?(this[ft].lt=this[er],this[ft].lte=void 0):(this[ft].gt=this[er],this[ft].gte=void 0));let i;try{i=zc(this[ft])}catch{return this[ut]=!0,this.nextTick(r,null,[])}let o=this.db.db.transaction([this[Uo]],"readonly"),s=o.objectStore(this[Uo]),c=[];if(this[Ue].reverse){let a=!this[Ue].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[a](i,"prev").onsuccess=u=>{let f=u.target.result;if(f){let{key:h,value:y}=f;this[er]=h,c.push([this[Ue].keys&&h!==void 0?$n(h):void 0,this[Ue].values&&y!==void 0?$n(y):void 0]),c.length<e?f.continue():Yc(o)}else this[ut]=!0}}else{let a,u,f=()=>{if(a===void 0||u===void 0)return;let h=Math.max(a.length,u.length);h===0||e===1/0?this[ut]=!0:this[er]=a[h-1],c.length=h;for(let y=0;y<h;y++){let w=a[y],p=u[y];c[y]=[this[Ue].keys&&w!==void 0?$n(w):void 0,this[Ue].values&&p!==void 0?$n(p):void 0]}Yc(o)};this[Ue].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{a=h.target.result,f()}:(a=[],this.nextTick(f)),this[Ue].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{u=h.target.result,f()}:(u=[],this.nextTick(f))}o.onabort=()=>{r(o.error||new Error("aborted by user")),r=null},o.oncomplete=()=>{r(null,c),r=null}}_next(e){if(this[Qe].length>0){let[t,r]=this[Qe].shift();this.nextTick(e,null,t,r)}else if(this[ut])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Tr]&&(this[Tr]=!1,t=1),this._nextv(t,Zc,(r,i)=>{if(r)return e(r);this[Qe]=i,this._next(e)})}}_all(e,t){this[Tr]=!1;let r=this[Qe].splice(0,this[Qe].length),i=this.limit-this.count-r.length;if(i<=0)return this.nextTick(t,null,r);this._nextv(i,Zc,(o,s)=>{if(o)return t(o);r.length>0&&(s=r.concat(s)),t(null,s)})}_seek(e,t){this[Tr]=!0,this[Qe]=[],this[ut]=!1,this[er]=void 0,this[ft]={...this[Ue]};let r;try{r=zc(this[Ue])}catch{this[ut]=!0;return}r!==null&&!r.includes(e)?this[ut]=!0:this[Ue].reverse?this[ft].lte=e:this[ft].gte=e}};Xc.Iterator=To;function Yc(n){typeof n.commit=="function"&&n.commit()}});var ta=Z((Vy,ea)=>{"use strict";ea.exports=function(e,t,r,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),c=s.objectStore(t),a=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let u=c.openKeyCursor?"openKeyCursor":"openCursor",f=i.reverse?"prev":"next";c[u](r,f).onsuccess=function(h){let y=h.target.result;y&&(c.delete(y.key).onsuccess=function(){(i.limit<=0||++a<i.limit)&&y.continue()})}}});var ca=Z(sa=>{"use strict";var{AbstractLevel:kh}=Bo(),ra=qe(),Uh=$c(),{fromCallback:Th}=Vr(),{Iterator:Kh}=Qc(),na=ko(),Sh=ta(),Oh=Co(),oa="level-js-",on=Symbol("idb"),Ko=Symbol("namePrefix"),ht=Symbol("location"),So=Symbol("version"),tr=Symbol("store"),sn=Symbol("onComplete"),ia=Symbol("promise"),Gn=class extends kh{constructor(e,t,r){if(typeof t=="function"||typeof r=="function")throw new ra("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[ht]=e,this[Ko]=i??oa,this[So]=parseInt(o||1,10),this[on]=null}get location(){return this[ht]}get namePrefix(){return this[Ko]}get version(){return this[So]}get db(){return this[on]}get type(){return"browser-level"}_open(e,t){let r=indexedDB.open(this[Ko]+this[ht],this[So]);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[on]=r.result,t()},r.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[ht])||o.createObjectStore(this[ht])}}[tr](e){return this[on].transaction([this[ht]],e).objectStore(this[ht])}[sn](e,t){let r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}_get(e,t,r){let i=this[tr]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(r,s)}this[sn](o,function(s,c){if(s)return r(s);if(c===void 0)return r(new ra("Entry not found",{code:"LEVEL_NOT_FOUND"}));r(null,na(c))})}_getMany(e,t,r){let i=this[tr]("readonly"),o=e.map(s=>c=>{let a;try{a=i.get(s)}catch(u){return c(u)}a.onsuccess=()=>{let u=a.result;c(null,u===void 0?u:na(u))},a.onerror=u=>{u.stopPropagation(),c(a.error)}});Uh(o,16,r)}_del(e,t,r){let i=this[tr]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(r,s)}this[sn](o,r)}_put(e,t,r,i){let o=this[tr]("readwrite"),s;try{s=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[sn](s,i)}_iterator(e){return new Kh(this,this[ht],e)}_batch(e,t,r){let i=this[tr]("readwrite"),o=i.transaction,s=0,c;o.onabort=function(){r(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){r()};function a(){let u=e[s++],f=u.key,h;try{h=u.type==="del"?i.delete(f):i.put(u.value,f)}catch(y){c=y,o.abort();return}s<e.length?h.onsuccess=a:typeof o.commit=="function"&&o.commit()}a()}_clear(e,t){let r,i;try{r=Oh(e)}catch{return this.nextTick(t)}if(e.limit>=0)return Sh(this,this[ht],r,e,t);try{let o=this[tr]("readwrite");i=r?o.delete(r):o.clear()}catch(o){return this.nextTick(t,o)}this[sn](i,t)}_close(e){this[on].close(),this.nextTick(e)}};Gn.destroy=function(n,e,t){typeof e=="function"&&(t=e,e=oa),t=Th(t,ia);let r=indexedDB.deleteDatabase(e+n);return r.onsuccess=function(){t()},r.onerror=function(i){t(i)},t[ia]};sa.BrowserLevel=Gn});var ua=Z(aa=>{aa.Level=ca().BrowserLevel});var la=Z(()=>{});var Rt=class extends Error{},ps=class extends Rt{},re=class extends Rt{},fr=class extends Rt{},we=class extends Rt{},ms=class extends Rt{};var mt=class{checkAlgorithmName(e){let{algorithmName:t}=e;if(t===void 0)throw new TypeError("Required parameter missing: 'algorithmName'");if(t!==this.name)throw new fr(`Algorithm not supported: '${t}'`)}checkCryptoKey(e){let{key:t}=e;if(!("algorithm"in t&&"extractable"in t&&"type"in t&&"usages"in t))throw new TypeError("Object is not a CryptoKey")}checkKeyAlgorithm(e){let{keyAlgorithmName:t}=e;if(t===void 0)throw new TypeError("Required parameter missing: 'keyAlgorithmName'");if(t&&t!==this.name)throw new re(`Algorithm '${this.name}' does not match the provided '${t}' key.`)}checkKeyType(e){let{keyType:t,allowedKeyType:r}=e;if(t===void 0||r===void 0)throw new TypeError("One or more required parameters missing: 'keyType, allowedKeyType'");if(t&&t!==r)throw new re(`Requested operation is not valid for the provided '${t}' key.`)}checkKeyUsages(e){let{keyUsages:t,allowedKeyUsages:r}=e;if(!(t&&t.length>0))throw new TypeError("Required parameter missing or empty: 'keyUsages'");let i=Array.isArray(r)?r:[...r.privateKey,...r.publicKey];if(!t.every(o=>i.includes(o)))throw new re(`Requested operation(s) '${t.join(", ")}' is not valid for the provided key.`)}static create(){return new this}};var Lo={};bi(Lo,{checkRequiredProperty:()=>ae,checkValidProperty:()=>nr,isBytesKeyPair:()=>ir,isCryptoKeyPair:()=>Lh,isWebCryptoSupported:()=>_o,keyToMultibaseId:()=>Po,multibaseIdToKey:()=>Nh,randomBytes:()=>ha,randomUuid:()=>Rh});function bu(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var c=n.length,a=n.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var l=0,g=0,x=0,K=p.length;x!==K&&p[x]===0;)x++,l++;for(var m=(K-x)*f+1>>>0,C=new Uint8Array(m);x!==K;){for(var E=p[x],A=0,S=m-1;(E!==0||A<g)&&S!==-1;S--,A++)E+=256*C[S]>>>0,C[S]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");g=A,x++}for(var T=m-g;T!==m&&C[T]===0;)T++;for(var O=a.repeat(l);T<m;++T)O+=n.charAt(C[T]);return O}function y(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var l=0;if(p[l]!==" "){for(var g=0,x=0;p[l]===a;)g++,l++;for(var K=(p.length-l)*u+1>>>0,m=new Uint8Array(K);p[l];){var C=t[p.charCodeAt(l)];if(C===255)return;for(var E=0,A=K-1;(C!==0||E<x)&&A!==-1;A--,E++)C+=c*m[A]>>>0,m[A]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");x=E,l++}if(p[l]!==" "){for(var S=K-x;S!==K&&m[S]===0;)S++;for(var T=new Uint8Array(g+(K-S)),O=g;S!==K;)T[O++]=m[S++];return T}}}function w(p){var l=y(p);if(l)return l;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:w}}var wu=bu,xu=wu,gs=xu;var Cd=new Uint8Array(0);var bs=(n,e)=>{if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0},hr=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};var wi=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},xi=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ws(this,e)}},Ei=class{constructor(e){this.decoders=e}or(e){return ws(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ws=(n,e)=>new Ei({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}}),Ai=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new wi(e,t,r),this.decoder=new xi(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},xs=({name:n,prefix:e,encode:t,decode:r})=>new Ai(n,e,t,r),vi=({prefix:n,name:e,alphabet:t})=>{let{encode:r,decode:i}=gs(t,e);return xs({prefix:n,name:e,encode:r,decode:o=>hr(i(o))})},Au=(n,e,t,r)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=n.length;for(;n[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),c=0,a=0,u=0;for(let f=0;f<o;++f){let h=i[n[f]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<t|h,c+=t,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=t||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},vu=(n,e,t)=>{let r=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let a=0;a<n.length;++a)for(c=c<<8|n[a],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),r)for(;o.length*t&7;)o+="=";return o},xe=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>xs({prefix:e,name:n,encode(i){return vu(i,r,t)},decode(i){return Au(i,r,t,n)}});var Ae=vi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sd=vi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pd=xe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_d=xe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Je=xe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ld=xe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Es(n){return n.byteOffset!==0||n.byteLength!==n.buffer.byteLength}function fe(n){let t=Object.prototype.toString.call(n).match(/\s([a-zA-Z0-9]+)/),[r,i]=t;return i}var mn=new TextEncoder,Lr=new TextDecoder,z=class{constructor(e,t){this.data=e,this.format=t}static arrayBuffer(e){return new z(e,"ArrayBuffer")}static base58Btc(e){return new z(e,"Base58Btc")}static base64Url(e){return new z(e,"Base64Url")}static bufferSource(e){return new z(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new z(e,"Hex")}static multibase(e){return new z(e,"Multibase")}static object(e){return new z(e,"Object")}static string(e){return new z(e,"String")}static uint8Array(e){return new z(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Ae.baseDecode(this.data).buffer;case"Base64Url":return Je.baseDecode(this.data).buffer;case"BufferSource":{if(fe(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Es(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Ae.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Ae.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Je.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Je.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),t=mn.encode(e);return Je.baseEncode(t)}case"String":{let e=mn.encode(this.data);return Je.baseEncode(e)}case"Uint8Array":return Je.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toHex(){let e=Array.from({length:256},(t,r)=>r.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let t=this.toUint8Array();return z.uint8Array(t).toHex()}case"Base64Url":{let t=this.toUint8Array();return z.uint8Array(t).toHex()}case"Uint8Array":{let t="";for(let r=0;r<this.data.length;r++)t+=e[this.data[r]];return t}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Je.baseDecode(this.data),t=Lr.decode(e);return JSON.parse(t)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Lr.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toString(){switch(this.format){case"ArrayBuffer":return Lr.decode(this.data);case"Base64Url":{let e=Je.baseDecode(this.data);return Lr.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Lr.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base58Btc":return Ae.baseDecode(this.data);case"Base64Url":return Je.baseDecode(this.data);case"BufferSource":{let e=fe(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let t=0;t<this.data.length;t+=2){let r=parseInt(this.data.substring(t,t+2),16);if(isNaN(r))throw new TypeError("Input is not a valid hexadecimal string.");e[t/2]=r}return e}case"Object":{let e=JSON.stringify(this.data);return mn.encode(e)}case"String":return mn.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}};var nt={};bi(nt,{decode:()=>lr,encodeTo:()=>Dt,encodingLength:()=>Wt});var Bu=Bs,As=128,Cu=127,ku=~Cu,Uu=Math.pow(2,31);function Bs(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Uu;)e[t++]=n&255|As,n/=128;for(;n&ku;)e[t++]=n&255|As,n>>>=7;return e[t]=n|0,Bs.bytes=t-r+1,e}var Tu=Bi,Ku=128,vs=127;function Bi(n,r){var t=0,r=r||0,i=0,o=r,s,c=n.length;do{if(o>=c)throw Bi.bytes=0,new RangeError("Could not decode varint");s=n[o++],t+=i<28?(s&vs)<<i:(s&vs)*Math.pow(2,i),i+=7}while(s>=Ku);return Bi.bytes=o-r,t}var Su=Math.pow(2,7),Ou=Math.pow(2,14),Iu=Math.pow(2,21),Pu=Math.pow(2,28),_u=Math.pow(2,35),Lu=Math.pow(2,42),Nu=Math.pow(2,49),Ru=Math.pow(2,56),Du=Math.pow(2,63),Wu=function(n){return n<Su?1:n<Ou?2:n<Iu?3:n<Pu?4:n<_u?5:n<Lu?6:n<Nu?7:n<Ru?8:n<Du?9:10},Mu={encode:Bu,decode:Tu,encodingLength:Wu},qu=Mu,Nr=qu;var lr=(n,e=0)=>[Nr.decode(n,e),Nr.decode.bytes],Dt=(n,e,t=0)=>(Nr.encode(n,e,t),e),Wt=n=>Nr.encodingLength(n);var Ci=(n,e)=>{let t=e.byteLength,r=Wt(n),i=r+Wt(t),o=new Uint8Array(i+t);return Dt(n,o,0),Dt(t,o,r),o.set(e,i),new dr(n,t,e,o)},Cs=n=>{let e=hr(n),[t,r]=lr(e),[i,o]=lr(e.subarray(r)),s=e.subarray(r+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new dr(t,i,s,e)},ks=(n,e)=>{if(n===e)return!0;{let t=e;return n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&bs(n.bytes,t.bytes)}},dr=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};var Rr=xe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$d=xe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gd=xe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jd=xe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zd=xe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zd=xe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yd=xe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xd=xe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qd=xe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Us=(n,e)=>{let{bytes:t,version:r}=n;switch(r){case 0:return ju(t,Ui(n),e||Ae.encoder);default:return Vu(t,Ui(n),e||Rr.encoder)}};var Ts=new WeakMap,Ui=n=>{let e=Ts.get(n);if(e==null){let t=new Map;return Ts.set(n,t),t}return e},ce=class{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Dr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Fu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ce.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Ci(e,t);return ce.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return ce.equals(this,e)}static equals(e,t){let r=t;return r&&e.code===r.code&&e.version===r.version&&ks(e.multihash,r.multihash)}toString(e){return Us(this,e)}toJSON(){return{"/":Us(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof ce)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:r,code:i,multihash:o,bytes:s}=t;return new ce(r,i,o,s||Ks(r,i,o.bytes))}else if(t[$u]===!0){let{version:r,multihash:i,code:o}=t,s=Cs(i);return ce.create(r,o,s)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Dr)throw new Error(`Version 0 CID must use dag-pb (code: ${Dr}) block encoding`);return new ce(e,t,r,r.bytes)}case 1:{let i=Ks(e,t,r.bytes);return new ce(e,t,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return ce.create(0,Dr,e)}static createV1(e,t){return ce.create(1,e,t)}static decode(e){let[t,r]=ce.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=ce.inspectBytes(e),r=t.size-t.multihashSize,i=hr(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new dr(t.multihashCode,t.digestSize,o,i);return[t.version===0?ce.createV0(s):ce.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[h,y]=lr(e.subarray(t));return t+=y,h},i=r(),o=Dr;if(i===18?(i=0,t=0):o=r(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,c=r(),a=r(),u=t+a,f=u-s;return{version:i,codec:o,multihashCode:c,digestSize:a,multihashSize:f,size:u}}static parse(e,t){let[r,i]=Hu(e,t),o=ce.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ui(o).set(r,e),o}},Hu=(n,e)=>{switch(n[0]){case"Q":{let t=e||Ae;return[Ae.prefix,t.decode(`${Ae.prefix}${n}`)]}case Ae.prefix:{let t=e||Ae;return[Ae.prefix,t.decode(n)]}case Rr.prefix:{let t=e||Rr;return[Rr.prefix,t.decode(n)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],e.decode(n)]}}},ju=(n,e,t)=>{let{prefix:r}=t;if(r!==Ae.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(r);if(i==null){let o=t.encode(n).slice(1);return e.set(r,o),o}else return i},Vu=(n,e,t)=>{let{prefix:r}=t,i=e.get(r);if(i==null){let o=t.encode(n);return e.set(r,o),o}else return i},Dr=112,Fu=18,Ks=(n,e,t)=>{let r=Wt(n),i=r+Wt(e),o=new Uint8Array(i+t.byteLength);return Dt(n,o,0),Dt(e,o,r),o.set(t,i),o},$u=Symbol.for("@ipld/js-cid/CID");var ie=class{static addPrefix(e){var t;let{code:r,data:i,name:o}=e;if(!(o?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(r=ie.codeToName.has(r)?r:ie.nameToCode.get(o),r===void 0)throw new Error(`Unsupported multicodec: ${(t=e.name)!==null&&t!==void 0?t:e.code}`);let s=nt.encodingLength(r),c=new Uint8Array(s+i.byteLength);return c.set(i,s),nt.encodeTo(r,c),c}static getCodeFromData(e){let{prefixedData:t}=e,[r,i]=nt.decode(t);return r}static getCodeFromName(e){let{name:t}=e,r=ie.nameToCode.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static getNameFromCode(e){let{code:t}=e,r=ie.codeToName.get(t);if(r===void 0)throw new Error(`Unsupported multicodec: ${t}`);return r}static registerCodec(e){ie.codeToName.set(e.code,e.name),ie.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:t}=e,[r,i]=nt.decode(t),o=ie.codeToName.get(r);if(o===void 0)throw new Error(`Unsupported multicodec: ${r}`);return{code:r,data:t.slice(i),name:o}}};ie.codeToName=new Map;ie.nameToCode=new Map;ie.registerCodec({code:237,name:"ed25519-pub"});ie.registerCodec({code:4864,name:"ed25519-priv"});ie.registerCodec({code:236,name:"x25519-pub"});ie.registerCodec({code:4866,name:"x25519-priv"});ie.registerCodec({code:231,name:"secp256k1-pub"});ie.registerCodec({code:4865,name:"secp256k1-priv"});function Ti(n){Object.keys(n).forEach(e=>{n[e]===void 0?delete n[e]:typeof n[e]=="object"&&Ti(n[e])})}var Ih=ys(ua(),1);var pe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Oo=n=>n instanceof Uint8Array;var Jn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ve=(n,e)=>n<<32-e|n>>>e,Ph=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ph)throw new Error("Non little-endian hardware is not supported");var _h=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function fa(n){if(!Oo(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=_h[n[t]];return e}function Io(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function cn(n){if(typeof n=="string"&&(n=Io(n)),!Oo(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function rr(...n){let e=new Uint8Array(n.reduce((r,i)=>r+i.length,0)),t=0;return n.forEach(r=>{if(!Oo(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}var Kr=class{clone(){return this._cloneInto()}};function Ut(n){let e=r=>n().update(cn(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Tt(n=32){if(pe&&typeof pe.getRandomValues=="function")return pe.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function ae(n){if(!n||n.property===void 0||n.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:t}=n;if(!(e in t))throw new TypeError(`Required parameter missing: '${e}'`)}function nr(n){if(!n||n.property===void 0||n.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:t}=n;if(Array.isArray(t)&&!t.includes(e)||t instanceof Set&&!t.has(e)||t instanceof Map&&!t.has(e)){let r=Array.from(t instanceof Map?t.keys():t).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${r}'`)}}function ir(n){return!!(n&&"privateKey"in n&&"publicKey"in n&&fe(n.privateKey)==="Uint8Array"&&fe(n.publicKey)==="Uint8Array")}function Lh(n){return n&&"privateKey"in n&&"publicKey"in n}function Po(n){let{key:e,multicodecCode:t,multicodecName:r}=n,i=ie.addPrefix({code:t,data:e,name:r}),o=z.uint8Array(i).toBase58Btc();return z.base58Btc(o).toMultibase()}function _o(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function Nh(n){let{multibaseKeyId:e}=n,t=z.multibase(e).toBase58Btc(),r=z.base58Btc(t).toUint8Array(),{code:i,data:o,name:s}=ie.removePrefix({prefixedData:r});return{key:o,multicodecCode:i,multicodecName:s}}function ha(n){return Tt(n)}function Rh(){let n=ha(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;let e=fa(n);n.fill(0);let t=[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)],r=t.join("-");return t.fill("0"),r}var Kt=class extends mt{checkGenerateKey(e){let{algorithm:t,keyUsages:r}=e;this.checkAlgorithmName({algorithmName:t.name}),ae({property:"namedCurve",inObject:t}),nr({property:t.namedCurve,allowedProperties:this.namedCurves}),this.checkKeyUsages({keyUsages:r,allowedKeyUsages:this.keyUsages})}async decrypt(){throw new re(`Requested operation 'decrypt' is not valid for ${this.name} keys.`)}async encrypt(){throw new re(`Requested operation 'encrypt' is not valid for ${this.name} keys.`)}};var zn=class extends Kt{constructor(){super(...arguments);this.name="ECDH";this.keyUsages={privateKey:["deriveBits","deriveKey"],publicKey:["deriveBits","deriveKey"]}}checkAlgorithmOptions(t){let{algorithm:r,baseKey:i}=t;if(this.checkAlgorithmName({algorithmName:r.name}),ae({property:"publicKey",inObject:r}),this.checkCryptoKey({key:r.publicKey}),this.checkKeyType({keyType:r.publicKey.type,allowedKeyType:"public"}),this.checkKeyAlgorithm({keyAlgorithmName:r.publicKey.algorithm.name}),ae({property:"baseKey",inObject:t}),this.checkCryptoKey({key:i}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),"namedCurve"in r.publicKey.algorithm&&"namedCurve"in i.algorithm&&r.publicKey.algorithm.namedCurve!==i.algorithm.namedCurve)throw new re("The named curve of the publicKey and baseKey must match.")}async sign(){throw new re(`Requested operation 'sign' is not valid for ${this.name} keys.`)}async verify(){throw new re(`Requested operation 'verify' is not valid for ${this.name} keys.`)}};var Zn=class extends Kt{constructor(){super(...arguments);this.name="ECDSA";this.keyUsages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmOptions(t){let{algorithm:r}=t;this.checkAlgorithmName({algorithmName:r.name}),ae({property:"hash",inObject:r}),nr({property:r.hash,allowedProperties:this.hashAlgorithms})}async deriveBits(){throw new re(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}};var Yn=class extends Kt{constructor(){super(...arguments);this.name="EdDSA";this.keyUsages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmOptions(t){let{algorithm:r}=t;this.checkAlgorithmName({algorithmName:r.name})}async deriveBits(){throw new re(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}};var Xn=class extends mt{checkGenerateKey(e){let{algorithm:t,keyUsages:r}=e;if(this.checkAlgorithmName({algorithmName:t.name}),ae({property:"length",inObject:t}),fe(t.length)!=="Number")throw new TypeError("Algorithm 'length' is not of type: Number.");if(![128,192,256].includes(t.length))throw new we("Algorithm 'length' must be 128, 192, or 256.");this.checkKeyUsages({keyUsages:r,allowedKeyUsages:this.keyUsages})}async deriveBits(){throw new re(`Requested operation 'deriveBits' is not valid for ${this.name} keys.`)}async sign(){throw new re(`Requested operation 'sign' is not valid for ${this.name} keys.`)}async verify(){throw new re(`Requested operation 'verify' is not valid for ${this.name} keys.`)}};var Qn=class extends Xn{constructor(){super(...arguments);this.name="AES-CTR";this.keyUsages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmOptions(t){let{algorithm:r,key:i}=t;if(this.checkAlgorithmName({algorithmName:r.name}),ae({property:"counter",inObject:r}),fe(r.counter)!=="Uint8Array")throw new TypeError("Algorithm 'counter' is not of type: Uint8Array.");if(r.counter.byteLength!==16)throw new we("Algorithm 'counter' must have length: 16 bytes.");if(ae({property:"length",inObject:r}),fe(r.length)!=="Number")throw new TypeError("Algorithm 'length' is not of type: Number.");if(r.length<1||r.length>128)throw new we("Algorithm 'length' should be in the range: 1 to 128.");ae({property:"key",inObject:t}),this.checkCryptoKey({key:i}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"secret"})}};var le=class{constructor(e,t,r,i,o){this.algorithm=e,this.extractable=t,this.material=r,this.type=i,this.usages=o,Object.defineProperties(this,{type:{enumerable:!0,writable:!1,value:i},extractable:{enumerable:!0,writable:!0,value:t},algorithm:{enumerable:!0,writable:!1,value:e},usages:{enumerable:!0,writable:!0,value:o},material:{enumerable:!1,writable:!1,value:r}})}};var ei=class extends mt{constructor(){super(...arguments);this.name="PBKDF2";this.keyUsages=["deriveBits","deriveKey"]}checkAlgorithmOptions(t){let{algorithm:r,baseKey:i}=t;if(this.checkAlgorithmName({algorithmName:r.name}),ae({property:"hash",inObject:r}),nr({property:r.hash,allowedProperties:this.hashAlgorithms}),ae({property:"iterations",inObject:r}),fe(r.iterations)!=="Number")throw new TypeError("Algorithm 'iterations' is not of type: Number.");if(r.iterations<1)throw new we("Algorithm 'iterations' must be > 0.");if(ae({property:"salt",inObject:r}),fe(r.salt)!=="Uint8Array")throw new TypeError("Algorithm 'salt' is not of type: Uint8Array.");ae({property:"baseKey",inObject:t}),this.checkCryptoKey({key:i}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name})}checkImportKey(t){let{algorithm:r,format:i,extractable:o,keyUsages:s}=t;if(this.checkAlgorithmName({algorithmName:r.name}),i!=="raw")throw new SyntaxError(`Format '${i}' not supported. Only 'raw' is supported.`);if(o!==!1)throw new SyntaxError(`Extractable '${o}' not supported. Only 'false' is supported.`);this.checkKeyUsages({keyUsages:s,allowedKeyUsages:this.keyUsages})}async decrypt(){throw new re(`Requested operation 'decrypt' is not valid for ${this.name} keys.`)}async encrypt(){throw new re(`Requested operation 'encrypt' is not valid for ${this.name} keys.`)}async generateKey(){throw new re(`Requested operation 'generateKey' is not valid for ${this.name} keys.`)}async sign(){throw new re(`Requested operation 'sign' is not valid for ${this.name} keys.`)}async verify(){throw new re(`Requested operation 'verify' is not valid for ${this.name} keys.`)}};var or=class{static async deriveKey(e){return _o()?or.deriveKeyWithWebCrypto(e):or.deriveKeyWithNodeCrypto(e)}static async deriveKeyWithNodeCrypto(e){let{password:t,salt:r,iterations:i}=e,s={"SHA-256":"sha256","SHA-384":"sha384","SHA-512":"sha512"}[e.hash],c=e.length/8,{pbkdf2:a}=await Promise.resolve().then(()=>ys(la(),1));return new Promise(u=>{a(t,r,i,c,s,(f,h)=>{f||u(new Uint8Array(h))})})}static async deriveKeyWithWebCrypto(e){let{hash:t,password:r,salt:i,iterations:o,length:s}=e,c=await pe.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveBits"]),a=await pe.subtle.deriveBits({name:"PBKDF2",hash:t,salt:i,iterations:o},c,s);return new Uint8Array(a)}};function No(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Dh(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function da(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Wh(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");No(n.outputLen),No(n.blockLen)}function Mh(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function qh(n,e){da(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Hh={number:No,bool:Dh,bytes:da,hash:Wh,exists:Mh,output:qh},lt=Hh;function jh(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),c=Number(t&o),a=r?4:0,u=r?0:4;n.setUint32(e+a,s,r),n.setUint32(e+u,c,r)}var Sr=class extends Kr{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Jn(this.buffer)}update(e){lt.exists(this);let{view:t,buffer:r,blockLen:i}=this;e=cn(e);let o=e.length;for(let s=0;s<o;){let c=Math.min(i-this.pos,o-s);if(c===i){let a=Jn(e);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(e.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lt.exists(this),lt.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:o}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let h=s;h<i;h++)t[h]=0;jh(r,i-8,BigInt(this.length*8),o),this.process(r,0);let c=Jn(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)c.setUint32(4*h,f[h],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return e.length=i,e.pos=c,e.finished=o,e.destroyed=s,i%t&&e.buffer.set(r),e}};var ti=BigInt(4294967295),Ro=BigInt(32);function ya(n,e=!1){return e?{h:Number(n&ti),l:Number(n>>Ro&ti)}:{h:Number(n>>Ro&ti)|0,l:Number(n&ti)|0}}function Vh(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){let{h:o,l:s}=ya(n[i],e);[t[i],r[i]]=[o,s]}return[t,r]}var Fh=(n,e)=>BigInt(n>>>0)<<Ro|BigInt(e>>>0),$h=(n,e,t)=>n>>>t,Gh=(n,e,t)=>n<<32-t|e>>>t,Jh=(n,e,t)=>n>>>t|e<<32-t,zh=(n,e,t)=>n<<32-t|e>>>t,Zh=(n,e,t)=>n<<64-t|e>>>t-32,Yh=(n,e,t)=>n>>>t-32|e<<64-t,Xh=(n,e)=>e,Qh=(n,e)=>n,el=(n,e,t)=>n<<t|e>>>32-t,tl=(n,e,t)=>e<<t|n>>>32-t,rl=(n,e,t)=>e<<t-32|n>>>64-t,nl=(n,e,t)=>n<<t-32|e>>>64-t;function il(n,e,t,r){let i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}var ol=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),sl=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,cl=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),al=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,ul=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),fl=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,hl={fromBig:ya,split:Vh,toBig:Fh,shrSH:$h,shrSL:Gh,rotrSH:Jh,rotrSL:zh,rotrBH:Zh,rotrBL:Yh,rotr32H:Xh,rotr32L:Qh,rotlSH:el,rotlSL:tl,rotlBH:rl,rotlBL:nl,add:il,add3L:ol,add3H:sl,add4L:cl,add4H:al,add5H:fl,add5L:ul},V=hl;var[ll,dl]=V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),St=new Uint32Array(80),Ot=new Uint32Array(80),Or=class extends Sr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:h,Fl:y,Gh:w,Gl:p,Hh:l,Hl:g}=this;return[e,t,r,i,o,s,c,a,u,f,h,y,w,p,l,g]}set(e,t,r,i,o,s,c,a,u,f,h,y,w,p,l,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=y|0,this.Gh=w|0,this.Gl=p|0,this.Hh=l|0,this.Hl=g|0}process(e,t){for(let m=0;m<16;m++,t+=4)St[m]=e.getUint32(t),Ot[m]=e.getUint32(t+=4);for(let m=16;m<80;m++){let C=St[m-15]|0,E=Ot[m-15]|0,A=V.rotrSH(C,E,1)^V.rotrSH(C,E,8)^V.shrSH(C,E,7),S=V.rotrSL(C,E,1)^V.rotrSL(C,E,8)^V.shrSL(C,E,7),T=St[m-2]|0,O=Ot[m-2]|0,L=V.rotrSH(T,O,19)^V.rotrBH(T,O,61)^V.shrSH(T,O,6),P=V.rotrSL(T,O,19)^V.rotrBL(T,O,61)^V.shrSL(T,O,6),W=V.add4L(S,P,Ot[m-7],Ot[m-16]),R=V.add4H(W,A,L,St[m-7],St[m-16]);St[m]=R|0,Ot[m]=W|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:h,El:y,Fh:w,Fl:p,Gh:l,Gl:g,Hh:x,Hl:K}=this;for(let m=0;m<80;m++){let C=V.rotrSH(h,y,14)^V.rotrSH(h,y,18)^V.rotrBH(h,y,41),E=V.rotrSL(h,y,14)^V.rotrSL(h,y,18)^V.rotrBL(h,y,41),A=h&w^~h&l,S=y&p^~y&g,T=V.add5L(K,E,S,dl[m],Ot[m]),O=V.add5H(T,x,C,A,ll[m],St[m]),L=T|0,P=V.rotrSH(r,i,28)^V.rotrBH(r,i,34)^V.rotrBH(r,i,39),W=V.rotrSL(r,i,28)^V.rotrBL(r,i,34)^V.rotrBL(r,i,39),R=r&o^r&c^o&c,$=i&s^i&a^s&a;x=l|0,K=g|0,l=w|0,g=p|0,w=h|0,p=y|0,{h,l:y}=V.add(u|0,f|0,O|0,L|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;let v=V.add3L(L,W,$);r=V.add3H(v,O,P,R),i=v|0}({h:r,l:i}=V.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=V.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=V.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=V.add(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:y}=V.add(this.Eh|0,this.El|0,h|0,y|0),{h:w,l:p}=V.add(this.Fh|0,this.Fl|0,w|0,p|0),{h:l,l:g}=V.add(this.Gh|0,this.Gl|0,l|0,g|0),{h:x,l:K}=V.add(this.Hh|0,this.Hl|0,x|0,K|0),this.set(r,i,o,s,c,a,u,f,h,y,w,p,l,g,x,K)}roundClean(){St.fill(0),Ot.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Do=class extends Or{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Wo=class extends Or{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Mo=class extends Or{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},qo=Ut(()=>new Or),l0=Ut(()=>new Do),d0=Ut(()=>new Wo),y0=Ut(()=>new Mo);var ii={};bi(ii,{bitGet:()=>bl,bitLen:()=>gl,bitMask:()=>an,bitSet:()=>wl,bytesToHex:()=>et,bytesToNumberBE:()=>Fe,bytesToNumberLE:()=>Le,concatBytes:()=>$e,createHmacDrbg:()=>Vo,ensureBytes:()=>ee,equalBytes:()=>ba,hexToBytes:()=>sr,hexToNumber:()=>jo,numberToBytesBE:()=>Ne,numberToBytesLE:()=>dt,numberToHexUnpadded:()=>ga,numberToVarBytesBE:()=>ml,utf8ToBytes:()=>wa,validateObject:()=>Te});var ma=BigInt(0),ri=BigInt(1),yl=BigInt(2),ni=n=>n instanceof Uint8Array,pl=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function et(n){if(!ni(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=pl[n[t]];return e}function ga(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function jo(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function sr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){let i=r*2,o=n.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Fe(n){return jo(et(n))}function Le(n){if(!ni(n))throw new Error("Uint8Array expected");return jo(et(Uint8Array.from(n).reverse()))}function Ne(n,e){return sr(n.toString(16).padStart(e*2,"0"))}function dt(n,e){return Ne(n,e).reverse()}function ml(n){return sr(ga(n))}function ee(n,e,t){let r;if(typeof e=="string")try{r=sr(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(ni(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function $e(...n){let e=new Uint8Array(n.reduce((r,i)=>r+i.length,0)),t=0;return n.forEach(r=>{if(!ni(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function ba(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function wa(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function gl(n){let e;for(e=0;n>ma;n>>=ri,e+=1);return e}function bl(n,e){return n>>BigInt(e)&ri}var wl=(n,e,t)=>n|(t?ri:ma)<<BigInt(e),an=n=>(yl<<BigInt(n-1))-ri,Ho=n=>new Uint8Array(n),pa=n=>Uint8Array.from(n);function Vo(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Ho(n),i=Ho(n),o=0,s=()=>{r.fill(1),i.fill(0),o=0},c=(...h)=>t(i,r,...h),a=(h=Ho())=>{i=c(pa([0]),h),r=c(),h.length!==0&&(i=c(pa([1]),h),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,y=[];for(;h<e;){r=c();let w=r.slice();y.push(w),h+=r.length}return $e(...y)};return(h,y)=>{s(),a(h);let w;for(;!(w=y(u()));)a();return s(),w}}var xl={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Te(n,e,t={}){let r=(i,o,s)=>{let c=xl[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);let a=n[i];if(!(s&&a===void 0)&&!c(a,n))throw new Error(`Invalid param ${String(i)}=${a} (${typeof a}), expected ${o}`)};for(let[i,o]of Object.entries(e))r(i,o,!1);for(let[i,o]of Object.entries(t))r(i,o,!0);return n}var ue=BigInt(0),oe=BigInt(1),cr=BigInt(2),El=BigInt(3),Fo=BigInt(4),xa=BigInt(5),Ea=BigInt(8),Al=BigInt(9),vl=BigInt(16);function Y(n,e){let t=n%e;return t>=ue?t:e+t}function $o(n,e,t){if(t<=ue||e<ue)throw new Error("Expected power/modulo > 0");if(t===oe)return ue;let r=oe;for(;e>ue;)e&oe&&(r=r*n%t),n=n*n%t,e>>=oe;return r}function ne(n,e,t){let r=n;for(;e-- >ue;)r*=r,r%=t;return r}function oi(n,e){if(n===ue||e<=ue)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Y(n,e),r=e,i=ue,o=oe,s=oe,c=ue;for(;t!==ue;){let u=r/t,f=r%t,h=i-s*u,y=o-c*u;r=t,t=f,i=s,o=c,s=h,c=y}if(r!==oe)throw new Error("invert: does not exist");return Y(i,e)}function Bl(n){let e=(n-oe)/cr,t,r,i;for(t=n-oe,r=0;t%cr===ue;t/=cr,r++);for(i=cr;i<n&&$o(i,e,n)!==n-oe;i++);if(r===1){let s=(n+oe)/Fo;return function(a,u){let f=a.pow(u,s);if(!a.eql(a.sqr(f),u))throw new Error("Cannot find square root");return f}}let o=(t+oe)/cr;return function(c,a){if(c.pow(a,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let u=r,f=c.pow(c.mul(c.ONE,i),t),h=c.pow(a,o),y=c.pow(a,t);for(;!c.eql(y,c.ONE);){if(c.eql(y,c.ZERO))return c.ZERO;let w=1;for(let l=c.sqr(y);w<u&&!c.eql(l,c.ONE);w++)l=c.sqr(l);let p=c.pow(f,oe<<BigInt(u-w-1));f=c.sqr(p),h=c.mul(h,p),y=c.mul(y,f),u=w}return h}}function Cl(n){if(n%Fo===El){let e=(n+oe)/Fo;return function(r,i){let o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(n%Ea===xa){let e=(n-xa)/Ea;return function(r,i){let o=r.mul(i,cr),s=r.pow(o,e),c=r.mul(i,s),a=r.mul(r.mul(c,cr),s),u=r.mul(c,r.sub(a,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return n%vl,Bl(n)}var Aa=(n,e)=>(Y(n,e)&oe)===oe,kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Go(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=kl.reduce((r,i)=>(r[i]="function",r),e);return Te(n,t)}function Ul(n,e,t){if(t<ue)throw new Error("Expected power > 0");if(t===ue)return n.ONE;if(t===oe)return e;let r=n.ONE,i=e;for(;t>ue;)t&oe&&(r=n.mul(r,i)),i=n.sqr(i),t>>=oe;return r}function Tl(n,e){let t=new Array(e.length),r=e.reduce((o,s,c)=>n.is0(s)?o:(t[c]=o,n.mul(o,s)),n.ONE),i=n.inv(r);return e.reduceRight((o,s,c)=>n.is0(s)?o:(t[c]=n.mul(o,t[c]),n.mul(o,s)),i),t}function si(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ci(n,e,t=!1,r={}){if(n<=ue)throw new Error(`Expected Fp ORDER > 0, got ${n}`);let{nBitLength:i,nByteLength:o}=si(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Cl(n),c=Object.freeze({ORDER:n,BITS:i,BYTES:o,MASK:an(i),ZERO:ue,ONE:oe,create:a=>Y(a,n),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ue<=a&&a<n},is0:a=>a===ue,isOdd:a=>(a&oe)===oe,neg:a=>Y(-a,n),eql:(a,u)=>a===u,sqr:a=>Y(a*a,n),add:(a,u)=>Y(a+u,n),sub:(a,u)=>Y(a-u,n),mul:(a,u)=>Y(a*u,n),pow:(a,u)=>Ul(c,a,u),div:(a,u)=>Y(a*oi(u,n),n),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>oi(a,n),sqrt:r.sqrt||(a=>s(c,a)),invertBatch:a=>Tl(c,a),cmov:(a,u,f)=>f?u:a,toBytes:a=>t?dt(a,o):Ne(a,o),fromBytes:a=>{if(a.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${a.length}`);return t?Le(a):Fe(a)}});return Object.freeze(c)}function va(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function Ba(n,e,t=!1){n=ee("privateHash",n);let r=n.length,i=si(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);let o=t?Le(n):Fe(n);return Y(o,e-oe)+oe}var Sl=BigInt(0),Jo=BigInt(1);function ai(n,e){let t=(i,o)=>{let s=o.negate();return i?s:o},r=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:t,unsafeLadder(i,o){let s=n.ZERO,c=i;for(;o>Sl;)o&Jo&&(s=s.add(c)),c=c.double(),o>>=Jo;return s},precomputeWindow(i,o){let{windows:s,windowSize:c}=r(o),a=[],u=i,f=u;for(let h=0;h<s;h++){f=u,a.push(f);for(let y=1;y<c;y++)f=f.add(u),a.push(f);u=f.double()}return a},wNAF(i,o,s){let{windows:c,windowSize:a}=r(i),u=n.ZERO,f=n.BASE,h=BigInt(2**i-1),y=2**i,w=BigInt(i);for(let p=0;p<c;p++){let l=p*a,g=Number(s&h);s>>=w,g>a&&(g-=y,s+=Jo);let x=l,K=l+Math.abs(g)-1,m=p%2!==0,C=g<0;g===0?f=f.add(t(m,o[x])):u=u.add(t(C,o[K]))}return{p:u,f}},wNAFCached(i,o,s,c){let a=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,a),a!==1&&o.set(i,c(u))),this.wNAF(a,u,s)}}}function un(n){return Go(n.Fp),Te(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...si(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}var Ge=BigInt(0),Ke=BigInt(1),ui=BigInt(2),Ol=BigInt(8),Il={zip215:!0};function Pl(n){let e=un(n);return Te(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function fi(n){let e=Pl(n),{Fp:t,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=e,u=ui<<BigInt(c*8)-Ke,f=t.create,h=e.uvRatio||((B,d)=>{try{return{isValid:!0,value:t.sqrt(B*t.inv(d))}}catch{return{isValid:!1,value:Ge}}}),y=e.adjustScalarBytes||(B=>B),w=e.domain||((B,d,U)=>{if(d.length||U)throw new Error("Contexts/pre-hash are not supported");return B}),p=B=>typeof B=="bigint"&&Ge<B,l=(B,d)=>p(B)&&p(d)&&B<d,g=B=>B===Ge||l(B,u);function x(B,d){if(l(B,d))return B;throw new Error(`Expected valid scalar < ${d}, got ${typeof B} ${B}`)}function K(B){return B===Ge?B:x(B,r)}let m=new Map;function C(B){if(!(B instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(d,U,I,_){if(this.ex=d,this.ey=U,this.ez=I,this.et=_,!g(d))throw new Error("x required");if(!g(U))throw new Error("y required");if(!g(I))throw new Error("z required");if(!g(_))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(d){if(d instanceof E)throw new Error("extended point not allowed");let{x:U,y:I}=d||{};if(!g(U)||!g(I))throw new Error("invalid affine point");return new E(U,I,Ke,f(U*I))}static normalizeZ(d){let U=t.invertBatch(d.map(I=>I.ez));return d.map((I,_)=>I.toAffine(U[_])).map(E.fromAffine)}_setWindowSize(d){this._WINDOW_SIZE=d,m.delete(this)}assertValidity(){let{a:d,d:U}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:I,ey:_,ez:M,et:q}=this,G=f(I*I),H=f(_*_),j=f(M*M),te=f(j*j),X=f(G*d),de=f(j*f(X+H)),ye=f(te+f(U*f(G*H)));if(de!==ye)throw new Error("bad point: equation left != right (1)");let se=f(I*_),ge=f(M*q);if(se!==ge)throw new Error("bad point: equation left != right (2)")}equals(d){C(d);let{ex:U,ey:I,ez:_}=this,{ex:M,ey:q,ez:G}=d,H=f(U*G),j=f(M*_),te=f(I*G),X=f(q*_);return H===j&&te===X}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:d}=e,{ex:U,ey:I,ez:_}=this,M=f(U*U),q=f(I*I),G=f(ui*f(_*_)),H=f(d*M),j=U+I,te=f(f(j*j)-M-q),X=H+q,de=X-G,ye=H-q,se=f(te*de),ge=f(X*ye),rt=f(te*ye),Nt=f(de*X);return new E(se,ge,Nt,rt)}add(d){C(d);let{a:U,d:I}=e,{ex:_,ey:M,ez:q,et:G}=this,{ex:H,ey:j,ez:te,et:X}=d;if(U===BigInt(-1)){let cs=f((M-_)*(j+H)),as=f((M+_)*(j-H)),mi=f(as-cs);if(mi===Ge)return this.double();let us=f(q*ui*X),fs=f(G*ui*te),hs=fs+us,ls=as+cs,ds=fs-us,au=f(hs*mi),uu=f(ls*ds),fu=f(hs*ds),hu=f(mi*ls);return new E(au,uu,hu,fu)}let de=f(_*H),ye=f(M*j),se=f(G*I*X),ge=f(q*te),rt=f((_+M)*(H+j)-de-ye),Nt=ge-se,_r=ge+se,ss=f(ye-U*de),iu=f(rt*Nt),ou=f(_r*ss),su=f(rt*ss),cu=f(Nt*_r);return new E(iu,ou,cu,su)}subtract(d){return this.add(d.negate())}wNAF(d){return T.wNAFCached(this,m,d,E.normalizeZ)}multiply(d){let{p:U,f:I}=this.wNAF(x(d,r));return E.normalizeZ([U,I])[0]}multiplyUnsafe(d){let U=K(d);return U===Ge?S:this.equals(S)||U===Ke?this:this.equals(A)?this.wNAF(U).p:T.unsafeLadder(this,U)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(d){let{ex:U,ey:I,ez:_}=this,M=this.is0();d==null&&(d=M?Ol:t.inv(_));let q=f(U*d),G=f(I*d),H=f(_*d);if(M)return{x:Ge,y:Ke};if(H!==Ke)throw new Error("invZ was invalid");return{x:q,y:G}}clearCofactor(){let{h:d}=e;return d===Ke?this:this.multiplyUnsafe(d)}static fromHex(d,U=!1){let{d:I,a:_}=e,M=t.BYTES;d=ee("pointHex",d,M);let q=d.slice(),G=d[M-1];q[M-1]=G&-129;let H=Le(q);H===Ge||(U?x(H,u):x(H,t.ORDER));let j=f(H*H),te=f(j-Ke),X=f(I*j-_),{isValid:de,value:ye}=h(te,X);if(!de)throw new Error("Point.fromHex: invalid y coordinate");let se=(ye&Ke)===Ke,ge=(G&128)!==0;if(!U&&ye===Ge&&ge)throw new Error("Point.fromHex: x=0 and x_0=1");return ge!==se&&(ye=f(-ye)),E.fromAffine({x:ye,y:H})}static fromPrivateKey(d){return P(d).point}toRawBytes(){let{x:d,y:U}=this.toAffine(),I=dt(U,t.BYTES);return I[I.length-1]|=d&Ke?128:0,I}toHex(){return et(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Ke,f(e.Gx*e.Gy)),E.ZERO=new E(Ge,Ke,Ke,Ge);let{BASE:A,ZERO:S}=E,T=ai(E,c*8);function O(B){return Y(B,r)}function L(B){return O(Le(B))}function P(B){let d=c;B=ee("private key",B,d);let U=ee("hashed private key",o(B),2*d),I=y(U.slice(0,d)),_=U.slice(d,2*d),M=L(I),q=A.multiply(M),G=q.toRawBytes();return{head:I,prefix:_,scalar:M,point:q,pointBytes:G}}function W(B){return P(B).pointBytes}function R(B=new Uint8Array,...d){let U=$e(...d);return L(o(w(U,ee("context",B),!!i)))}function $(B,d,U={}){B=ee("message",B),i&&(B=i(B));let{prefix:I,scalar:_,pointBytes:M}=P(d),q=R(U.context,I,B),G=A.multiply(q).toRawBytes(),H=R(U.context,G,M,B),j=O(q+H*_);K(j);let te=$e(G,dt(j,t.BYTES));return ee("result",te,c*2)}let v=Il;function k(B,d,U,I=v){let{context:_,zip215:M}=I,q=t.BYTES;B=ee("signature",B,2*q),d=ee("message",d),i&&(d=i(d));let G=Le(B.slice(q,2*q)),H,j,te;try{H=E.fromHex(U,M),j=E.fromHex(B.slice(0,q),M),te=A.multiplyUnsafe(G)}catch{return!1}if(!M&&H.isSmallOrder())return!1;let X=R(_,j.toRawBytes(),H.toRawBytes(),d);return j.add(H.multiplyUnsafe(X)).subtract(te).clearCofactor().equals(E.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:$,verify:k,ExtendedPoint:E,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>s(t.BYTES),precompute(B=8,d=E.BASE){return d._setWindowSize(B),d.multiply(BigInt(3)),d}}}}var fn=BigInt(0),zo=BigInt(1);function _l(n){return Te(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function Ca(n){let e=_l(n),{P:t}=e,r=m=>Y(m,t),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,c=e.adjustScalarBytes||(m=>m),a=e.powPminus2||(m=>$o(m,t-BigInt(2),t));function u(m,C,E){let A=r(m*(C-E));return C=r(C-A),E=r(E+A),[C,E]}function f(m){if(typeof m=="bigint"&&fn<=m&&m<t)return m;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let h=(e.a-BigInt(2))/BigInt(4);function y(m,C){let E=f(m),A=f(C),S=E,T=zo,O=fn,L=E,P=zo,W=fn,R;for(let v=BigInt(i-1);v>=fn;v--){let k=A>>v&zo;W^=k,R=u(W,T,L),T=R[0],L=R[1],R=u(W,O,P),O=R[0],P=R[1],W=k;let N=T+O,B=r(N*N),d=T-O,U=r(d*d),I=B-U,_=L+P,M=L-P,q=r(M*N),G=r(_*d),H=q+G,j=q-G;L=r(H*H),P=r(S*r(j*j)),T=r(B*U),O=r(I*(B+r(h*I)))}R=u(W,T,L),T=R[0],L=R[1],R=u(W,O,P),O=R[0],P=R[1];let $=a(O);return r(T*$)}function w(m){return dt(r(m),o)}function p(m){let C=ee("u coordinate",m,o);return s===o&&(C[s-1]&=127),Le(C)}function l(m){let C=ee("scalar",m);if(C.length!==o&&C.length!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${C.length}`);return Le(c(C))}function g(m,C){let E=p(C),A=l(m),S=y(E,A);if(S===fn)throw new Error("Invalid private or public key received");return w(S)}let x=w(e.Gu);function K(m){return g(m,x)}return{scalarMult:g,scalarMultBase:K,getSharedSecret:(m,C)=>g(m,C),getPublicKey:m=>K(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:x}}var hn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ka=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),D0=BigInt(0),Nl=BigInt(1),Zo=BigInt(2),Rl=BigInt(5),Ua=BigInt(10),Dl=BigInt(20),Wl=BigInt(40),Ta=BigInt(80);function Ka(n){let e=hn,r=n*n%e*n%e,i=ne(r,Zo,e)*r%e,o=ne(i,Nl,e)*n%e,s=ne(o,Rl,e)*o%e,c=ne(s,Ua,e)*s%e,a=ne(c,Dl,e)*c%e,u=ne(a,Wl,e)*a%e,f=ne(u,Ta,e)*u%e,h=ne(f,Ta,e)*u%e,y=ne(h,Ua,e)*s%e;return{pow_p_5_8:ne(y,Zo,e)*n%e,b2:r}}function Sa(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Ml(n,e){let t=hn,r=Y(e*e*e,t),i=Y(r*r*e,t),o=Ka(n*i).pow_p_5_8,s=Y(n*r*o,t),c=Y(e*s*s,t),a=s,u=Y(s*ka,t),f=c===n,h=c===Y(-n,t),y=c===Y(-n*ka,t);return f&&(s=a),(h||y)&&(s=u),Aa(s,t)&&(s=Y(-s,t)),{isValid:f||h,value:s}}var Re=ci(hn,void 0,!0),ln={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Re,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:qo,randomBytes:Tt,adjustScalarBytes:Sa,uvRatio:Ml},It=fi(ln);function Oa(n,e,t){if(e.length>255)throw new Error("Context is too big");return rr(Io("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}var W0=fi({...ln,domain:Oa}),M0=fi({...ln,domain:Oa,prehash:qo}),dn=(()=>Ca({P:hn,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{let e=hn,{pow_p_5_8:t,b2:r}=Ka(n);return Y(ne(t,BigInt(3),e)*r,e)},adjustScalarBytes:Sa,randomBytes:Tt}))();function Ia(n){let{y:e}=It.ExtendedPoint.fromHex(n),t=BigInt(1);return Re.toBytes(Re.create((t+e)*Re.inv(t-e)))}function Pa(n){let e=ln.hash(n.subarray(0,32));return ln.adjustScalarBytes(e).subarray(0,32)}var ql=(Re.ORDER+BigInt(3))/BigInt(8),q0=Re.pow(Zo,ql),H0=Re.sqrt(Re.neg(Re.ONE)),j0=(Re.ORDER-BigInt(5))/BigInt(8),V0=BigInt(486662);var F0=va(Re,Re.neg(BigInt(486664)));var $0=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),G0=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),J0=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),z0=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Z0=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ar=class{static async generateKeyPair(){let e=dn.utils.randomPrivateKey(),t=dn.getPublicKey(e);return{privateKey:e,publicKey:t}}static async getPublicKey(e){let{privateKey:t}=e;return dn.getPublicKey(t)}static async sharedSecret(e){let{privateKey:t,publicKey:r}=e;return dn.getSharedSecret(t,r)}static async validatePublicKey(e){throw new Error("Not implemented: 'validatePublicKey()'")}};var Ir=class{static async decrypt(e){let{counter:t,data:r,key:i,length:o}=e,s=await this.importKey(i),c=await pe.subtle.decrypt({name:"AES-CTR",counter:t,length:o},s,r);return new Uint8Array(c)}static async encrypt(e){let{counter:t,data:r,key:i,length:o}=e,s=await this.importKey(i),c=await pe.subtle.encrypt({name:"AES-CTR",counter:t,length:o},s,r);return new Uint8Array(c)}static async generateKey(e){let{length:t}=e,r=t/8;return pe.getRandomValues(new Uint8Array(r))}static async importKey(e){return pe.subtle.importKey("raw",e.buffer,{name:"AES-CTR",length:e.byteLength*8},!0,["encrypt","decrypt"])}};var _a=class{static async decrypt(e){let{additionalData:t,data:r,iv:i,key:o,tagLength:s}=e,c=await this.importKey(o),a=t===void 0?{name:"AES-GCM",iv:i,tagLength:s}:{name:"AES-GCM",additionalData:t,iv:i,tagLength:s},u=await pe.subtle.decrypt(a,c,r);return new Uint8Array(u)}static async encrypt(e){let{additionalData:t,data:r,iv:i,key:o,tagLength:s}=e,c=await this.importKey(o),a=t===void 0?{name:"AES-GCM",iv:i,tagLength:s}:{name:"AES-GCM",additionalData:t,iv:i,tagLength:s},u=await pe.subtle.encrypt(a,c,r);return new Uint8Array(u)}static async generateKey(e){let{length:t}=e,r=t/8;return pe.getRandomValues(new Uint8Array(r))}static async importKey(e){return pe.subtle.importKey("raw",e.buffer,{name:"AES-GCM",length:e.byteLength*8},!0,["encrypt","decrypt"])}};var tt=class{static async convertPrivateKeyToX25519(e){let{privateKey:t}=e;return Pa(t)}static async convertPublicKeyToX25519(e){let{publicKey:t}=e;if(!await tt.validatePublicKey({key:t}))throw new Error("Ed25519: Invalid public key.");return Ia(t)}static async generateKeyPair(){let e=It.utils.randomPrivateKey(),t=It.getPublicKey(e);return{privateKey:e,publicKey:t}}static async getPublicKey(e){let{privateKey:t}=e;return It.getPublicKey(t)}static async sign(e){let{key:t,data:r}=e;return It.sign(r,t)}static async validatePublicKey(e){let{key:t}=e;try{It.ExtendedPoint.fromHex(t).assertValidity()}catch{return!1}return!0}static async verify(e){let{key:t,signature:r,data:i}=e;return It.verify(r,i,t)}};var Hl=(n,e,t)=>n&e^~n&t,jl=(n,e,t)=>n&e^n&t^e&t,Vl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_t=new Uint32Array(64),hi=class extends Sr{constructor(){super(64,32,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){let{A:e,B:t,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[e,t,r,i,o,s,c,a]}set(e,t,r,i,o,s,c,a){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(e,t){for(let h=0;h<16;h++,t+=4)_t[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){let y=_t[h-15],w=_t[h-2],p=Ve(y,7)^Ve(y,18)^y>>>3,l=Ve(w,17)^Ve(w,19)^w>>>10;_t[h]=l+_t[h-7]+p+_t[h-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:u,H:f}=this;for(let h=0;h<64;h++){let y=Ve(c,6)^Ve(c,11)^Ve(c,25),w=f+y+Hl(c,a,u)+Vl[h]+_t[h]|0,l=(Ve(r,2)^Ve(r,13)^Ve(r,22))+jl(r,i,o)|0;f=u,u=a,a=c,c=s+w|0,s=o,o=i,i=r,r=w+l|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,i,o,s,c,a,u,f)}roundClean(){_t.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Yo=class extends hi{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Lt=Ut(()=>new hi),am=Ut(()=>new Yo);var yt=class{static async deriveKey(e){let{keyDataLen:t,sharedSecret:r}=e,o=Math.ceil(t/256);if(o!==1)throw new fr(`Concat KDF with ${o} rounds not supported.`);let s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,o);let c=yt.computeOtherInfo(e.otherInfo);return Lt(rr(s,r,c)).slice(0,t/8)}static computeOtherInfo(e){let t=yt.toDataLenData({data:e.algorithmId}),r=yt.toDataLenData({data:e.partyUInfo}),i=yt.toDataLenData({data:e.partyVInfo}),o=yt.toDataLenData({data:e.suppPubInfo,variableLength:!1}),s=yt.toDataLenData({data:e.suppPrivInfo});return rr(t,r,i,o,s)}static toDataLenData(e){let{data:t,variableLength:r=!0}=e,i,o=fe(t);if(o==="Undefined")return new Uint8Array(0);if(r){let s=o==="Uint8Array"?t:new z(t,o).toUint8Array(),c=s.length;i=new Uint8Array(4+c),new DataView(i.buffer).setUint32(0,c),i.set(s,4)}else{if(typeof t!="number")throw TypeError("Fixed length input must be a number.");i=new Uint8Array(4),new DataView(i.buffer).setUint32(0,t)}return i}};function Fl(n){let e=un(n);Te(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:$l,hexToBytes:Gl}=ii,ur={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=ur;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:$l(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=ur,t=typeof n=="string"?Gl(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=ur._parseInt(t.subarray(2)),{d:s,l:c}=ur._parseInt(o);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(n){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{let f=u.toString(16);return f.length&1?`0${f}`:f},r=e(t(n.s)),i=e(t(n.r)),o=r.length/2,s=i.length/2,c=t(o),a=t(s);return`30${t(s+o+4)}02${a}${i}02${c}${r}`}},pt=BigInt(0),De=BigInt(1),wm=BigInt(2),La=BigInt(3),xm=BigInt(4);function Jl(n){let e=Fl(n),{Fp:t}=e,r=e.toBytes||((p,l,g)=>{let x=l.toAffine();return $e(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=e.fromBytes||(p=>{let l=p.subarray(1),g=t.fromBytes(l.subarray(0,t.BYTES)),x=t.fromBytes(l.subarray(t.BYTES,2*t.BYTES));return{x:g,y:x}});function o(p){let{a:l,b:g}=e,x=t.sqr(p),K=t.mul(x,p);return t.add(t.add(K,t.mul(p,l)),g)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&pt<p&&p<e.n}function c(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(p){let{allowedPrivateKeyLengths:l,nByteLength:g,wrapPrivateKey:x,n:K}=e;if(l&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=et(p)),typeof p!="string"||!l.includes(p.length))throw new Error("Invalid key");p=p.padStart(g*2,"0")}let m;try{m=typeof p=="bigint"?p:Fe(ee("private key",p,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof p}`)}return x&&(m=Y(m,K)),c(m),m}let u=new Map;function f(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(l,g,x){if(this.px=l,this.py=g,this.pz=x,l==null||!t.isValid(l))throw new Error("x required");if(g==null||!t.isValid(g))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(l){let{x:g,y:x}=l||{};if(!l||!t.isValid(g)||!t.isValid(x))throw new Error("invalid affine point");if(l instanceof h)throw new Error("projective point not allowed");let K=m=>t.eql(m,t.ZERO);return K(g)&&K(x)?h.ZERO:new h(g,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(l){let g=t.invertBatch(l.map(x=>x.pz));return l.map((x,K)=>x.toAffine(g[K])).map(h.fromAffine)}static fromHex(l){let g=h.fromAffine(i(ee("pointHex",l)));return g.assertValidity(),g}static fromPrivateKey(l){return h.BASE.multiply(a(l))}_setWindowSize(l){this._WINDOW_SIZE=l,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}let{x:l,y:g}=this.toAffine();if(!t.isValid(l)||!t.isValid(g))throw new Error("bad point: x or y not FE");let x=t.sqr(g),K=o(l);if(!t.eql(x,K))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:l}=this.toAffine();if(t.isOdd)return!t.isOdd(l);throw new Error("Field doesn't support isOdd")}equals(l){f(l);let{px:g,py:x,pz:K}=this,{px:m,py:C,pz:E}=l,A=t.eql(t.mul(g,E),t.mul(m,K)),S=t.eql(t.mul(x,E),t.mul(C,K));return A&&S}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){let{a:l,b:g}=e,x=t.mul(g,La),{px:K,py:m,pz:C}=this,E=t.ZERO,A=t.ZERO,S=t.ZERO,T=t.mul(K,K),O=t.mul(m,m),L=t.mul(C,C),P=t.mul(K,m);return P=t.add(P,P),S=t.mul(K,C),S=t.add(S,S),E=t.mul(l,S),A=t.mul(x,L),A=t.add(E,A),E=t.sub(O,A),A=t.add(O,A),A=t.mul(E,A),E=t.mul(P,E),S=t.mul(x,S),L=t.mul(l,L),P=t.sub(T,L),P=t.mul(l,P),P=t.add(P,S),S=t.add(T,T),T=t.add(S,T),T=t.add(T,L),T=t.mul(T,P),A=t.add(A,T),L=t.mul(m,C),L=t.add(L,L),T=t.mul(L,P),E=t.sub(E,T),S=t.mul(L,O),S=t.add(S,S),S=t.add(S,S),new h(E,A,S)}add(l){f(l);let{px:g,py:x,pz:K}=this,{px:m,py:C,pz:E}=l,A=t.ZERO,S=t.ZERO,T=t.ZERO,O=e.a,L=t.mul(e.b,La),P=t.mul(g,m),W=t.mul(x,C),R=t.mul(K,E),$=t.add(g,x),v=t.add(m,C);$=t.mul($,v),v=t.add(P,W),$=t.sub($,v),v=t.add(g,K);let k=t.add(m,E);return v=t.mul(v,k),k=t.add(P,R),v=t.sub(v,k),k=t.add(x,K),A=t.add(C,E),k=t.mul(k,A),A=t.add(W,R),k=t.sub(k,A),T=t.mul(O,v),A=t.mul(L,R),T=t.add(A,T),A=t.sub(W,T),T=t.add(W,T),S=t.mul(A,T),W=t.add(P,P),W=t.add(W,P),R=t.mul(O,R),v=t.mul(L,v),W=t.add(W,R),R=t.sub(P,R),R=t.mul(O,R),v=t.add(v,R),P=t.mul(W,v),S=t.add(S,P),P=t.mul(k,v),A=t.mul($,A),A=t.sub(A,P),P=t.mul($,W),T=t.mul(k,T),T=t.add(T,P),new h(A,S,T)}subtract(l){return this.add(l.negate())}is0(){return this.equals(h.ZERO)}wNAF(l){return w.wNAFCached(this,u,l,g=>{let x=t.invertBatch(g.map(K=>K.pz));return g.map((K,m)=>K.toAffine(x[m])).map(h.fromAffine)})}multiplyUnsafe(l){let g=h.ZERO;if(l===pt)return g;if(c(l),l===De)return this;let{endo:x}=e;if(!x)return w.unsafeLadder(this,l);let{k1neg:K,k1:m,k2neg:C,k2:E}=x.splitScalar(l),A=g,S=g,T=this;for(;m>pt||E>pt;)m&De&&(A=A.add(T)),E&De&&(S=S.add(T)),T=T.double(),m>>=De,E>>=De;return K&&(A=A.negate()),C&&(S=S.negate()),S=new h(t.mul(S.px,x.beta),S.py,S.pz),A.add(S)}multiply(l){c(l);let g=l,x,K,{endo:m}=e;if(m){let{k1neg:C,k1:E,k2neg:A,k2:S}=m.splitScalar(g),{p:T,f:O}=this.wNAF(E),{p:L,f:P}=this.wNAF(S);T=w.constTimeNegate(C,T),L=w.constTimeNegate(A,L),L=new h(t.mul(L.px,m.beta),L.py,L.pz),x=T.add(L),K=O.add(P)}else{let{p:C,f:E}=this.wNAF(g);x=C,K=E}return h.normalizeZ([x,K])[0]}multiplyAndAddUnsafe(l,g,x){let K=h.BASE,m=(E,A)=>A===pt||A===De||!E.equals(K)?E.multiplyUnsafe(A):E.multiply(A),C=m(this,g).add(m(l,x));return C.is0()?void 0:C}toAffine(l){let{px:g,py:x,pz:K}=this,m=this.is0();l==null&&(l=m?t.ONE:t.inv(K));let C=t.mul(g,l),E=t.mul(x,l),A=t.mul(K,l);if(m)return{x:t.ZERO,y:t.ZERO};if(!t.eql(A,t.ONE))throw new Error("invZ was invalid");return{x:C,y:E}}isTorsionFree(){let{h:l,isTorsionFree:g}=e;if(l===De)return!0;if(g)return g(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:l,clearCofactor:g}=e;return l===De?this:g?g(h,this):this.multiplyUnsafe(e.h)}toRawBytes(l=!0){return this.assertValidity(),r(h,this,l)}toHex(l=!0){return et(this.toRawBytes(l))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);let y=e.nBitLength,w=ai(h,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:s}}function zl(n){let e=un(n);return Te(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Na(n){let e=zl(n),{Fp:t,n:r}=e,i=t.BYTES+1,o=2*t.BYTES+1;function s(v){return pt<v&&v<t.ORDER}function c(v){return Y(v,r)}function a(v){return oi(v,r)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:y}=Jl({...e,toBytes(v,k,N){let B=k.toAffine(),d=t.toBytes(B.x),U=$e;return N?U(Uint8Array.from([k.hasEvenY()?2:3]),d):U(Uint8Array.from([4]),d,t.toBytes(B.y))},fromBytes(v){let k=v.length,N=v[0],B=v.subarray(1);if(k===i&&(N===2||N===3)){let d=Fe(B);if(!s(d))throw new Error("Point is not on curve");let U=h(d),I=t.sqrt(U),_=(I&De)===De;return(N&1)===1!==_&&(I=t.neg(I)),{x:d,y:I}}else if(k===o&&N===4){let d=t.fromBytes(B.subarray(0,t.BYTES)),U=t.fromBytes(B.subarray(t.BYTES,2*t.BYTES));return{x:d,y:U}}else throw new Error(`Point of length ${k} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),w=v=>et(Ne(v,e.nByteLength));function p(v){let k=r>>De;return v>k}function l(v){return p(v)?c(-v):v}let g=(v,k,N)=>Fe(v.slice(k,N));class x{constructor(k,N,B){this.r=k,this.s=N,this.recovery=B,this.assertValidity()}static fromCompact(k){let N=e.nByteLength;return k=ee("compactSignature",k,N*2),new x(g(k,0,N),g(k,N,2*N))}static fromDER(k){let{r:N,s:B}=ur.toSig(ee("DER",k));return new x(N,B)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new x(this.r,this.s,k)}recoverPublicKey(k){let{r:N,s:B,recovery:d}=this,U=S(ee("msgHash",k));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let I=d===2||d===3?N+e.n:N;if(I>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let _=d&1?"03":"02",M=u.fromHex(_+w(I)),q=a(I),G=c(-U*q),H=c(B*q),j=u.BASE.multiplyAndAddUnsafe(M,G,H);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return sr(this.toDERHex())}toDERHex(){return ur.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return sr(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}let K={isValidPrivateKey(v){try{return f(v),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let v=e.randomBytes(t.BYTES+8),k=Ba(v,r);return Ne(k,e.nByteLength)},precompute(v=8,k=u.BASE){return k._setWindowSize(v),k.multiply(BigInt(3)),k}};function m(v,k=!0){return u.fromPrivateKey(v).toRawBytes(k)}function C(v){let k=v instanceof Uint8Array,N=typeof v=="string",B=(k||N)&&v.length;return k?B===i||B===o:N?B===2*i||B===2*o:v instanceof u}function E(v,k,N=!0){if(C(v))throw new Error("first arg must be private key");if(!C(k))throw new Error("second arg must be public key");return u.fromHex(k).multiply(f(v)).toRawBytes(N)}let A=e.bits2int||function(v){let k=Fe(v),N=v.length*8-e.nBitLength;return N>0?k>>BigInt(N):k},S=e.bits2int_modN||function(v){return c(A(v))},T=an(e.nBitLength);function O(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(pt<=v&&v<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ne(v,e.nByteLength)}function L(v,k,N=P){if(["recovered","canonical"].some(X=>X in N))throw new Error("sign() legacy options not supported");let{hash:B,randomBytes:d}=e,{lowS:U,prehash:I,extraEntropy:_}=N;U==null&&(U=!0),v=ee("msgHash",v),I&&(v=ee("prehashed msgHash",B(v)));let M=S(v),q=f(k),G=[O(q),O(M)];if(_!=null){let X=_===!0?d(t.BYTES):_;G.push(ee("extraEntropy",X,t.BYTES))}let H=$e(...G),j=M;function te(X){let de=A(X);if(!y(de))return;let ye=a(de),se=u.BASE.multiply(de).toAffine(),ge=c(se.x);if(ge===pt)return;let rt=c(ye*c(j+ge*q));if(rt===pt)return;let Nt=(se.x===ge?0:2)|Number(se.y&De),_r=rt;return U&&p(rt)&&(_r=l(rt),Nt^=1),new x(ge,_r,Nt)}return{seed:H,k2sig:te}}let P={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function R(v,k,N=P){let{seed:B,k2sig:d}=L(v,k,N),U=e;return Vo(U.hash.outputLen,U.nByteLength,U.hmac)(B,d)}u.BASE._setWindowSize(8);function $(v,k,N,B=W){let d=v;if(k=ee("msgHash",k),N=ee("publicKey",N),"strict"in B)throw new Error("options.strict was renamed to lowS");let{lowS:U,prehash:I}=B,_,M;try{if(typeof d=="string"||d instanceof Uint8Array)try{_=x.fromDER(d)}catch(se){if(!(se instanceof ur.Err))throw se;_=x.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:se,s:ge}=d;_=new x(se,ge)}else throw new Error("PARSE");M=u.fromHex(N)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&_.hasHighS())return!1;I&&(k=e.hash(k));let{r:q,s:G}=_,H=S(k),j=a(G),te=c(H*j),X=c(q*j),de=u.BASE.multiplyAndAddUnsafe(M,te,X)?.toAffine();return de?c(de.x)===q:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:E,sign:R,verify:$,ProjectivePoint:u,Signature:x,utils:K}}var li=class extends Kr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,lt.hash(e);let r=cn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return lt.exists(this),this.iHash.update(e),this}digestInto(e){lt.exists(this),lt.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Xo=(n,e,t)=>new li(n,e).update(t).digest();Xo.create=(n,e)=>new li(n,e);function Zl(n){return{hash:n,hmac:(e,...t)=>Xo(n,e,rr(...t)),randomBytes:Tt}}function Ra(n,e){let t=r=>Na({...n,...Zl(r)});return Object.freeze({...t(e),create:t})}var Ma=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Da=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Yl=BigInt(1),Qo=BigInt(2),Wa=(n,e)=>(n+e/Qo)/e;function Xl(n){let e=Ma,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),u=n*n*n%e,f=u*u*n%e,h=ne(f,t,e)*f%e,y=ne(h,t,e)*f%e,w=ne(y,Qo,e)*u%e,p=ne(w,i,e)*w%e,l=ne(p,o,e)*p%e,g=ne(l,c,e)*l%e,x=ne(g,a,e)*g%e,K=ne(x,c,e)*l%e,m=ne(K,t,e)*f%e,C=ne(m,s,e)*p%e,E=ne(C,r,e)*u%e,A=ne(E,Qo,e);if(!es.eql(es.sqr(A),n))throw new Error("Cannot find square root");return A}var es=ci(Ma,void 0,void 0,{sqrt:Xl}),We=Ra({a:BigInt(0),b:BigInt(7),Fp:es,n:Da,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=Da,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Yl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,s=BigInt("0x100000000000000000000000000000000"),c=Wa(o*n,e),a=Wa(-r*n,e),u=Y(n-c*t-a*i,e),f=Y(-c*r-a*o,e),h=u>s,y=f>s;if(h&&(u=e-u),y&&(f=e-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:y,k2:f}}}},Lt),Dm=BigInt(0);var Wm=We.ProjectivePoint;var ts=class{static async convertPublicKey(e){let{publicKey:t,compressedPublicKey:r}=e;return We.ProjectivePoint.fromHex(t).toRawBytes(r)}static async generateKeyPair(e){let{compressedPublicKey:t}=e??{};t??=!0;let r=We.utils.randomPrivateKey(),i=We.getPublicKey(r,t);return{privateKey:r,publicKey:i}}static async getCurvePoints(e){let{key:t}=e;t.byteLength===32&&(t=await ts.getPublicKey({privateKey:t}));let r=We.ProjectivePoint.fromHex(t),i=Ne(r.x,32),o=Ne(r.y,32);return{x:i,y:o}}static async getPublicKey(e){let{privateKey:t,compressedPublicKey:r}=e;return r??=!0,We.getPublicKey(t,r)}static async sharedSecret(e){let{privateKey:t,publicKey:r}=e;return We.getSharedSecret(t,r).slice(1)}static async sign(e){let{data:t,hash:r,key:i}=e,o=this.hashAlgorithms[r],s=o(t);return We.sign(s,i).toCompactRawBytes()}static async validatePrivateKey(e){let{key:t}=e;return We.utils.isValidPrivateKey(t)}static async validatePublicKey(e){let{key:t}=e;try{We.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0}static async verify(e){let{data:t,hash:r,key:i,signature:o}=e,s=this.hashAlgorithms[r],c=s(t);return We.verify(o,c,i,{lowS:!1})}},Se=ts;Se.hashAlgorithms={"SHA-256":Lt};var Ql=n=>n instanceof Uint8Array;var Me=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),qa=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ed=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ed)throw new Error("Non little-endian hardware is not supported");function di(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function yi(n){if(typeof n=="string"&&(n=di(n)),!Ql(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}var td=n=>Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object;function Ha(n,e){if(e!==void 0&&(typeof e!="object"||!td(e)))throw new Error("Options should be object or undefined");return Object.assign(n,e)}function yn(n,e){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof e=="number"&&n.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function ja(n,e){if(n.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let t=!0;for(let r=0;r<n.length;r++)t&&(t=n[r]===e[r]);return t}function rs(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),c=Number(t&o),a=r?4:0,u=r?0:4;n.setUint32(e+a,s,r),n.setUint32(e+u,c,r)}function ns(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function rd(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function Va(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function nd(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ns(n.outputLen),ns(n.blockLen)}function id(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function od(n,e){Va(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var sd={number:ns,bool:rd,bytes:Va,hash:nd,exists:id,output:od},Ee=sd;var me=(n,e)=>n[e++]&255|(n[e++]&255)<<8,is=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=yi(e),yn(e,32);let t=me(e,0),r=me(e,2),i=me(e,4),o=me(e,6),s=me(e,8),c=me(e,10),a=me(e,12),u=me(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=me(e,16+2*f)}process(e,t,r=!1){let i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],u=s[2],f=s[3],h=s[4],y=s[5],w=s[6],p=s[7],l=s[8],g=s[9],x=me(e,t+0),K=me(e,t+2),m=me(e,t+4),C=me(e,t+6),E=me(e,t+8),A=me(e,t+10),S=me(e,t+12),T=me(e,t+14),O=o[0]+(x&8191),L=o[1]+((x>>>13|K<<3)&8191),P=o[2]+((K>>>10|m<<6)&8191),W=o[3]+((m>>>7|C<<9)&8191),R=o[4]+((C>>>4|E<<12)&8191),$=o[5]+(E>>>1&8191),v=o[6]+((E>>>14|A<<2)&8191),k=o[7]+((A>>>11|S<<5)&8191),N=o[8]+((S>>>8|T<<8)&8191),B=o[9]+(T>>>5|i),d=0,U=d+O*c+L*(5*g)+P*(5*l)+W*(5*p)+R*(5*w);d=U>>>13,U&=8191,U+=$*(5*y)+v*(5*h)+k*(5*f)+N*(5*u)+B*(5*a),d+=U>>>13,U&=8191;let I=d+O*a+L*c+P*(5*g)+W*(5*l)+R*(5*p);d=I>>>13,I&=8191,I+=$*(5*w)+v*(5*y)+k*(5*h)+N*(5*f)+B*(5*u),d+=I>>>13,I&=8191;let _=d+O*u+L*a+P*c+W*(5*g)+R*(5*l);d=_>>>13,_&=8191,_+=$*(5*p)+v*(5*w)+k*(5*y)+N*(5*h)+B*(5*f),d+=_>>>13,_&=8191;let M=d+O*f+L*u+P*a+W*c+R*(5*g);d=M>>>13,M&=8191,M+=$*(5*l)+v*(5*p)+k*(5*w)+N*(5*y)+B*(5*h),d+=M>>>13,M&=8191;let q=d+O*h+L*f+P*u+W*a+R*c;d=q>>>13,q&=8191,q+=$*(5*g)+v*(5*l)+k*(5*p)+N*(5*w)+B*(5*y),d+=q>>>13,q&=8191;let G=d+O*y+L*h+P*f+W*u+R*a;d=G>>>13,G&=8191,G+=$*c+v*(5*g)+k*(5*l)+N*(5*p)+B*(5*w),d+=G>>>13,G&=8191;let H=d+O*w+L*y+P*h+W*f+R*u;d=H>>>13,H&=8191,H+=$*a+v*c+k*(5*g)+N*(5*l)+B*(5*p),d+=H>>>13,H&=8191;let j=d+O*p+L*w+P*y+W*h+R*f;d=j>>>13,j&=8191,j+=$*u+v*a+k*c+N*(5*g)+B*(5*l),d+=j>>>13,j&=8191;let te=d+O*l+L*p+P*w+W*y+R*h;d=te>>>13,te&=8191,te+=$*f+v*u+k*a+N*c+B*(5*g),d+=te>>>13,te&=8191;let X=d+O*g+L*l+P*p+W*w+R*y;d=X>>>13,X&=8191,X+=$*h+v*f+k*u+N*a+B*c,d+=X>>>13,X&=8191,d=(d<<2)+d|0,d=d+U|0,U=d&8191,d=d>>>13,I+=d,o[0]=U,o[1]=I,o[2]=_,o[3]=M,o[4]=q,o[5]=G,o[6]=H,o[7]=j,o[8]=te,o[9]=X}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=1<<13;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=s&65535;for(let c=1;c<8;c++)s=(e[c]+t[c]|0)+(s>>>16)|0,e[c]=s&65535}update(e){Ee.exists(this);let{buffer:t,blockLen:r}=this;e=yi(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(e,o);continue}t.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Ee.exists(this),Ee.output(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=r[s]>>>0,e[o++]=r[s]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}};function cd(n){let e=(r,i)=>n(i).update(yi(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}var Fa=cd(n=>new is(n));var ad=di("expand 16-byte k"),ud=di("expand 32-byte k"),fd=Me(ad),hd=Me(ud),$a=n=>!(n.byteOffset%4),Pr=n=>{let{core:e,rounds:t,counterRight:r,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:c}=Ha({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);Ee.number(i),Ee.number(t),Ee.number(c),Ee.bool(r),Ee.bool(o);let a=c/4;if(c%4!==0)throw new Error("Salsa/ChaCha: blockLen should be aligned to 4 bytes");return(u,f,h,y,w=0)=>{if(Ee.bytes(u),Ee.bytes(f),Ee.bytes(h),y||(y=new Uint8Array(h.length)),Ee.bytes(y),Ee.number(w),w<0||w>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(y.length<h.length)throw new Error(`Salsa/ChaCha: output (${y.length}) is shorter than data (${h.length})`);let p=[],l,g;if(u.length===32)l=u,g=hd;else if(u.length===16&&o)l=new Uint8Array(32),l.set(u),l.set(u,16),g=fd,p.push(l);else throw new Error(`Salsa/ChaCha: wrong key length=${u.length}, expected`);if(s){if(f.length<=16)throw new Error("Salsa/ChaCha: extended nonce should be bigger than 16 bytes");l=s(g,l,f.subarray(0,16),new Uint8Array(32)),p.push(l),f=f.subarray(16)}let x=16-i;if(f.length!==x)throw new Error(`Salsa/ChaCha: nonce should be ${x} or 16 bytes`);if(x!==12){let O=new Uint8Array(12);O.set(f,r?0:12-f.length),p.push(f=O)}let K=new Uint8Array(c),m=Me(K),C=Me(l),E=Me(f),A=$a(h)&&Me(h),S=$a(y)&&Me(y);p.push(m);let T=h.length;for(let O=0,L=w;O<T;L++){if(e(g,C,E,m,L,t),L>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");let P=Math.min(c,T-O);if(P===c&&S&&A){let W=O/4;if(O%4!==0)throw new Error("Salsa/ChaCha: wrong block position");for(let R=0;R<a;R++)S[W+R]=A[W+R]^m[R];O+=c;continue}for(let W=0;W<P;W++)y[O+W]=h[O+W]^K[W];O+=P}for(let O=0;O<p.length;O++)p[O].fill(0);return y}};var D=(n,e)=>n<<e|n>>>32-e;function pn(n,e,t,r,i,o=20){let s=n[0],c=n[1],a=n[2],u=n[3],f=e[0],h=e[1],y=e[2],w=e[3],p=e[4],l=e[5],g=e[6],x=e[7],K=i,m=t[0],C=t[1],E=t[2],A=s,S=c,T=a,O=u,L=f,P=h,W=y,R=w,$=p,v=l,k=g,N=x,B=K,d=m,U=C,I=E;for(let M=0;M<o;M+=2)A=A+L|0,B=D(B^A,16),$=$+B|0,L=D(L^$,12),A=A+L|0,B=D(B^A,8),$=$+B|0,L=D(L^$,7),S=S+P|0,d=D(d^S,16),v=v+d|0,P=D(P^v,12),S=S+P|0,d=D(d^S,8),v=v+d|0,P=D(P^v,7),T=T+W|0,U=D(U^T,16),k=k+U|0,W=D(W^k,12),T=T+W|0,U=D(U^T,8),k=k+U|0,W=D(W^k,7),O=O+R|0,I=D(I^O,16),N=N+I|0,R=D(R^N,12),O=O+R|0,I=D(I^O,8),N=N+I|0,R=D(R^N,7),A=A+P|0,I=D(I^A,16),k=k+I|0,P=D(P^k,12),A=A+P|0,I=D(I^A,8),k=k+I|0,P=D(P^k,7),S=S+W|0,B=D(B^S,16),N=N+B|0,W=D(W^N,12),S=S+W|0,B=D(B^S,8),N=N+B|0,W=D(W^N,7),T=T+R|0,d=D(d^T,16),$=$+d|0,R=D(R^$,12),T=T+R|0,d=D(d^T,8),$=$+d|0,R=D(R^$,7),O=O+L|0,U=D(U^O,16),v=v+U|0,L=D(L^v,12),O=O+L|0,U=D(U^O,8),v=v+U|0,L=D(L^v,7);let _=0;r[_++]=s+A|0,r[_++]=c+S|0,r[_++]=a+T|0,r[_++]=u+O|0,r[_++]=f+L|0,r[_++]=h+P|0,r[_++]=y+W|0,r[_++]=w+R|0,r[_++]=p+$|0,r[_++]=l+v|0,r[_++]=g+k|0,r[_++]=x+N|0,r[_++]=K+B|0,r[_++]=m+d|0,r[_++]=C+U|0,r[_++]=E+I|0}function ld(n,e,t,r){let i=Me(e),o=Me(t),s=Me(r),c=n[0],a=n[1],u=n[2],f=n[3],h=i[0],y=i[1],w=i[2],p=i[3],l=i[4],g=i[5],x=i[6],K=i[7],m=o[0],C=o[1],E=o[2],A=o[3];for(let S=0;S<20;S+=2)c=c+h|0,m=D(m^c,16),l=l+m|0,h=D(h^l,12),c=c+h|0,m=D(m^c,8),l=l+m|0,h=D(h^l,7),a=a+y|0,C=D(C^a,16),g=g+C|0,y=D(y^g,12),a=a+y|0,C=D(C^a,8),g=g+C|0,y=D(y^g,7),u=u+w|0,E=D(E^u,16),x=x+E|0,w=D(w^x,12),u=u+w|0,E=D(E^u,8),x=x+E|0,w=D(w^x,7),f=f+p|0,A=D(A^f,16),K=K+A|0,p=D(p^K,12),f=f+p|0,A=D(A^f,8),K=K+A|0,p=D(p^K,7),c=c+y|0,A=D(A^c,16),x=x+A|0,y=D(y^x,12),c=c+y|0,A=D(A^c,8),x=x+A|0,y=D(y^x,7),a=a+w|0,m=D(m^a,16),K=K+m|0,w=D(w^K,12),a=a+w|0,m=D(m^a,8),K=K+m|0,w=D(w^K,7),u=u+p|0,C=D(C^u,16),l=l+C|0,p=D(p^l,12),u=u+p|0,C=D(C^u,8),l=l+C|0,p=D(p^l,7),f=f+h|0,E=D(E^f,16),g=g+E|0,h=D(h^g,12),f=f+h|0,E=D(E^f,8),g=g+E|0,h=D(h^g,7);return s[0]=c,s[1]=a,s[2]=u,s[3]=f,s[4]=m,s[5]=C,s[6]=E,s[7]=A,r}var rg=Pr({core:pn,counterRight:!1,counterLen:8}),dd=Pr({core:pn,counterRight:!1,counterLen:4,allow128bitKeys:!1}),pi=Pr({core:pn,counterRight:!1,counterLen:8,extendNonceFn:ld,allow128bitKeys:!1}),ng=Pr({core:pn,counterRight:!1,counterLen:4,rounds:8}),ig=Pr({core:pn,counterRight:!1,counterLen:4,rounds:12}),yd=new Uint8Array(16),Ga=(n,e)=>{n.update(e);let t=e.length%16;t&&n.update(yd.subarray(t))},Ja=(n,e,t,r,i)=>{let o=n(e,t,new Uint8Array(32)),s=Fa.create(o);i&&Ga(s,i),Ga(s,r);let c=new Uint8Array(16),a=qa(c);rs(a,0,BigInt(i?i.length:0),!0),rs(a,8,BigInt(r.length),!0),s.update(c);let u=s.digest();return o.fill(0),u},za=n=>(e,t,r)=>(yn(e,32),yn(t),{tagLength:16,encrypt:o=>{let s=new Uint8Array(o.length+16);n(e,t,o,s,1);let c=Ja(n,e,t,s.subarray(0,-16),r);return s.set(c,o.length),s},decrypt:o=>{if(o.length<16)throw new Error(`Encrypted data should be at least ${16}`);let s=o.subarray(-16),c=o.subarray(0,-16),a=Ja(n,e,t,c,r);if(!ja(s,a))throw new Error("Wrong tag");return n(e,t,c,void 0,1)}}),og=za(dd),os=za(pi);var Za=class{static async decrypt(e){let{data:t,key:r,nonce:i}=e;return pi(r,i,t)}static async encrypt(e){let{data:t,key:r,nonce:i}=e;return pi(r,i,t)}static async generateKey(){return crypto.getRandomValues(new Uint8Array(32))}};var Ya=16,Xa=class{static async decrypt(e){let{additionalData:t,data:r,key:i,nonce:o,tag:s}=e,c=os(i,o,t),a=new Uint8Array([...r,...s]);return c.decrypt(a)}static async encrypt(e){let{additionalData:t,data:r,key:i,nonce:o}=e,c=os(i,o,t).encrypt(r),a=c.subarray(0,-Ya),u=c.subarray(-Ya);return{ciphertext:a,tag:u}}static async generateKey(){return crypto.getRandomValues(new Uint8Array(32))}};var Qa=class extends zn{constructor(){super(...arguments);this.namedCurves=["secp256k1","X25519"]}async deriveBits(t){let{algorithm:r,baseKey:i,length:o}=t;this.checkAlgorithmOptions({algorithm:r,baseKey:i}),this.checkKeyUsages({keyUsages:["deriveBits"],allowedKeyUsages:i.usages}),this.checkKeyUsages({keyUsages:["deriveBits"],allowedKeyUsages:r.publicKey.usages});let s,c=i.algorithm;switch(c.namedCurve){case"secp256k1":{let u=i.material,f=r.publicKey.material;s=await Se.sharedSecret({privateKey:u,publicKey:f});break}case"X25519":{let u=i.material,f=r.publicKey.material;s=await ar.sharedSecret({privateKey:u,publicKey:f});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}if(o===null)return s;if(o&&o%8!==0)throw new we("To be compatible with all browsers, 'length' must be a multiple of 8.");let a=o/8;if(s.byteLength<a)throw new we("Requested 'length' exceeds the byte length of the derived secret.");return a===s.byteLength?s:s.slice(0,a)}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"secp256k1":{r.compressedPublicKey??=!0,s=await Se.generateKeyPair({compressedPublicKey:r.compressedPublicKey});break}case"X25519":{s=await ar.generateKeyPair();break}}if(!ir(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}};var eu=class extends Zn{constructor(){super(...arguments);this.hashAlgorithms=["SHA-256"];this.namedCurves=["secp256k1"]}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"secp256k1":{r.compressedPublicKey??=!0,s=await Se.generateKeyPair({compressedPublicKey:r.compressedPublicKey});break}}if(!ir(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}async sign(t){let{algorithm:r,key:i,data:o}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),this.checkKeyUsages({keyUsages:["sign"],allowedKeyUsages:i.usages});let s,c=i.algorithm;switch(c.namedCurve){case"secp256k1":{s=await Se.sign({hash:r.hash,key:i.material,data:o});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return s}async verify(t){let{algorithm:r,key:i,signature:o,data:s}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"public"}),this.checkKeyUsages({keyUsages:["verify"],allowedKeyUsages:i.usages});let c,a=i.algorithm;switch(a.namedCurve){case"secp256k1":{c=await Se.verify({hash:r.hash,key:i.material,signature:o,data:s});break}default:throw new TypeError(`Out of range: '${a.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return c}};var tu=class extends Yn{constructor(){super(...arguments);this.namedCurves=["Ed25519","Ed448"]}async generateKey(t){let{algorithm:r,extractable:i,keyUsages:o}=t;this.checkGenerateKey({algorithm:r,keyUsages:o});let s,c;switch(r.namedCurve){case"Ed25519":{s=await tt.generateKeyPair();break}}if(!ir(s))throw new Error("Operation failed to generate key pair.");return c={privateKey:new le(r,i,s.privateKey,"private",this.keyUsages.privateKey),publicKey:new le(r,!0,s.publicKey,"public",this.keyUsages.publicKey)},c}async sign(t){let{algorithm:r,key:i,data:o}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"private"}),this.checkKeyUsages({keyUsages:["sign"],allowedKeyUsages:i.usages});let s,c=i.algorithm;switch(c.namedCurve){case"Ed25519":{s=await tt.sign({key:i.material,data:o});break}default:throw new TypeError(`Out of range: '${c.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return s}async verify(t){let{algorithm:r,key:i,signature:o,data:s}=t;this.checkAlgorithmOptions({algorithm:r}),this.checkKeyAlgorithm({keyAlgorithmName:i.algorithm.name}),this.checkKeyType({keyType:i.type,allowedKeyType:"public"}),this.checkKeyUsages({keyUsages:["verify"],allowedKeyUsages:i.usages});let c,a=i.algorithm;switch(a.namedCurve){case"Ed25519":{c=await tt.verify({key:i.material,signature:o,data:s});break}default:throw new TypeError(`Out of range: '${a.namedCurve}'. Must be one of '${this.namedCurves.join(", ")}'`)}return c}};var ru=class extends ei{constructor(){super(...arguments);this.hashAlgorithms=["SHA-256","SHA-384","SHA-512"]}async deriveBits(t){let{algorithm:r,baseKey:i,length:o}=t;if(this.checkAlgorithmOptions({algorithm:r,baseKey:i}),this.checkKeyUsages({keyUsages:["deriveBits"],allowedKeyUsages:i.usages}),typeof o<"u"&&o===0)throw new we("The value of 'length' cannot be zero.");if(o&&o%8!==0)throw new we("To be compatible with all browsers, 'length' must be a multiple of 8.");return or.deriveKey({hash:r.hash,iterations:r.iterations,length:o,password:i.material,salt:r.salt})}async importKey(t){let{format:r,keyData:i,algorithm:o,extractable:s,keyUsages:c}=t;return this.checkImportKey({algorithm:o,format:r,extractable:s,keyUsages:c}),new le(o,s,i,"secret",c)}};var nu=class extends Qn{async decrypt(e){let{algorithm:t,key:r,data:i}=e;return this.checkAlgorithmOptions({algorithm:t,key:r}),this.checkKeyUsages({keyUsages:["decrypt"],allowedKeyUsages:r.usages}),Ir.decrypt({counter:t.counter,data:i,key:r.material,length:t.length})}async encrypt(e){let{algorithm:t,key:r,data:i}=e;return this.checkAlgorithmOptions({algorithm:t,key:r}),this.checkKeyUsages({keyUsages:["encrypt"],allowedKeyUsages:r.usages}),Ir.encrypt({counter:t.counter,data:i,key:r.material,length:t.length})}async generateKey(e){let{algorithm:t,extractable:r,keyUsages:i}=e;this.checkGenerateKey({algorithm:t,keyUsages:i});let o=await Ir.generateKey({length:t.length});if(fe(o)!=="Uint8Array")throw new Error("Operation failed to generate key.");return new le(t,r,o,"secret",this.keyUsages)}};var pd={Ed25519:{name:"EdDSA",namedCurve:"Ed25519"},Ed448:{name:"EdDSA",namedCurve:"Ed448"},X25519:{name:"ECDH",namedCurve:"X25519"},"secp256k1:ES256K":{name:"ECDSA",namedCurve:"secp256k1"},secp256k1:{name:"ECDH",namedCurve:"secp256k1"},"P-256":{name:"ECDSA",namedCurve:"P-256"},"P-384":{name:"ECDSA",namedCurve:"P-384"},"P-521":{name:"ECDSA",namedCurve:"P-521"},A128CBC:{name:"AES-CBC",length:128},A192CBC:{name:"AES-CBC",length:192},A256CBC:{name:"AES-CBC",length:256},A128CTR:{name:"AES-CTR",length:128},A192CTR:{name:"AES-CTR",length:192},A256CTR:{name:"AES-CTR",length:256},A128GCM:{name:"AES-GCM",length:128},A192GCM:{name:"AES-GCM",length:192},A256GCM:{name:"AES-GCM",length:256},HS256:{name:"HMAC",hash:{name:"SHA-256"}},HS384:{name:"HMAC",hash:{name:"SHA-384"}},HS512:{name:"HMAC",hash:{name:"SHA-512"}}},md={"EdDSA:Ed25519":{alg:"EdDSA",crv:"Ed25519",kty:"OKP"},"EdDSA:Ed448":{alg:"EdDSA",crv:"Ed448",kty:"OKP"},"ECDH:X25519":{crv:"X25519",kty:"OKP"},"ECDSA:secp256k1":{alg:"ES256K",crv:"secp256k1",kty:"EC"},"ECDH:secp256k1":{crv:"secp256k1",kty:"EC"},"ECDSA:P-256":{alg:"ES256",crv:"P-256",kty:"EC"},"ECDSA:P-384":{alg:"ES384",crv:"P-384",kty:"EC"},"ECDSA:P-521":{alg:"ES512",crv:"P-521",kty:"EC"},"AES-CBC:128":{alg:"A128CBC",kty:"oct"},"AES-CBC:192":{alg:"A192CBC",kty:"oct"},"AES-CBC:256":{alg:"A256CBC",kty:"oct"},"AES-CTR:128":{alg:"A128CTR",kty:"oct"},"AES-CTR:192":{alg:"A192CTR",kty:"oct"},"AES-CTR:256":{alg:"A256CTR",kty:"oct"},"AES-GCM:128":{alg:"A128GCM",kty:"oct"},"AES-GCM:192":{alg:"A192GCM",kty:"oct"},"AES-GCM:256":{alg:"A256GCM",kty:"oct"},"HMAC:SHA-256":{alg:"HS256",kty:"oct"},"HMAC:SHA-384":{alg:"HS384",kty:"oct"},"HMAC:SHA-512":{alg:"HS512",kty:"oct"}},gd={"ed25519-pub":{alg:"EdDSA",crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{alg:"EdDSA",crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{alg:"ES256K",crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{alg:"ES256K",crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}},bd={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"},Oe=class{static async cryptoKeyToJwk(e){let{algorithm:t,extractable:r,material:i,type:o,usages:s}=e.key,c=Oe.webCryptoToJose(t);return c.ext=r?"true":"false",c.key_ops=s,c=await Oe.keyToJwk({keyMaterial:i,keyType:o,...c}),{...c}}static async cryptoKeyToJwkPair(e){let{keyPair:t}=e,r=await Oe.cryptoKeyToJwk({key:t.privateKey}),i=await Oe.cryptoKeyToJwk({key:t.publicKey});return{...{privateKeyJwk:r,publicKeyJwk:i}}}static async joseToMulticodec(e){let t=e.key,r=[];"crv"in t&&(r.push(t.crv),"d"in t?r.push("private"):r.push("public"));let i=r.join(":"),o=bd[i];if(o===void 0)throw new Error(`Unsupported JOSE to Multicodec conversion: '${i}'`);return{code:ie.getCodeFromName({name:o}),name:o}}static joseToWebCrypto(e){let t=[];if("crv"in e&&e.crv)t.push(e.crv),e.crv==="secp256k1"&&e.alg==="ES256K"&&t.push(e.alg);else if(e.alg!==void 0)t.push(e.alg);else throw new TypeError("One or more parameters missing: 'alg' or 'crv'");let r=t.join(":"),i=pd[r];if(i===void 0)throw new Error(`Unsupported JOSE to WebCrypto conversion: '${r}'`);return{...i}}static async jwkThumbprint(e){let{key:t}=e,r=t.kty,i;if(r==="EC")i={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(r==="oct")i={k:t.k,kty:t.kty};else if(r==="OKP")i={crv:t.crv,kty:t.kty,x:t.x};else if(r==="RSA")i={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${r}`);Ti(i);let o=Oe.canonicalize(i),s=z.string(o).toUint8Array(),c=Lt(s);return z.uint8Array(c).toBase64Url()}static async jwkToCryptoKey(e){let t=e.key,{keyMaterial:r,keyType:i}=await Oe.jwkToKey({key:t}),o=Oe.joseToWebCrypto(t),s;if("ext"in t&&t.ext!==void 0)s=t.ext==="true";else throw new Error("Conversion from JWK to CryptoKey failed. Required parameter missing: 'ext'");let c;if("key_ops"in t&&t.key_ops!==void 0)c=t.key_ops;else throw new Error("Conversion from JWK to CryptoKey failed. Required parameter missing: 'key_ops'");return new le(o,s,r,i,c)}static async jwkToKey(e){let t=e.key,r,i;if("d"in t)r=z.base64Url(t.d).toUint8Array(),i="private";else if("y"in t&&t.y){let o=new Uint8Array([4]),s=z.base64Url(t.x).toUint8Array(),c=z.base64Url(t.y).toUint8Array();r=new Uint8Array([...o,...s,...c]),i="public"}else if("x"in t)r=z.base64Url(t.x).toUint8Array(),i="public";else if("k"in t)r=z.base64Url(t.k).toUint8Array(),i="private";else throw new Error("Jose: Unknown JSON Web Key format.");return{keyMaterial:r,keyType:i}}static async jwkToMultibaseId(e){let t=e.key,{name:r}=await Oe.joseToMulticodec({key:t}),{keyMaterial:i}=await Oe.jwkToKey({key:t});if("crv"in t&&!("d"in t))switch(t.crv){case"secp256k1":{i=await Se.convertPublicKey({publicKey:i,compressedPublicKey:!0});break}}return Po({key:i,multicodecName:r})}static async keyToJwk(e){let{keyMaterial:t,keyType:r,...i}=e,o={...i};if("crv"in o){switch(o.crv){case"Ed25519":{let s=r==="private"?await tt.getPublicKey({privateKey:t}):t;o.x=z.uint8Array(s).toBase64Url(),o.kty??="OKP";break}case"X25519":{let s=r==="private"?await ar.getPublicKey({privateKey:t}):t;o.x=z.uint8Array(s).toBase64Url(),o.kty??="OKP";break}case"secp256k1":{let s=await Se.getCurvePoints({key:t});o.x=z.uint8Array(s.x).toBase64Url(),o.y=z.uint8Array(s.y).toBase64Url(),o.kty??="EC";break}default:throw new Error(`Unsupported key to JWK conversion: ${o.crv}`)}r==="private"&&(o={d:z.uint8Array(t).toBase64Url(),...o})}return!("crv"in o)&&o.kty==="oct"&&(o.k=z.uint8Array(t).toBase64Url()),{...o}}static async multicodecToJose(e){let{code:t,name:r}=e;if(!(r?!t:t))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?ie.getNameFromCode({code:t}):r;let o=gd[r];if(o===void 0)throw new Error(`Unsupported Multicodec to JOSE conversion: '${e.name}'`);return{...o}}static webCryptoToJose(e){let t=[];if(t.push(e.name),"namedCurve"in e)t.push(e.namedCurve);else if("length"in e&&e.length!==void 0)t.push(e.length.toString());else if("hash"in e)t.push(e.hash.name);else throw new TypeError("One or more parameters missing: 'name', 'namedCurve', 'length', or 'hash'");let r=t.join(":"),i=md[r];if(i===void 0)throw new Error(`Unsupported WebCrypto to JOSE conversion: '${r}'`);return{...i}}static canonicalize(e){let r=Object.keys(e).sort().reduce((i,o)=>(i[o]=e[o],i),{});return JSON.stringify(r)}};function wd(n){return class extends n{async toJwk(){return Oe.cryptoKeyToJwk({key:this})}}}var Qg=wd(le);export{Ir as AesCtr,nu as AesCtrAlgorithm,_a as AesGcm,Xn as BaseAesAlgorithm,Qn as BaseAesCtrAlgorithm,zn as BaseEcdhAlgorithm,Zn as BaseEcdsaAlgorithm,Yn as BaseEdDsaAlgorithm,Kt as BaseEllipticCurveAlgorithm,ei as BasePbkdf2Algorithm,yt as ConcatKdf,mt as CryptoAlgorithm,Rt as CryptoError,le as CryptoKey,wd as CryptoKeyToJwkMixin,Qg as CryptoKeyWithJwk,ps as DataError,Qa as EcdhAlgorithm,eu as EcdsaAlgorithm,tt as Ed25519,tu as EdDsaAlgorithm,re as InvalidAccessError,Oe as Jose,fr as NotSupportedError,we as OperationError,or as Pbkdf2,ru as Pbkdf2Algorithm,Se as Secp256k1,ms as SyntaxError,ar as X25519,Za as XChaCha20,Xa as XChaCha20Poly1305,Lo as utils};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.mjs.map
